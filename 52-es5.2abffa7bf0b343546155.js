function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"1MdG":function(e,t,n){"use strict";n.r(t),t.default='\r\n<div class="row mt-4 mb-8">\r\n    <div class="container-fluid">\r\n        <div class="card ">\r\n            <div class="card-header"><b>Create Support Request</b></div>\r\n                <form [formGroup]="createTicketForm">\r\n                    <div class="card-body">\r\n                        <div class="row">\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Select Concerned Department<sup>*</sup></label>\r\n                            \x3c!-- <select  class="form-control" formControlName="createTicketConcern">\r\n                                <option value=""> --Select-- </option>\r\n                                <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                                  <option value="{{d.userDept}}" [disabled]="d.optdisabled">{{d.userDeptKey}}</option>\r\n                                </ng-container>\r\n                            </select> --\x3e\r\n                            <input type="text" class="form-control" [(ngModel)]="concern" readonly formControlName="createTicketConcern">\r\n                        </div>\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Select Request Type<sup>*</sup></label>\r\n\r\n                            <input type="hidden" formControlName="queryDesc" [(ngModel)]="userDetails">\r\n              \r\n                              \x3c!-- <select class="form-control" formControlName="createTicketQuery" (change)="setNameOfQuery($event)">\r\n                              <option value=\'\'> --Select-- </option>\r\n                              <option value=\'reratrib\'>Real Estate Regulatory Authority and Appellate Tribunal</option>\r\n                              <option value=\'projectreg\'>Real Estate Projects Registration</option>\r\n                              <option value="refund">Refund Request</option>\r\n                              <option value=\'agentreg\'> Real Estate Agents Registration</option>\r\n                              <option value=\'filingcomp\'>Filing of complaints</option>\r\n                              <option value=\'financedicipline\'>Financial Discipline</option>\r\n                              <option value=""></option>\r\n                              </select> --\x3e\r\n                              <input type="text" class="form-control" [(ngModel)]="userDetails" readonly formControlName="createTicketQuery">     \r\n                        </div>\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Attachment</label>\r\n                            <input type="hidden" [(ngModel)]="uploadTicketFile.aadharId" formControlName="createTicketFile" />\r\n                            <app-file-upload (myEvent)="setFile($event)" *ngIf="test"\r\n                                [parm]="{fileId:\'aadharId\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n                        </div>\r\n                    </div>\r\n                        <div class="row mt-4">\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                            <textarea rows="3" cols="1" class="form-control" formControlName="createTicketDetails"></textarea>\r\n                        </div>\r\n                        </div>\r\n                        <div class="row mt-4">\r\n                        <div class="col-md-4">\r\n                            <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="!this.createTicketForm.valid" disabled (click)="submitTicket()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                        </div>\r\n                    </div>\r\n  \r\n                    </div>\r\n                </form>\r\n         </div>\r\n      </div>\r\n</div>   \r\n\r\n  <app-validation-message [message]="inputJson"></app-validation-message>\r\n\r\n  <app-loader *ngIf="loadingSpinner"></app-loader>'},"5B9t":function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\r\n  <div class="container-fluid">\r\n    <div class="col-md-12 text-center mb-2">\r\n      <h2 class="text-dark mt-4">Support Request/ Report</h2>\r\n    </div>\r\n    <form [formGroup]="searchForm" (ngSubmit)="searchFormSubmit()">\r\n\r\n      <div class="mb-4 mt-5 col-md-12">\r\n        <div class="col-md-12">\r\n              <div><div>\r\n              <div class="col-md-12">\r\n                 \r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Support Request No. </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketNumber">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Applicant Name </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketRaiseBy">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern From Created Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="concernFromCreatedDate" [(ngModel)]="concernFromCreatedDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern To Created Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="concernToCreatedDate" [(ngModel)]="concernToCreatedDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Disposed On From Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="disposedOnFromDate" [(ngModel)]="disposedOnFromDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Disposed On To Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="disposedOnToDate" [(ngModel)]="disposedOnToDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <select class="form-control" formControlName="searchTicketDept" [(ngModel)]="searchTicketDept">\r\n                      <option value="">--Select--</option>\r\n                      <option *ngFor="let d of getAllDeptsSelectList, let i = index" [value]="d.userDept">\r\n                        {{d.userDeptKey}}\r\n                      </option>\r\n                    </select> \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Query</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketQuery" [(ngModel)]="searchTicketQuery">\r\n                    <option value="">--Select--</option>\r\n                    <option value=\'reratrib\'>Real Estate Regulatory Authority and Appellate Tribunal</option>\r\n                    <option value=\'projectreg\'>Real Estate Projects Registration</option>\r\n                    <option value=\'agentreg\'> Real Estate Agents Registration</option>\r\n                    <option value=\'filingcomp\'>Filing of complaints</option>\r\n                    <option value=\'financedicipline\'>Financial Discipline</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Status</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketStatus" [(ngModel)]="searchTicketStatus">\r\n                    <option value="">--Select--</option>\r\n                    <option value="OPEN">Open</option>\r\n                    <option value="ENQUIRY">Enquiry</option>\r\n                    \x3c!--<option value="FORWARDED">Forwarded</option>--\x3e\r\n                    <option value="CLOSED">Closed</option>\r\n                    <option value="ESCALATED">Escalated</option>\r\n                    <option value="REJECTED">Rejected</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n                <div class="form-group col-md-12 text-center">\r\n                  <button type="submit" class="btn btn-primary btn-small mt-5" [disabled]="!this.searchForm.valid">Search</button>\r\n                  <button type="reset" class="btn btn-primary btn-small mt-5" (click)=\'resetForm()\'>Reset</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n     </form>\r\n\r\n    <div class="col-md-12">\r\n      <div>\r\n        <div class="col-md-12 mb-4">\r\n          <div class="card ">\r\n            \r\n      <div class="card-header d-flex justify-content-between align-items-center">\r\n        <h2><b>Support Request/ Report</b></h2>\r\n\r\n        <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n        </div>\r\n            \x3c!-- <div class="card-header"><b>Support Request/ Report</b>\r\n              <b> <span class="pull-right"> <button (click)="exportToExcel()" class="text-right mb-2 btn btn-success">Export To Excel</button></span></b>\r\n            </div> --\x3e\r\n            <div class="card-body ">\r\n              <div class="row ">\r\n                <div class="col-md-12 ">\r\n                  <div class="table-responsive col-md-12 ">\r\n\r\n                    <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n                    <table #table_listing class="table table-bordered text-center  bg-white">\r\n                                         \r\n    <thead>\r\n      <tr class="bg-light  text-size-small text-center">\r\n          <th>S.No.</th>\r\n          <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n          </div>\r\n        </th>  \r\n        \r\n        <th>Attachment</th>\r\n         <th class="w-50"> Forwarded Status</th>\r\n        <th> Status</th>\r\n        <th class="w-7">Action</th>\r\n      </tr>\r\n  </thead>\r\n   \r\n                      <tbody  *ngIf="filterDataArray?.length > 0; else noTicketFound">\r\n                        \x3c!--<tr *ngFor="let data of ticketListing | paginate: { id: \'foo3\', itemsPerPage: \'20\', currentPage: tickets }">--\x3e\r\n                        <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }; let ic = index">\r\n                    <td class="tabel-text-right">{{((currentPageNo-1)*10)+(ic+1) }} </td>\r\n                    \x3c!-- <td>{{ i + 1 }}</td> --\x3e\r\n                          <td>{{ data?.ticketNo }}</td>\r\n                          <td>{{ data?.createdUserName }}</td>\r\n                          \x3c!--<td>{{data?.concernDeptName}}</td>--\x3e\r\n                          <td>{{getDeptName(data?.concernDeptName)}}</td>\r\n                          <td>{{data?.query}}</td>\r\n                          <td class="text-left">{{data.details}}</td>\r\n                          <td>\r\n                            <span *ngIf="(data.lattitude != null || data.longitude != null); else source_div">Mobile App</span>\r\n                            <ng-template #source_div>Web</ng-template>\r\n                            </td>\r\n                          <td class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n                          <td class="text-nowrap" *ngIf="data.disposedOn;else disposediv">{{data.disposedOn | date : \'dd-MM-yyyy\'}}</td>\r\n                          <ng-template #disposediv><td>--</td></ng-template>\r\n                          \r\n                          <td>\r\n                            <div *ngIf="data?.attachmentUId;then download_link else no_image_available"></div>\r\n                            <label class="control-label">\r\n                              <ng-template #download_link>\r\n                                \x3c!--<a href="{{ fileDonwloadPath }}{{ data?.attachmentUId }}" class="text-danger"> <i\r\n                                    class="icon icon-download"></i> Download</a>--\x3e\r\n                                <app-multi-file-view [Uid]="data?.attachmentUId" ></app-multi-file-view>\r\n                              </ng-template>\r\n                              <ng-template #no_image_available>\r\n                                \x3c!--No Attachment Available!--\x3e\r\n                                --\r\n                              </ng-template>\r\n                            </label>\r\n                          </td>\r\n                          <td class="text-center">\r\n                            \x3c!--<ng-container *ngFor="let fwdlist of data.forwardUserList">\r\n                              To: {{fwdlist.ticketEnquiryTo}}, Status: {{fwdlist.status}} <br>\r\n                            </ng-container>--\x3e\r\n                            <a *ngIf="data.forwardUserList.length > 0;else noForward" href= \'javascript:void(0)\' (click) =\'forwardedListFunc(data.forwardUserList)\'>View</a>\r\n                            <ng-template #noForward>--</ng-template>\r\n                            \r\n                          </td>\r\n                          \x3c!--<td *ngIf="data.status == \'FORWARDED\'; else status">--\x3e\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus == \'YES\'; else status_0"> ESCALATED </td>\r\n                            <ng-template #status_0>\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus != \'YES\'; else status_1">\r\n                              OPEN</td>\r\n                              <ng-template #status_1>\r\n                                <td>{{data.status}}</td>\r\n                              </ng-template>\r\n                            </ng-template>\r\n\r\n                          <td class="pt-4">\r\n                            <button class="btn btn-small bg-success text-white" (click)="takeActionOnTicket(data)"\r\n                              title="Ticket Action"><i class="icon-export"></i></button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                      <ng-template #noTicketFound>\r\n                        <tbody>\r\n                          <tr>\r\n                            <td colspan="14">\r\n                              <div *ngIf="completeFlag == \'Loading ...\'">{{completeFlag}}</div>\r\n                              <div *ngIf="completeFlag != \'Loading ...\'" class="error">{{completeFlag}}</div>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </ng-template>\r\n\r\n                    </table>\r\n                    <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n                      <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n                    </div>\r\n                    \x3c!--<div class="col-md-12 text-right">\r\n                      <pagination-controls  id="foo3" (pageChange)="tickets = $event"></pagination-controls>\r\n                    </div>--\x3e\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="modal show" id="reassign" *ngIf="ticketActionPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-lg ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>View Support Request</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketActionPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <div class="col-md-12 pt-2 pb-2 bg-light mb-4 border">\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Support Request No</label>\r\n            {{currentTicketData?.ticketNo}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created On</label>\r\n            {{currentTicketData?.createdOn | date : \'dd-MM-yyyy\'}}\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created By</label>\r\n            {{currentTicketData?.createdUserName}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Concern</label>\r\n            {{getDeptName(currentTicketData?.concernDeptName)}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Query</label>\r\n            {{currentTicketData.query}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Attachment</label>\r\n\r\n            <div *ngIf="currentTicketData?.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="currentTicketData.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                \x3c!--No Attachment Available!--\x3e\r\n                --\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="col-md-4">\r\n            <label class="control-label font-weight-bold mb-1">Remarks</label>\r\n            <p>{{currentTicketData?.details}}</p>\r\n          </div>\r\n          <div class="col-md-4" *ngIf="currentTicketData?.emailId!=null">\r\n            <label class="control-label font-weight-bold mb-1">Email Id </label>\r\n            <p>{{currentTicketData?.emailId}}</p>\r\n          </div>\r\n\r\n          <div class="col-md-4" *ngIf="currentTicketData?.mobileNo!=null">\r\n            <label class="control-label font-weight-bold mb-1">Mobile No </label>\r\n            <p>{{currentTicketData?.mobileNo}}</p>\r\n          </div>\r\n        </div>\r\n\r\n        \x3c!--e-office Documents start--\x3e\r\n        <div class="card shadow mb-4" *ngIf="efileList.length > 0">\r\n          <div class="card-header">\r\n            <label class="control-label font-weight-bold collapse-class" >e-office Documents\r\n              <a class="" data-toggle="collapse" href="#collapseEOfficeDoc" role="button" aria-expanded="false" aria-controls="collapseEOfficeDoc">+</a>\r\n            </label>\r\n          </div>  \r\n            <div class="card-body e-office-div collapse" id="collapseEOfficeDoc">\r\n              <div class="table-responsive text-center pb-2">\r\n                <table class="table table-bordered text-center tableLayout">\r\n                  <thead class="bg-light">\r\n                    <tr>\r\n                      <td width=\'6%\'>Sr. No</td>\r\n                      <td>eFile Number</td>\r\n                      <td>Subject</td>\r\n                      <td>etapal No.</td>\r\n                      <td>Date</td>\r\n                      <td>eTapals Associated</td>\r\n                      <td>Outward No.</td>\r\n                      <td>Decisions</td>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr *ngFor="let efile of efileList; let i = index" [attr.data-index]="i">\r\n                      <td>{{ i + 1 }}</td>\r\n                      <td><a href="javascript:void(0)" (click)="takeActionOnEFileClick(efile.fileId,\'efile\')">{{efile?.fileNo}}</a></td>\r\n                      <td>{{efile?.subject}}</td>\r\n                      <td><a href="javascript:void(0)" (click)="takeActionOnEFileClick(efile.eTapalfileId,\'etapal\')">{{efile?.etapalfileNo}}</a></td>\r\n                      <td>{{efile?.receivedDate | date: "dd-MM-yyyy"}}</td>\r\n                      <td>\r\n                        <p *ngFor="let docList of efile?.docLists">\r\n                          <app-multi-file-view [Uid]="docList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                      <td>{{ efile?.outwordNo }}</td>\r\n                      <td>\r\n                        <p *ngFor="let docAssociateList of efile?.docAssociateLists">\r\n                          <app-multi-file-view [Uid]="docAssociateList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n        </div>\r\n        \x3c!--e-office Documents end--\x3e\r\n\r\n \r\n      \r\n      \x3c!-- Enquiry Section --\x3e\r\n      <div *ngIf="efileViewAllPopup">\r\n        <app-efileviewalldupli [wfoEfileid]="efileId" ></app-efileviewalldupli>\r\n      </div>\r\n      <div class="card shadow mb-4" *ngIf="enquiryModel.length > 0">\r\n        <div *ngIf="enquiryModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Enquiries & Response\r\n            <a class="" data-toggle="collapse" href="#collapseEnquiry" role="button" aria-expanded="false" aria-controls="collapseEnquiry">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="enquiryModel.length > 0">\r\n          <div *ngFor="let ticketInEn of enquiryModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(ticketInEn.deptName)}}">\r\n              <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply">\r\n                  {{ticketInEn.userName}} ({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                \x3c!--<img src="assets/images/exclammation_mark1.png" id="curtain1">--\x3e\r\n              </div>\r\n              <ng-template #user_reply>\r\n                <div class="col-md-9">\r\n                  {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n              </ng-template>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{ticketInEn.remarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(ticketInEn.deptName)}}" id="collapseEnquiry">\r\n                <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply1">\r\n                  {{ticketInEn.userName}} ({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <ng-template #user_reply1>\r\n                  <div class="col-md-9">\r\n                    {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                  </div>\r\n                </ng-template>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{ticketInEn.remarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n   \r\n\r\n      \x3c!-- Forward Model --\x3e\r\n      <div class="card shadow mb-4" *ngIf="assignModel.length > 0">\r\n        <div *ngIf="assignModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Forwarded To\r\n            <a class="" data-toggle="collapse" href="#collapseForward" role="button" aria-expanded="false" aria-controls="collapseForward">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="assignModel.length > 0">\r\n          <div *ngFor="let assignModelData of assignModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}">\r\n              \r\n              <div class="col-md-9">\r\n                \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{assignModelData.remakrs}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}" id="collapseForward">\r\n                <div class="col-md-9">\r\n                  \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                  {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n\r\n                    <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{assignModelData.remakrs}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n     \r\n\r\n      <div class="card shadow mb-4" *ngIf="closedModel.length > 0">\r\n        <div *ngIf="closedModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class" >Closed By\r\n            <a class="" data-toggle="collapse" href="#collapseClose" role="button" aria-expanded="false" aria-controls="collapseClose">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="closedModel.length > 0">\r\n          <div *ngFor="let closedMo of closedModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(closedMo?.deptName)}}">\r\n              <div class="col-md-9">\r\n                {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{closedMo.remakrs}}</p>\r\n              </div>\r\n              <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                <p>{{closedMo.internalRemarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(closedMo?.deptName)}}" id="collapseClose">\r\n                <div class="col-md-9">\r\n                  {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    \r\n                    <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{closedMo.remakrs}}</p>\r\n                </div>\r\n                <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                  <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                  <p>{{closedMo.internalRemarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- Feedback from Authority Section --\x3e\r\n      <div class="card shadow mb-4" *ngIf="currentTicketData.esclationStatus == \'YES\'">  \r\n        <div class="card-header">\r\n          <label class="control-label">User Feedback</label>\r\n        </div>\r\n        <div class="col-md-12">\r\n          <p>{{currentTicketData.feedbackRemark}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="openModel.length > 0">\r\n        <div *ngIf="openModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold" >Reopened For</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="openModel.length > 0">\r\n          <div *ngFor="let openMo of openModel" class="card-body office-note-box popDis o-note">\r\n           \r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Department: </label>\r\n            {{openMo.assignTo}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{openMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{openMo.remarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>        \r\n      </div>--\x3e\r\n      \r\n      \x3c!-- Only For Ticket Officer --\x3e\r\n      <div *ngIf="currentUserType==\'officer\'">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="forwardticket"\r\n                  (click)="ticketAction($event)"><b>Forward</b>\r\n              </label>\r\n            </div>\r\n            \x3c!--<div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && ticketClosedOption == true">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            \x3c!--<div class="form-check-inline" *ngIf="ticketOpenedOption == true && statusOf!=\'CLOSED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="openticket"\r\n                  (click)="ticketAction($event)"><b>Open Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            <div class="form-check-inline" *ngIf="(ticketUniqueNo == \'UNDER SCRUTINY\' || ticketUniqueNo == \'\') && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="rejectticket"\r\n                  (click)="ticketAction($event)"><b>Reject Support Request</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n\r\n        <div class="col-md-12 border" *ngIf="ticketForwardArray.length > 0 && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n\r\n          <table class="table table-bordered table-striped mt-3">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assign To</th>\r\n              <th>Attachment Name</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of ticketForwardArray, let i = index">\r\n                <td>{{getDeptName(tval.ticketEnquiryTo)}}</td>\r\n                <td> {{tval.fileName}}</td>\r\n                <td>{{tval.remakrs}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteForwardTicketByIdId(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n\r\n        <form [formGroup]="forwardTicketForm" id="validateFoem" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border mt-3" *ngIf="forwardTicketFormIsActive">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold">Assign To<sup>*</sup></label>\r\n                <select class="form-control" formControlName="ticketEnquiryTo">\r\n                  <option value="">--Select--</option>\r\n                   \x3c!--<option value="TP" [disabled]="TP">TP</option>\r\n                  <option value="Legal" [disabled]="legal">Legal</option>\r\n                  <option value="Finance" [disabled]="finance">Finance</option>--\x3e\r\n                  <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                    <option value="{{d.userDept}}" [disabled]="d.optdisabled">{{d.userDeptKey}}</option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n\r\n              <div class="col-md-6">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketEnqFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketEnqFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 text-center ">\r\n                <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                  [disabled]="this.forwardTicketForm.invalid" (click)="addMore()">Add</button>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="ticketForwardArray.length <= 0" disabled\r\n                  (click)="submitTicketForward()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n          <form [formGroup]="closeTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Attachment</label>\r\n              <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n              <app-file-upload (myEvent)="setFile($event)"\r\n                [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n            </div>\r\n\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        \x3c!-- Open ticket again --\x3e\r\n        <div class="col-md-12 border" *ngIf="reOpenticketArray.length > 0">\r\n          <table class="table table-bordered table-striped">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assigned To</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of reOpenticketArray, let i = index">\r\n                <td>{{tval.assignTo}}</td>\r\n                <td>{{tval.remarks}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteOpenTicketById(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="openTicketFormIsActive">\r\n          <form [formGroup]="openTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktOpenId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Reassign To<sup>*</sup></label>\r\n              <select class="form-control" formControlName="assignTo">\r\n\r\n                <option value="">--Select--</option>\r\n                <ng-container *ngFor="let tl of this.ticketOpenedList">\r\n                  <option value="{{tl.tokey}}" [disabled] ="tl.enabled">{{tl.to}}</option>\r\n                </ng-container>\r\n              </select>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remarks"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12 text-center ">\r\n              <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                [disabled]="this.openTicketForm.invalid" (click)="addOpenTicketMore()">Add</button>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="reOpenticketArray.length <= 0" disabled (click)="submitTicketOpen()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        <div class="col-md-12 border" *ngIf="rejectTicketIsActive">\r\n          <form [formGroup]="rejectTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="ticketId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              Do you want to reject this Support Request?\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="rejectTicket()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TRO(Resolving Officer)  --\x3e\r\n      \r\n      \x3c!--<div *ngIf="(currentUserType==\'TP\' || currentUserType==\'Legal\' || currentUserType==\'Finance\') && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\')">--\x3e\r\n        \r\n        \x3c!-- added 14jun--\x3e\r\n        <div class="row" *ngIf="(resolvingOfficerStatus)">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n              <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n                <label class="form-check-label">\r\n                  <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                    (click)="ticketAction($event)"><b>Enquiry</b>\r\n                </label>\r\n              </div>\r\n            </div>  \r\n            <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n              <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n              </div>\r\n            </div>\r\n          </div>  \r\n        </div>\r\n\r\n        <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        </div>\r\n\r\n        <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TEO(Escalation Officer)  --\x3e\r\n      \x3c!--changed 14jun --\x3e\r\n      <div class="row" *ngIf="(escalationOfficerStatus)">\r\n        <div class="form-group col-md-12 text-center mb-4">\r\n          <span *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n          </span>\r\n          <span *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n            </div>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal show" id="reassign" *ngIf="forwardedListPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-small ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>Forwarded Status</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketForwardedListPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <table class="table table-bordered misDashTable text-center">\r\n          <thead>\r\n              <tr>\r\n                  <th>Dept</th>\r\n                  <th>Status</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr *ngFor="let fwdlist of ticketForwardedListArr">\r\n                  \x3c!--<td>{{fwdlist.ticketEnquiryTo}}</td>--\x3e\r\n                  <td>{{getDeptName(fwdlist.ticketEnquiryToDepName)}}</td>\r\n                  <td>{{fwdlist.status}}</td>\r\n              </tr>\r\n          </tbody>\r\n        </table>      \r\n      </div>\r\n    </div>\r\n  </div>\r\n </div>\r\n\r\n\r\n<div class="modal show" *ngIf="eFilePopup">\r\n  <div class="modal-dialog modal-lg modal-dialog-centered">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b> File Details With Notes</b></h3>\r\n        <button type="button" class="close" (click)="closeEFilePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n          <div class="card mb-2"  *ngIf="eOfficeFileType == \'efile\' && efilePopupLoading == false">\r\n                <div class="card-body ">\r\n            <div class="row">\r\n              <div class="col-md-6 mb-4">\r\n                  <label class="control-label font-weight-bold">File No</label>\r\n                <span>{{efileData.fileNo}}</span>\r\n              </div>\r\n              <div class="col-md-6 mb-4">\r\n                <label class="control-label font-weight-bold">Created On</label>\r\n                <span>{{efileData.createdOn | date : \'dd-MM-yyyy\'}}</span>\r\n              </div>\r\n              <div class="col-md-12 mb-4">\r\n                <label class="control-label font-weight-bold">Subject</label>  \r\n                <span>{{efileData.subject}}</span>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div> \r\n\r\n        <div class="card mb-2" *ngIf="eOfficeFileType == \'etapal\' && efilePopupLoading == false">\r\n            <div class="card-body ">\r\n          <div class="row">\r\n            <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Document Type</label>  \r\n                <span>{{eTapalData.docType}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received By</label>  \r\n              <span>{{eTapalData.receivedBy}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received Date</label>  \r\n              <span>{{eTapalData.receivedDate | date : \'dd-MM-yyyy\'}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Addressee</label>  \r\n              <span>{{eTapalData.departmentName}}</span>\r\n            </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Keyword</label>  \r\n            <span>{{eTapalData.captionKey}}</span>\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">File Download</label>\r\n            <span *ngFor="let doclistFile of eTapalData?.docLists">\r\n              <span class=" btn-small mb-2 mr-2"> <app-multi-file-view [Uid]="doclistFile.docUID" ></app-multi-file-view></span>\r\n            </span>\r\n          </div>\r\n          <div class="col-md-12 mb-4">\r\n            <label class="control-label font-weight-bold">Subject</label>\r\n          <span>{{eTapalData.subject}}</span>\r\n          </div>\r\n          </div>\r\n        </div>\r\n    </div> \r\n    <div class=\'text-center\' *ngIf="efilePopupLoading">Loading ...</div>\r\n  </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n<div class="popup-overlay" *ngIf="ticketActionPopup"></div>\r\n<div class="popup-overlay" *ngIf="forwardedListPopup"></div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<div class="popup-overlay" *ngIf="eFilePopup"></div>'},Ciua:function(e,t,n){"use strict";n.r(t),t.default=""},Eh9e:function(e,t,n){"use strict";n.r(t),t.default='<div class="d-flex justify-content-between align-items-center">\r\n  <h2>{{pageTitle}} </h2>\r\n  <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n  </div>\r\n\r\n<div #listing class="text-left">\r\n  <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n<div class="table-responsive">\r\n<table class="table table-bordered text-left text-center">\r\n   \r\n  <thead>\r\n      <tr class="bg-light  text-size-small text-center">\r\n          <th>S.No.</th>\r\n          <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n          </div>\r\n        </th>\r\n        <th>Attachment</th>\r\n      </tr>\r\n  </thead>\r\n \r\n  <tbody *ngIf="filterDataArray?.length > 0; else _no_approvedProjectList">\r\n      <tr *ngFor="let data of filterDataArray | paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }; let i = index">\r\n          <td class="tabel-text-right">{{((currentPageNo-1)*10)+(i+1) }} </td>\r\n          <td>{{data.dept}}</td>\r\n          <td>\r\n             {{data.concernDept}}\r\n          </td>\r\n          <td  class="text-nowrap">{{data.supportNo}}</td>\r\n          <td>{{data.query}}</td>\r\n          <td>{{data?.description}}</td>\r\n          <td>{{data.assignedTo}}</td>\r\n          <td>{{data.userType}}</td>\r\n          <td>{{data.mobileNo}}</td>\r\n          <td>{{data.emailId}}</td>\r\n          \x3c!-- <td>{{data.remarks}}</td> --\x3e\r\n\r\n          <td class="moreLinkTd">\r\n            <div class="d-flex justify-content-between" *ngIf="data.remarks!=null">\r\n            <div [ngClass]="{textViewMore: checkRemark(data.remarks)}">\r\n              {{data.remarks}}\r\n            </div> \r\n            <a *ngIf="checkRemark(data.remarks)" class="link-color showMore" href="javascript:void()">View More</a> \r\n            <a class="link-color hideMore" href="javascript:void()">Hide More</a>\r\n          </div>\r\n          </td>\r\n          \r\n          \x3c!-- <td  class="text-nowrap">{{data.status}}</td> --\x3e\r\n          \r\n          \r\n          <td  class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n          <td>\r\n            <app-multi-file-view *ngIf="data.uid; else _noRe" [Uid]="data.uid" ></app-multi-file-view>\r\n\r\n            <ng-template #_noRe>NA</ng-template>\r\n         </td>\r\n          \r\n          \x3c!--<td>{{data.projectStatus}}</td>--\x3e\r\n      </tr>\r\n  </tbody>\r\n  <ng-template #_no_approvedProjectList>\r\n      <tbody>\r\n          <tr>\r\n              <td colspan="8" class="red font-weight-bold text-center">{{loadingMessage}}</td>\r\n          </tr>\r\n      </tbody>\r\n  </ng-template>\r\n\r\n</table>\r\n<div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n  <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n</div>\r\n</div>\r\n</div>\r\n<div class="row mt-4">\r\n  <div class="col-md-12 text-center"> <a routerLink="/dashboard-new/authority/excutive-summary" title="Back"><button class="btn btn-primary">Back</button></a></div>\r\n</div>\r\n\r\n<div *ngIf="loadingSpinner">\r\n<app-loader></app-loader>\r\n</div>'},FYaX:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\r\n  <div class="container-fluid">\r\n    <div class="col-md-12 text-center mb-2">\r\n      <h2 class="text-dark mt-4">Support Request/ Report Task List</h2>\r\n    </div>\r\n\r\n    \x3c!--<div class="col-md-12" *ngIf="currentUserType==\'officer\'">\r\n      <div class=" col-md-12 table-responsive">\r\n          <table class="table table-bordered misDashTable text-center">\r\n              <thead>\r\n                  <tr>\r\n                      <th rowspan=2 width="25%">Dept</th>\r\n                      <th rowspan=2>Total</th>\r\n                      <th rowspan=2>Disposed</th>\r\n                      <th rowspan=2>Enquiry</th>\r\n                      <th colspan=3>Pending</th>\r\n                  </tr>\r\n                  <tr>\r\n                      <th rowspan=2><15 </th>\r\n                      <th rowspan=2>15-30</th>\r\n                      <th rowspan=2>>30</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr *ngFor="let d of pendencyList, let i = index">\r\n                  <td *ngIf="d.dept == \'TCO\';else depto" class="font-weight-bold">{{d.dept}}</td>\r\n                  <ng-template #depto><td class="font-weight-bold">{{getDeptName(d.dept)}}</td></ng-template>\r\n                  \r\n                  <td>\r\n                    <a *ngIf="d.total > 0;else e_total" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'TOTAL\')">{{d.total}}</a>\r\n                    <ng-template #e_total>{{d.total}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.disposed > 0;else e_disposed" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'DISPOSE\')">{{d.disposed}}({{(d.disposed / d.total) * 100 | number:\'1.0-0\'}}%)</a>\r\n                    <ng-template #e_disposed>0</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.enquiry > 0;else e_enquiry" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'ENQUIRY\')">{{d.enquiry}}</a>\r\n                    <ng-template #e_enquiry>{{d.enquiry}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.less15 > 0;else e_less15" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'LESS15\')">{{d.less15}}</a>\r\n                    <ng-template #e_less15>{{d.less15}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.between15to30 > 0;else e_between15to30" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'BETWEEN15TO30\')">{{d.between15to30}}</a>\r\n                    <ng-template #e_between15to30>{{d.between15to30}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.greater30 > 0;else e_greater30" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'GREATER30\')">{{d.greater30}}</a>\r\n                    <ng-template #e_greater30>{{d.greater30}}</ng-template>\r\n                  </td>                    \r\n                </tr>\r\n                <tr>\r\n                  <td class="font-weight-bold">Total</td>\r\n                  <td>{{pendencyListArrTotal[\'total\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'disposed\']}} ({{pendencyListArrTotal[\'disposec_percent\']}}%)</td>\r\n                  <td>{{pendencyListArrTotal[\'enquiry\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'less15\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'between15to30\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'greater30\']}}</td>\r\n                </tr>\r\n            </tbody>\r\n          </table>\r\n      </div>\r\n  </div>--\x3e\r\n\r\n    <form [formGroup]="searchForm" (ngSubmit)="searchFormSubmit()">\r\n\r\n      <div class="mb-4 mt-5 col-md-12">\r\n        <div class="col-md-12">\r\n          \x3c!--<div class="card shadow"> \r\n            <div class="card-body">--\x3e\r\n              <div><div>\r\n              <div class="col-md-12">\r\n                 \r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Support Request No. </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketNumber">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Applicant Name </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketRaiseBy">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <select class="form-control" formControlName="searchTicketDept" [(ngModel)]="searchTicketDept">\r\n                      <option value="">--Select--</option>\r\n                      <option *ngFor="let d of getAllDeptsSelectList, let i = index" [value]="d.userDept">\r\n                        {{d.userDeptKey}}\r\n                      </option>\r\n                    </select> \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Query</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketQuery" [(ngModel)]="searchTicketQuery">\r\n                    <option value="">--Select--</option>\r\n                    <option value=\'reratrib\'>Real Estate Regulatory Authority and Appellate Tribunal</option>\r\n                    <option value=\'projectreg\'>Real Estate Projects Registration</option>\r\n                    <option value=\'agentreg\'> Real Estate Agents Registration</option>\r\n                    <option value=\'filingcomp\'>Filing of complaints</option>\r\n                    <option value=\'financedicipline\'>Financial Discipline</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Status</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketStatus" [(ngModel)]="searchTicketStatus">\r\n                    <option value="">--Select--</option>\r\n                    <option value="OPEN">Open</option>\r\n                    <option value="ENQUIRY">Enquiry</option>\r\n                    \x3c!--<option value="FORWARDED">Forwarded</option>--\x3e\r\n                    <option value="CLOSED">Closed</option>\r\n                    <option value="ESCALATED">Escalated</option>\r\n                    <option value="REJECTED">Rejected</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n                <div class="form-group col-md-12 text-center">\r\n                  <button type="submit" class="btn btn-primary btn-small mt-5" [disabled]="!this.searchForm.valid">Search</button>\r\n                  <button type="reset" class="btn btn-primary btn-small mt-5" (click)=\'resetForm()\'>Reset</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n     </form>\r\n\r\n    <div class="col-md-12">\r\n      <div>\r\n        <div class="col-md-12 mb-4">\r\n          <div class="card ">\r\n            <div class="card-header d-flex justify-content-between align-items-center">\r\n              <h2><b>Support Request/ Report  Task List</b></h2>\r\n      \r\n              <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n              </div>\r\n            \x3c!-- <div class="card-header"><b>Support Request/ Report  Task List</b>\r\n              <b> <span class="pull-right"> <button (click)="exportToExcel()" class="text-right mb-2 btn btn-success">Export To Excel</button></span></b>\r\n            </div> --\x3e\r\n            <div class="card-body ">\r\n              <div class="row ">\r\n                <div class="col-md-12 ">\r\n                  <div class="table-responsive col-md-12 ">\r\n                    <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n                    <table #table_listing class="table table-bordered text-center  bg-white">                             \r\n                      <thead>\r\n                        <tr class="bg-light  text-size-small text-center">\r\n                            <th>S.No.</th>\r\n                            <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n                              <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n                              <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n                            </div>\r\n                          </th>  \r\n                          \r\n                          <th>Attachment</th>\r\n                           <th class="w-50"> Forwarded Status</th>\r\n                          <th> Status</th>\r\n                          <th class="w-7">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                      \x3c!-- <thead>\r\n                        <tr>\r\n                          <th class="w-7">S.No.</th>\r\n                          <th class="w-5">Support Request No.</th>\r\n                          <th class="w-5">Request Raised By</th>\r\n                          <th class="w-5">Concern</th>\r\n                          <th>Query </th>\r\n                          <th class="w-50"> Remarks</th>\r\n                          <th>Source</th>\r\n                          <th>Created On</th>\r\n                          <th>Attachment</th>\r\n                          <th class="w-50"> Forwarded Status</th>\r\n                          <th> Status</th>\r\n                          <th class="w-7">Action</th>\r\n                        </tr>\r\n                      </thead> --\x3e\r\n                      <tbody  *ngIf="filterDataArray?.length > 0; else noTicketFound">\r\n                        \x3c!--<tr *ngFor="let data of ticketListing | paginate: { id: \'foo3\', itemsPerPage: 10, currentPage: tickets }">--\x3e\r\n                        <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }; let ic = index">\r\n                    <td class="tabel-text-right">{{((currentPageNo-1)*10)+(ic+1) }} </td>\r\n                    \x3c!-- <td>{{ i + 1 }}</td> --\x3e\r\n                          <td>{{ data?.ticketNo }}</td>\r\n                          <td>{{ data?.createdUserName }}</td>\r\n                          \x3c!--<td>{{data?.concernDeptName}}</td>--\x3e\r\n                          <td>{{getDeptName(data?.concernDeptName)}}</td>\r\n                          <td>{{data?.query}}</td>\r\n                          <td class="text-left">{{data.details}}</td>\r\n                          <td>\r\n                            <span *ngIf="(data.lattitude != null || data.longitude != null); else source_div">Mobile App</span>\r\n                            <ng-template #source_div>Web</ng-template>\r\n                            </td>\r\n                          <td  class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n                          <td>\r\n                            <div *ngIf="data?.attachmentUId;then download_link else no_image_available"></div>\r\n                            <label class="control-label">\r\n                              <ng-template #download_link>\r\n                                \x3c!--<a href="{{ fileDonwloadPath }}{{ data?.attachmentUId }}" class="text-danger"> <i\r\n                                    class="icon icon-download"></i> Download</a>--\x3e\r\n                                <app-multi-file-view [Uid]="data?.attachmentUId" ></app-multi-file-view>\r\n                              </ng-template>\r\n                              <ng-template #no_image_available>\r\n                                \x3c!--No Attachment Available!--\x3e\r\n                                --\r\n                              </ng-template>\r\n                            </label>\r\n                          </td>\r\n                          <td class="text-center">\r\n                            \x3c!--<ng-container *ngFor="let fwdlist of data.forwardUserList">\r\n                              To: {{fwdlist.ticketEnquiryTo}}, Status: {{fwdlist.status}} <br>\r\n                            </ng-container>--\x3e\r\n                            <a *ngIf="data.forwardUserList.length > 0;else noForward" href= \'javascript:void(0)\' (click) =\'forwardedListFunc(data.forwardUserList)\'>View</a>\r\n                            <ng-template #noForward>--</ng-template>\r\n                            \r\n                          </td>\r\n                          \x3c!--<td *ngIf="data.status == \'FORWARDED\'; else status">--\x3e\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus == \'YES\'; else status_0"> ESCALATED </td>\r\n                            <ng-template #status_0>\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus != \'YES\'; else status_1">\r\n                              OPEN</td>\r\n                              <ng-template #status_1>\r\n                                <td>{{data.status}}</td>\r\n                              </ng-template>\r\n                            </ng-template>\r\n\r\n                          <td class="pt-4">\r\n                            <button class="btn btn-small bg-success text-white" (click)="takeActionOnTicket(data)"\r\n                              title="Ticket Action"><i class="icon-export"></i></button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                      <ng-template #noTicketFound>\r\n                        <tbody>\r\n                        <tr>\r\n                          <td colspan="12">\r\n                            <div *ngIf="completeFlag == \'Loading ...\'">{{completeFlag}}</div>\r\n                            <div *ngIf="completeFlag != \'Loading ...\'" class="error">{{completeFlag}}</div>\r\n                          </td>\r\n                        </tr>\r\n                        </tbody>\r\n                      </ng-template>\r\n\r\n                    </table>\r\n                    <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n                      <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n                    </div>\r\n                    \x3c!--<div class="col-md-12 text-right">\r\n                      <pagination-controls  id="foo3" (pageChange)="tickets = $event"></pagination-controls>\r\n                    </div>--\x3e\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="modal show" id="reassign" *ngIf="ticketActionPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-lg ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>View Support Request</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketActionPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <div class="col-md-12 pt-2 pb-2 bg-light mb-4 border">\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Support Request No</label>\r\n            {{currentTicketData?.ticketNo}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created On</label>\r\n            {{currentTicketData?.createdOn | date : \'dd-MM-yyyy\'}}\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created By</label>\r\n            {{currentTicketData?.createdUserName}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Concern</label>\r\n            {{getDeptName(currentTicketData?.concernDeptName)}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Query</label>\r\n            {{currentTicketData.query}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Attachment</label>\r\n\r\n            <div *ngIf="currentTicketData?.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="currentTicketData.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                \x3c!--No Attachment Available!--\x3e\r\n                --\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="col-md-4">\r\n            <label class="control-label font-weight-bold mb-1">Remarks</label>\r\n            <p>{{currentTicketData?.details}}</p>\r\n          </div>\r\n          <div class="col-md-4" *ngIf="currentTicketData?.emailId!=null">\r\n            <label class="control-label font-weight-bold mb-1">Email Id </label>\r\n            <p>{{currentTicketData?.emailId}}</p>\r\n          </div>\r\n\r\n          <div class="col-md-4" *ngIf="currentTicketData?.mobileNo!=null">\r\n            <label class="control-label font-weight-bold mb-1">Mobile No </label>\r\n            <p>{{currentTicketData?.mobileNo}}</p>\r\n          </div>\r\n        </div>\r\n\r\n        \x3c!--e-office Documents start--\x3e\r\n        <div class="card shadow mb-4" *ngIf="efileList.length > 0">\r\n          <div class="card-header">\r\n            <label class="control-label font-weight-bold collapse-class" >e-office Documents\r\n              <a class="" data-toggle="collapse" href="#collapseEOfficeDoc" role="button" aria-expanded="false" aria-controls="collapseEOfficeDoc">+</a>\r\n            </label>\r\n          </div>  \r\n            <div class="card-body e-office-div collapse" id="collapseEOfficeDoc">\r\n              <div class="table-responsive text-center pb-2">\r\n                <table class="table table-bordered text-center tableLayout">\r\n                  <thead class="bg-light">\r\n                    <tr>\r\n                      <td width=\'6%\'>Sr. No</td>\r\n                      <td>eFile Number</td>\r\n                      <td>Subject</td>\r\n                      <td>etapal No.</td>\r\n                      <td>Date</td>\r\n                      <td>eTapals Associated</td>\r\n                      <td>Outward No.</td>\r\n                      <td>Decisions</td>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr *ngFor="let efile of efileList; let i = index" [attr.data-index]="i">\r\n                      <td>{{ i + 1 }}</td>\r\n                      <td>{{efile?.fileNo}}</td>\r\n                      <td>{{efile?.subject}}</td>\r\n                      <td>{{efile?.etapalfileNo}}</td>\r\n                      <td>{{efile?.receivedDate | date: "dd-MM-yyyy"}}</td>\r\n                      <td>\r\n                        <p *ngFor="let docList of efile?.docLists">\r\n                          <app-multi-file-view [Uid]="docList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                      <td>{{ efile?.outwordNo }}</td>\r\n                      <td>\r\n                        <p *ngFor="let docAssociateList of efile?.docAssociateLists">\r\n                          <app-multi-file-view [Uid]="docAssociateList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n        </div>\r\n        \x3c!--e-office Documents end--\x3e\r\n\r\n        \x3c!-- Enquiry Section --\x3e\r\n        \x3c!--<div class="card shadow mb-4" *ngIf="enquiryModel.length > 0">\r\n        <div *ngIf="enquiryModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold">Enquiries & Response</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="enquiryModel.length > 0">\r\n          <div *ngFor="let ticketInEn of enquiryModel" class="card-body office-note-box popDis o-note">\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Response By: </label>\r\n            {{ticketInEn.userName}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Attachment:</label>\r\n            <div *ngIf="ticketInEn.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                No Attachment Available!\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{ticketInEn.remarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>--\x3e\r\n      \r\n      \x3c!-- Enquiry Section --\x3e\r\n      <div *ngIf="efileViewAllPopup">\r\n        <app-efileviewalldupli [wfoEfileid]="efileId" ></app-efileviewalldupli>\r\n      </div>\r\n      <div class="card shadow mb-4" *ngIf="enquiryModel.length > 0">\r\n        <div *ngIf="enquiryModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Enquiries & Response\r\n            <a class="" data-toggle="collapse" href="#collapseEnquiry" role="button" aria-expanded="false" aria-controls="collapseEnquiry">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="enquiryModel.length > 0">\r\n          <div *ngFor="let ticketInEn of enquiryModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(ticketInEn.deptName)}}">\r\n              <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply">\r\n                  {{ticketInEn.userName}}({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                \x3c!--<img src="assets/images/exclammation_mark1.png" id="curtain1">--\x3e\r\n              </div>\r\n              <ng-template #user_reply>\r\n                <div class="col-md-9">\r\n                  {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n              </ng-template>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{ticketInEn.remarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(ticketInEn.deptName)}}" id="collapseEnquiry">\r\n                <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply1">\r\n                  {{ticketInEn.userName}}({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <ng-template #user_reply1>\r\n                  <div class="col-md-9">\r\n                    {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                  </div>\r\n                </ng-template>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{ticketInEn.remarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="assignModel.length > 0">\r\n        <div *ngIf="assignModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold">Forwarded To</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="assignModel.length > 0">\r\n          <div *ngFor="let assignModelData of assignModel" class="card-body office-note-box popDis o-note">\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Department: </label>\r\n            {{assignModelData.ticketEnquiryTo}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Attachment:</label>\r\n            <div *ngIf="assignModelData.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                No Attachment Available!\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{assignModelData.remakrs}}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>--\x3e\r\n\r\n      \x3c!-- Forward Model --\x3e\r\n      <div class="card shadow mb-4" *ngIf="assignModel.length > 0">\r\n        <div *ngIf="assignModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Forwarded To\r\n            <a class="" data-toggle="collapse" href="#collapseForward" role="button" aria-expanded="false" aria-controls="collapseForward">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="assignModel.length > 0">\r\n          <div *ngFor="let assignModelData of assignModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}">\r\n              \r\n              <div class="col-md-9">\r\n                \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{assignModelData.remakrs}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}" id="collapseForward">\r\n                <div class="col-md-9">\r\n                  \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                  {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n\r\n                    <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{assignModelData.remakrs}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="closedModel.length > 0">\r\n        <div *ngIf="closedModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold" >Closed By</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="closedModel.length > 0">\r\n          <div *ngFor="let closedMo of closedModel" class="card-body office-note-box popDis o-note">\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Closed By: </label>\r\n            {{closedMo.userName}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Attachment:</label>\r\n            <div *ngIf="closedMo.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n              <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                No Attachment Available!\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{closedMo.remakrs}}</p>\r\n          </div>\r\n          \r\n          <div class="form-group col-md-12" *ngIf="closedMo?.internalRemarks">\r\n            <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n            <p>{{closedMo.internalRemarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>--\x3e\r\n\r\n      <div class="card shadow mb-4" *ngIf="closedModel.length > 0">\r\n        <div *ngIf="closedModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class" >Closed By\r\n            <a class="" data-toggle="collapse" href="#collapseClose" role="button" aria-expanded="false" aria-controls="collapseClose">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="closedModel.length > 0">\r\n          <div *ngFor="let closedMo of closedModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(closedMo?.deptName)}}">\r\n              <div class="col-md-9">\r\n                {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{closedMo.remakrs}}</p>\r\n              </div>\r\n              <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                <p>{{closedMo.internalRemarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(closedMo?.deptName)}}" id="collapseClose">\r\n                <div class="col-md-9">\r\n                  {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    \r\n                    <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{closedMo.remakrs}}</p>\r\n                </div>\r\n                <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                  <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                  <p>{{closedMo.internalRemarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- Feedback from Authority Section --\x3e\r\n      <div class="card shadow mb-4" *ngIf="currentTicketData.esclationStatus == \'YES\'">  \r\n        <div class="card-header">\r\n          <label class="control-label">User Feedback</label>\r\n        </div>\r\n        <div class="col-md-12">\r\n          <p>{{currentTicketData.feedbackRemark}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="openModel.length > 0">\r\n        <div *ngIf="openModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold" >Reopened For</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="openModel.length > 0">\r\n          <div *ngFor="let openMo of openModel" class="card-body office-note-box popDis o-note">\r\n           \r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Department: </label>\r\n            {{openMo.assignTo}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{openMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{openMo.remarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>        \r\n      </div>--\x3e\r\n      \r\n      \x3c!-- Only For Ticket Officer --\x3e\r\n      <div *ngIf="currentUserType==\'officer\'">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="forwardticket"\r\n                  (click)="ticketAction($event)"><b>Forward</b>\r\n              </label>\r\n            </div>\r\n            \x3c!--<div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && ticketClosedOption == true">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            \x3c!--<div class="form-check-inline" *ngIf="ticketOpenedOption == true && statusOf!=\'CLOSED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="openticket"\r\n                  (click)="ticketAction($event)"><b>Open Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            <div class="form-check-inline" *ngIf="(ticketUniqueNo == \'UNDER SCRUTINY\' || ticketUniqueNo == \'\') && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="rejectticket"\r\n                  (click)="ticketAction($event)"><b>Reject Support Request</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n\r\n        <div class="col-md-12 border d-none" *ngIf="ticketForwardArray.length > 0 && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n\r\n          <table class="table table-bordered table-striped mt-3">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assign To</th>\r\n              <th>Attachment Name</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of ticketForwardArray, let i = index">\r\n                <td>{{getDeptName(tval.ticketEnquiryTo)}}</td>\r\n                <td> {{tval.fileName}}</td>\r\n                <td>{{tval.remakrs}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteForwardTicketByIdId(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n\r\n        <form [formGroup]="forwardTicketForm" id="validateFoem" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border mt-3" *ngIf="forwardTicketFormIsActive">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3" *ngIf="ticketForwardArray.length<1">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold">Assign To<sup>*</sup></label>\r\n                <select class="form-control" formControlName="ticketEnquiryTo">\r\n                  <option value="">--Select--</option>\r\n                   \x3c!--<option value="TP" [disabled]="TP">TP</option>\r\n                  <option value="Legal" [disabled]="legal">Legal</option>\r\n                  <option value="Finance" [disabled]="finance">Finance</option>--\x3e\r\n                  <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                    <option value="{{d.userDept}}">{{d.userDeptKey}}</option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n\r\n              <div class="col-md-6">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketEnqFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketEnqFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 text-center d-none">\r\n                <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                  [disabled]="this.forwardTicketForm.invalid" (click)="addMore()">Add</button>\r\n              </div>\r\n            </div>\r\n              <div class="mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.forwardTicketForm.invalid"\r\n                  (click)="addMore(); submitTicketForward()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            \r\n          </div>\r\n        </form>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n          <form [formGroup]="closeTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Attachment</label>\r\n              <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n              <app-file-upload (myEvent)="setFile($event)"\r\n                [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n            </div>\r\n\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        \x3c!-- Open ticket again --\x3e\r\n        <div class="col-md-12 border" *ngIf="reOpenticketArray.length > 0">\r\n          <table class="table table-bordered table-striped">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assigned To</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of reOpenticketArray, let i = index">\r\n                <td>{{tval.assignTo}}</td>\r\n                <td>{{tval.remarks}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteOpenTicketById(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="openTicketFormIsActive">\r\n          <form [formGroup]="openTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktOpenId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Reassign To<sup>*</sup></label>\r\n              <select class="form-control" formControlName="assignTo">\r\n\r\n                <option value="">--Select--</option>\r\n                <ng-container *ngFor="let tl of this.ticketOpenedList">\r\n                  <option value="{{tl.tokey}}" [disabled] ="tl.enabled">{{tl.to}}</option>\r\n                </ng-container>\r\n              </select>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remarks"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12 text-center ">\r\n              <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                [disabled]="this.openTicketForm.invalid" (click)="addOpenTicketMore()">Add</button>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="reOpenticketArray.length <= 0" disabled (click)="submitTicketOpen()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        <div class="col-md-12 border" *ngIf="rejectTicketIsActive">\r\n          <form [formGroup]="rejectTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="ticketId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              Do you want to reject this Support Request?\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="rejectTicket()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TRO(Resolving Officer)  --\x3e\r\n      \r\n      \x3c!--<div *ngIf="(currentUserType==\'TP\' || currentUserType==\'Legal\' || currentUserType==\'Finance\') && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\')">--\x3e\r\n        <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks to Applicant<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TEO(Escalation Officer)  --\x3e\r\n\r\n      <div *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n              <div class="col-md-4" *ngIf="uploadTicketFile?.emailId!=null">\r\n                <label class="control-label font-weight-bold mb-1">Email Id </label>\r\n                <p>{{uploadTicketFile?.emailId}}</p>\r\n              </div>\r\n    \r\n              <div class="col-md-4" *ngIf="uploadTicketFile?.mobileNo!=null">\r\n                <label class="control-label font-weight-bold mb-1">Mobile No </label>\r\n                <p>{{uploadTicketFile?.mobileNo}}</p>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks to Applicant<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal show" id="reassign" *ngIf="forwardedListPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-small ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>Forwarded Status</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketForwardedListPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <table class="table table-bordered misDashTable text-center">\r\n          <thead>\r\n              <tr>\r\n                  <th>Dept</th>\r\n                  <th>Status</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr *ngFor="let fwdlist of ticketForwardedListArr">\r\n                  \x3c!--<td>{{fwdlist.ticketEnquiryTo}}</td>--\x3e\r\n                  <td>{{getDeptName(fwdlist.ticketEnquiryToDepName)}}</td>\r\n                  <td>{{fwdlist.status}}</td>\r\n              </tr>\r\n          </tbody>\r\n        </table>      \r\n      </div>\r\n    </div>\r\n  </div>\r\n </div> \r\n \r\n \r\n <div class="modal show" *ngIf="eFilePopup">\r\n  <div class="modal-dialog modal-lg modal-dialog-centered">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b> File Details With Notes</b></h3>\r\n        <button type="button" class="close" (click)="closeEFilePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n          <div class="card mb-2"  *ngIf="eOfficeFileType == \'efile\' && efilePopupLoading == false">\r\n                <div class="card-body ">\r\n            <div class="row">\r\n              <div class="col-md-6 mb-4">\r\n                  <label class="control-label font-weight-bold">File No</label>\r\n                <span>{{efileData.fileNo}}</span>\r\n              </div>\r\n              <div class="col-md-6 mb-4">\r\n                <label class="control-label font-weight-bold">Created On</label>\r\n                <span>{{efileData.createdOn | date : \'dd-MM-yyyy\'}}</span>\r\n              </div>\r\n              <div class="col-md-12 mb-4">\r\n                <label class="control-label font-weight-bold">Subject</label>  \r\n                <span>{{efileData.subject}}</span>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div> \r\n\r\n        <div class="card mb-2" *ngIf="eOfficeFileType == \'etapal\' && efilePopupLoading == false">\r\n            <div class="card-body ">\r\n          <div class="row">\r\n            <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Document Type</label>  \r\n                <span>{{eTapalData.docType}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received By</label>  \r\n              <span>{{eTapalData.receivedBy}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received Date</label>  \r\n              <span>{{eTapalData.createdOn | date : \'dd-MM-yyyy\'}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Select Addressee</label>  \r\n              <span>{{eTapalData.departmentName}}</span>\r\n            </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Keyword</label>  \r\n            <span>{{eTapalData.captionKey}}</span>\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">File Download</label>\r\n            <span *ngFor="let doclistFile of eTapalData?.docLists">\r\n              <span class=" btn-small mb-2 mr-2"> <app-multi-file-view [Uid]="doclistFile.docUID" ></app-multi-file-view></span>\r\n            </span>\r\n          </div>\r\n          <div class="col-md-12 mb-4">\r\n            <label class="control-label font-weight-bold">Subject</label>\r\n          <span>{{eTapalData.subject}}</span>\r\n          </div>\r\n          </div>\r\n        </div>\r\n    </div> \r\n    <div class=\'text-center\' *ngIf="efilePopupLoading">Loading ...</div>\r\n  </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n<div class="popup-overlay" *ngIf="ticketActionPopup"></div>\r\n<div class="popup-overlay" *ngIf="forwardedListPopup"></div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<div class="popup-overlay" *ngIf="eFilePopup"></div>'},HTpo:function(e,t,n){"use strict";n.r(t),t.default='<div class="d-flex justify-content-between align-items-center">\r\n    <h2>SUPPORT REQUEST ({{ticketParamDeptName}} - {{ticketParamCategoryLabel}})</h2>\r\n    <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n    </div>\r\n<div class="row">\r\n    <div class="col-md-12 ">\r\n        <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n        <div class="table-responsive col-md-12 ">\r\n            \x3c!-- <h2>SUPPORT REQUEST ({{ticketParamDeptName}} - {{ticketParamCategoryLabel}}) - ({{ticketListing.length}})</h2> --\x3e\r\n          \r\n            <table class="table table-bordered text-center tickettable bg-white">\r\n                <thead>\r\n                    <tr class="bg-light  text-size-small text-center">\r\n                        <th>S.No.</th>\r\n                        <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n                          <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n                          <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n                        </div>\r\n                      </th>\r\n                    </tr>\r\n                </thead>\r\n                \x3c!-- <thead>\r\n                    <tr>\r\n                    <th>S.No.</th>\r\n                    <th class="w-20">Support Request No.</th>\r\n                    <th class="w-5">Department</th>\r\n                    <th class="w-20">Query </th>\r\n                    <th class="w-20">Attachment</th>\r\n                    <th class="w-50"> Remarks</th>\r\n                    <th class="w-10">Created On</th>\r\n                    </tr>\r\n                </thead> --\x3e\r\n                <tbody *ngIf="filterDataArray?.length > 0; else _no_AllData1">\r\n                    <tr *ngFor="let data of filterDataArray | paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo };let i = index">\r\n                      <td class="tabel-text-right">{{((currentPageNo-1)*10)+(i+1) }} </td>\r\n                    <td>{{ data?.ticketNo }}</td>\r\n                    <td>{{getDeptName(data?.concernDeptName)}}</td>\r\n                    <td class="word-break">{{wordWrap(data?.query,40)}}</td>\r\n                    <td>\r\n                        <div *ngIf="data?.attachmentUId;then download_link else no_image_available"></div>\r\n                        <label class="control-label">\r\n                        <ng-template #download_link>\r\n                            <app-multi-file-view [Uid]="data?.attachmentUId" ></app-multi-file-view>\r\n                        </ng-template>\r\n                        <ng-template #no_image_available>\r\n                            --\r\n                        </ng-template>\r\n                        </label>\r\n                    </td>\r\n                    <td class="text-left">{{data.details}}</td>\r\n                    <td  class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n                    \x3c!--<td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus == \'YES\'; else status_0"> ESCALATED </td>\r\n                    <ng-template #status_0>\r\n                    <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus != \'YES\'; else status_1">\r\n                      OPEN</td>\r\n                      <ng-template #status_1>\r\n                        <td>{{data.status}}</td>\r\n                      </ng-template>\r\n                    </ng-template>--\x3e\r\n                    </tr>\r\n                </tbody>\r\n                <ng-template #_no_AllData1>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td colspan="7" class="red font-weight-bold text-center">No Records Found.</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </ng-template>\r\n            </table> \r\n            <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n                <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n              </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row">    \r\n    <div  class="col-md-12 text-center"> \r\n        <a href="#/mis/dashboard-complaint" title="Back"><button class="btn btn-primary"> Back</button></a></div>\r\n</div>'},HhXg:function(e,t,n){"use strict";n.r(t),t.default=".popDis {\n  border-radius: 0 25px 25px 0;\n}\n\n.box-shadow {\n  padding: 10px;\n  background: #fafafa;\n  margin-top: 10px;\n}\n\n.border-div {\n  border-top-style: solid !important;\n  border: 1px;\n  border-color: #C0C0C0;\n}\n\n.no-padding {\n  padding: 0px;\n}\n\n.leftight-padding {\n  padding: 7px 0px 0px 0px;\n}\n\n.collapse-class a {\n  background: orange !important;\n  padding: 0px 5px;\n  color: #ffffff;\n}\n\n.color-code2 {\n  background-color: #3847f32e;\n}\n\n.color-code1 {\n  background-color: #E5FCF0;\n}\n\n.escalaltion-img {\n  margin-left: 25px;\n}\n\n.misDashTable a {\n  font-size: 12px !important;\n}\n\n.e-office-div {\n  font-size: 14px !important;\n  font-weight: normal;\n}"},MjyU:function(e,t,n){"use strict";n.r(t),t.default=""},QSZ4:function(e,t,n){"use strict";n.r(t),t.default=".popDis {\n  border-radius: 0 25px 25px 0;\n}\n\n.box-shadow {\n  padding: 10px;\n  background: #fafafa;\n  margin-top: 10px;\n}\n\n.border-div {\n  border-top-style: solid !important;\n  border: 1px;\n  border-color: #C0C0C0;\n}\n\n.no-padding {\n  padding: 0px;\n}\n\n.leftight-padding {\n  padding: 7px 0px 0px 0px;\n}\n\n.collapse-class a {\n  background: orange !important;\n  padding: 0px 5px;\n  color: #ffffff;\n}\n\n.color-code2 {\n  background-color: #3847f32e;\n}\n\n.color-code1 {\n  background-color: #E5FCF0;\n}\n\n.escalaltion-img {\n  margin-left: 25px;\n}\n\n.misDashTable a {\n  font-size: 12px !important;\n}\n\n.e-office-div {\n  font-size: 14px !important;\n  font-weight: normal;\n}"},ROBH:function(e,t,n){"use strict";n.r(t);var r=n("mrSG"),a=n("8Y7J"),i=n("SVse"),l=n("iInd"),s=n("s7LF"),o=n("2Vo4"),c=n("rMJA"),d=n("FvaC"),p=n("EUZL"),u=function(){function e(t,n,r,a){_classCallCheck(this,e),this._apiURL=t,this._ticketService=n,this._router=r,this.datePipe=a,this.ticketListing=new Array,this.enquiryFormIsActive=!1,this.docId4=new o.a({}),this.inputJson=new o.a({}),this.ticketForwardArray=new Array,this.uploadedFilesInfo=new Array,this.enquiryModel=new Array,this.TP=!1,this.legal=!1,this.finance=!1,this.assignModel=new Array,this.closedModel=new Array,this.tickets=1,this.ticketOpenedList=new Array,this.reOpenticketArray=new Array,this.openModel=new Array,this.loader=!1,this.getAllDeptsSelectList=new Array,this.searchTicketDept="",this.searchTicketStatus="",this.ticketSearchListing=new Array,this.pendencyListArrTotal=new Array,this.rejectTicketIsActive=!1,this.efileViewAllPopup=!1,this.eOfficeFileType="",this.efilePopupLoading=!1,this.searchTicketQuery="",this.loadingSpinner=!1,this.tableJsonData=new o.a({}),this.paginationCount=10}return _createClass(e,[{key:"ngOnInit",value:function(){this.fileDonwloadPath=this._apiURL.fileDownloadAPI+"download/",this.uploadTicketFile={},this.uploadedFilesInfo=[];var e=sessionStorage.getItem("userType");sessionStorage.getItem("dept"),this.escalationOfficerArr=["TPTEO","FINANCETEO","LEGALTEO","COMPLIANCETEO","ADMINTEO","ITTEO","LEGALOTHTEO"],this.resolvingOfficerArr=["TPTRO","LEGALTRO","FINANCETRO","COMPLIANCETRO","ADMINTRO","ITTRO","LEGALOTHTRO"],this.currentUserType="TICKETOFFICER"==e?"officer":e,this.resolvingOfficerStatus=this.resolvingOfficerArr.includes(this.currentUserType),this.escalationOfficerStatus=this.escalationOfficerArr.includes(this.currentUserType),this.enquiryForm=new s.d({ticketEnquiryFile:new s.c(""),ticketEnquiryDescription:new s.c("",[s.h.required]),ticketFkId:new s.c("")}),this.forwardTicketForm=new s.d({ticketEnquiryTo:new s.c(null,[s.h.required]),ticketEnquiryFile:new s.c(""),ticketEnquiryDescription:new s.c("",[s.h.required]),ticketFkId:new s.c("")}),this.closeTicketForm=new s.d({attachmentId:new s.c(""),remakrs:new s.c("",[s.h.required]),tktCloseId:new s.c,internalRemarks:new s.c("",[s.h.required])}),this.openTicketForm=new s.d({assignTo:new s.c("",[s.h.required]),remarks:new s.c("",[s.h.required]),tktOpenId:new s.c}),this.rejectTicketForm=new s.d({ticketId:new s.c}),this.searchForm=new s.d({searchTicketNumber:new s.c(""),searchTicketDept:new s.c(""),searchTicketStatus:new s.c(""),searchTicketRaiseBy:new s.c(""),concernFromCreatedDate:new s.c(""),concernToCreatedDate:new s.c(""),disposedOnFromDate:new s.c(""),disposedOnToDate:new s.c(""),searchTicketQuery:new s.c("")}),this.getTicketListing(),this.getAllDeptsfunc(),this.getPendencyList(),this.resetForm()}},{key:"getAllDeptsfunc",value:function(){for(var e in this.getAllDeptsSelectList=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}],this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].optdisabled=!1;console.log(this.getAllDeptsSelectList)}},{key:"getPendencyList",value:function(){var e=this;this.loadingSpinner=!0,console.log("this.pendencyListArrTotal"),console.log(this.pendencyListArrTotal),this._ticketService.getPendencyList().subscribe((function(t){for(var n in e.loadingSpinner=!1,e.pendencyList=t.data,e.pendencyListArrTotal.total=e.pendencyListArrTotal.disposed=e.pendencyListArrTotal.enquiry=e.pendencyListArrTotal.less15=e.pendencyListArrTotal.between15to30=e.pendencyListArrTotal.greater30=0,e.pendencyList)e.pendencyListArrTotal.total+=Number(e.pendencyList[n].total),e.pendencyListArrTotal.disposed+=Number(e.pendencyList[n].disposed),e.pendencyListArrTotal.enquiry+=Number(e.pendencyList[n].enquiry),e.pendencyListArrTotal.less15+=Number(e.pendencyList[n].less15),e.pendencyListArrTotal.between15to30+=Number(e.pendencyList[n].between15to30),e.pendencyListArrTotal.greater30+=Number(e.pendencyList[n].greater30);e.pendencyListArrTotal.disposec_percent=(e.pendencyListArrTotal.disposed/e.pendencyListArrTotal.total*100).toFixed(2)}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}))}},{key:"pageChanged",value:function(e){this.config.currentPage=e}},{key:"openticketActionPopup",value:function(){this.ticketActionPopup=!0}},{key:"closeticketActionPopup",value:function(){this.ticketActionPopup=!1}},{key:"setFile",value:function(e){this.uploadTicketFile[e.fid]=e.docid;var t={docId:e.docid,fname:e.fName};this.uploadedFilesInfo.push(t)}},{key:"getTicketListing",value:function(){var e=this;this.loadingSpinner=!0,this.ticketListing=[],this.completeFlag="Loading ...",this._ticketService.getAllTickets("AllTicket").subscribe((function(t){e.loadingSpinner=!1,e.ticketListing=t.data,e.filterDataArray=e.ticketListing,e.dataArray=e.ticketListing,e.tableSortFilter(null,null,null,"default")}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}),(function(){e.loadingSpinner=!1,e.ticketListing.length<=0&&(e.completeFlag="No Record Found!")}))}},{key:"takeActionOnTicket",value:function(e){var t=this;this.loadingSpinner=!0,this.forWardClosedOption="",this.ticketClosedOption=!0,this.efileViewAllPopup=!1,this.ticketOpenedList=[],this.ticketForwardArray=[],this.reOpenticketArray=[],this.enquiryForm.reset(),this.forwardTicketForm.reset(),this.closeTicketForm.reset(),this.openTicketForm.reset(),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this._ticketService.getTicketById(e.ticketId).subscribe((function(n){t.loadingSpinner=!1,console.log("resultclick"),console.log(n),t.currentTicketData=n.data,t.currTicketId=n.data.ticketId,t.statusOf=n.data.status,t.isForwared=n.data.forwardStatus,t.esclationStatus=n.data.esclationStatus,t.ticketUniqueNo=n.data.ticketNo,t.enquiryFormIsActive=!1,t.forwardTicketFormIsActive=!1,t.closeTicketFormIsActive=!1,t.rejectTicketIsActive=!1,n.data.forwardUserList?n.data.forwardUserList.forEach((function(e){t.currentUserType==e.ticketEnquiryTo&&(t.forWardClosedOption=e.status),"YES"!=t.esclationStatus&&null==e.esclationStatus&&("CLOSED"!=e.status&&(t.ticketClosedOption=!1),"CLOSED"==e.status&&(t.ticketOpenedOption=!0,t.ticketOpenedList.push({tokey:e.ticketEnquiryTo,to:e.ticketEnquiryToDepName,enabled:""}))),"YES"==t.esclationStatus&&"YES"==e.esclationStatus&&("CLOSED"!=e.status&&(t.ticketClosedOption=!1),"CLOSED"==e.status&&(t.ticketOpenedOption=!0,t.ticketOpenedList.push({to:e.ticketEnquiryToDepName,enabled:""})))})):t.forWardClosedOption="OPEN",t.getSubmittedEnquiry(t.currTicketId),t.getForwardedList(t.currTicketId),t.getClosedList(t.currTicketId),t.openticketActionPopup(),console.log("efilerera"),t.getReraEfile(e.ticketId)}),(function(e){t.loadingSpinner=!1,t.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})})),this.getAllDeptsfunc()}},{key:"ticketAction",value:function(e){"enquiry"==e.target.value?(this.enquiryFormIsActive=!0,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"forwardticket"==e.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!0,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"closeticket"==e.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!0,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"openticket"==e.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"rejectticket"==e.target.value&&(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!0,this.ticketForwardArray=[],this.reOpenticketArray=[])}},{key:"addMore",value:function(){var e,t=this;e=this.forwardTicketForm.controls.ticketEnquiryFile.value?this.uploadedFilesInfo.find((function(e){return e.docId===t.forwardTicketForm.controls.ticketEnquiryFile.value})).fname:"";var n={ticketFrdFkId:this.forwardTicketForm.controls.ticketFkId.value,ticketEnquiryTo:this.forwardTicketForm.controls.ticketEnquiryTo.value,attachmentId:this.forwardTicketForm.controls.ticketEnquiryFile.value,remakrs:this.forwardTicketForm.controls.ticketEnquiryDescription.value,fileName:e};this.ticketForwardArray.push(n),this.ticketForwardArray&&this.ticketForwardArray.forEach((function(e){for(var n in t.getAllDeptsSelectList)t.getAllDeptsSelectList[n].userDept==e.ticketEnquiryTo&&(t.getAllDeptsSelectList[n].optdisabled=!0)})),this.removedKeyword=["ticketFkId"],this.resetterOfForm(this.forwardTicketForm.controls,this.removedKeyword,this.forwardTicketForm),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this.docId4.next({show:!1})}},{key:"addOpenTicketMore",value:function(){var e=this,t={ticketFkId:this.openTicketForm.controls.tktOpenId.value,assignTo:this.openTicketForm.controls.assignTo.value,remarks:this.openTicketForm.controls.remarks.value,status:"RE OPEN"};this.reOpenticketArray.push(t),this.reOpenticketArray&&this.reOpenticketArray.forEach((function(t){e.ticketOpenedList.forEach((function(n,r){t.assignTo==n.to&&(e.ticketOpenedList[r].enabled=!0)}))})),this.removedKeyword=["tktOpenId"],this.resetterOfForm(this.openTicketForm.controls,this.removedKeyword,this.openTicketForm),this.openTicketForm.controls.assignTo.setValue("")}},{key:"deleteForwardTicketByIdId",value:function(e){var t=this;if(this.ticketForwardArray.splice(e,1),this.ticketForwardArray.length>0){var n=function(e){t.ticketForwardArray.forEach((function(n){t.getAllDeptsSelectList[e].userDept==n.ticketEnquiryTo?t.getAllDeptsSelectList[e].optdisabled=!0:t.getAllDeptsSelectList[e].optdisabled=!1}))};for(var r in this.getAllDeptsSelectList)n(r)}else for(var a in this.getAllDeptsSelectList)this.getAllDeptsSelectList[a].optdisabled=!1}},{key:"deleteOpenTicketById",value:function(e){var t=this;this.reOpenticketArray.splice(e,1),this.ticketOpenedList&&this.ticketOpenedList.forEach((function(e,n){t.reOpenticketArray.length>0?t.reOpenticketArray.forEach((function(r){r.assignTo==e.to?t.ticketOpenedList[n].enabled=!0:t.ticketOpenedList[n].enabled=""})):t.ticketOpenedList[n].enabled=""}))}},{key:"submitTicketEnquiry",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0;var t={ticketFkId:this.enquiryForm.controls.ticketFkId.value,attachmentId:this.enquiryForm.controls.ticketEnquiryFile.value,remarks:this.enquiryForm.controls.ticketEnquiryDescription.value,enquiryFlag:"ENQUIRY"};this._ticketService.saveTicketEnquiry(t).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.enquiryForm.reset(),e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Enquiry has been raised successfully",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"submitTicketForward",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,this._ticketService.saveTicketForward(this.ticketForwardArray).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Support Request has been forwarded to the concern Department(s).",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"submitTicketClose",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,"officer"!=this.currentUserType&&(this.closeTicketForm.value.deptName=this.currentUserType),this._ticketService.closeTicket(this.closeTicketForm.value,this.currentUserType).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Support Request has been closed successfully.",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"getSubmittedEnquiry",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalEnquiryIdOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.enquiryModel=e.data:t.enquiryModel=[]}),(function(e){t.loadingSpinner=!1,t.enquiryModel=[]}))}},{key:"getForwardedList",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalForwardedOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.assignModel=e.data:t.assignModel=[]}),(function(e){t.loadingSpinner=!1,t.assignModel=[]}))}},{key:"getClosedList",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalClosedOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.closedModel=e.data:t.closedModel=[]}),(function(e){t.loadingSpinner=!1,t.closedModel=[]}))}},{key:"getOpenTicketList",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalOpenOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.openModel=e.data:t.openModel=[]}),(function(e){t.loadingSpinner=!1,t.openModel=[]}))}},{key:"resetterOfForm",value:function(e,t,n){Object.keys(e).forEach((function(e){t.includes(e)||n.controls[e].reset()}))}},{key:"submitTicketOpen",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,this._ticketService.openTicket(this.reOpenticketArray,this.currentUserType).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.reOpenticketArray=[],e.inputJson.next({popShow:!0,popMsg:"Support Request has been Opened successfully.",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"searchFormSubmit",value:function(){var e=this;this.loadingSpinner=!0,this.tickets=1,this.searchTicketNumber=this.searchForm.controls.searchTicketNumber.value,this.searchTicketDept=this.searchForm.controls.searchTicketDept.value,this.searchTicketStatus=this.searchForm.controls.searchTicketStatus.value,this.searchTicketRaiseBy=this.searchForm.controls.searchTicketRaiseBy.value,this.concernFromCreatedDate=this.searchForm.controls.concernFromCreatedDate.value,this.concernToCreatedDate=this.searchForm.controls.concernToCreatedDate.value,this.disposedOnFromDate=this.searchForm.controls.disposedOnFromDate.value,this.disposedOnToDate=this.searchForm.controls.disposedOnToDate.value,this.searchTicketQuery=this.searchForm.controls.searchTicketQuery.value,null==this.searchTicketNumber&&(this.searchTicketNumber=""),null==this.searchTicketDept&&(this.searchTicketDept=""),null==this.searchTicketStatus&&(this.searchTicketStatus=""),null==this.searchTicketRaiseBy&&(this.searchTicketRaiseBy=""),null==this.searchTicketQuery&&(this.searchTicketQuery=""),this.concernFromCreatedDate?this.concernFromCreatedDate=this.datePipe.transform(this.concernFromCreatedDate,"yyyy-MM-dd"):this.concernFromCreatedDate="",this.concernToCreatedDate?this.concernToCreatedDate=this.datePipe.transform(this.concernToCreatedDate,"yyyy-MM-dd"):this.concernToCreatedDate="",this.disposedOnFromDate?this.disposedOnFromDate=this.datePipe.transform(this.disposedOnFromDate,"yyyy-MM-dd"):this.disposedOnFromDate="",this.disposedOnToDate?this.disposedOnToDate=this.datePipe.transform(this.disposedOnToDate,"yyyy-MM-dd"):this.disposedOnToDate="",this.completeFlag="Loading ...",this.ticketListing=[],this._ticketService.getAllTickets(this.currentUserType).subscribe((function(t){if(e.loadingSpinner=!1,"officer"!=e.currentUserType?e.ticketListing=t.data.ticket:e.ticketListing=t.data,e.ticketSearchListing=[],""!=e.searchTicketNumber||""!=e.searchTicketDept||""!=e.searchTicketStatus||""!=e.searchTicketRaiseBy||""!=e.concernFromCreatedDate||""!=e.concernToCreatedDate||""!=e.disposedOnFromDate||""!=e.disposedOnToDate||""!=e.searchTicketQuery)for(var n in e.ticketListing){var r=[];if("OPEN"!=e.ticketListing[n].status&&"FORWARDED"!=e.ticketListing[n].status||"YES"!=e.ticketListing[n].esclationStatus||(e.ticketListing[n].status="ESCALATED"),"OPEN"!=e.ticketListing[n].status&&"FORWARDED"!=e.ticketListing[n].status||null!=e.ticketListing[n].esclationStatus||(e.ticketListing[n].status="OPEN"),e.searchTicketRaiseBy)if(null!=e.ticketListing[n].createdUserName&&""!=e.ticketListing[n].createdUserName){var a="\\b"+e.searchTicketRaiseBy.trim().toLowerCase()+"\\b";e.ticketListing[n].createdUserName.toLowerCase().match(new RegExp(a,"g"))?(console.log(e.ticketListing[n].createdUserName),r.push(!0)):r.push(!1)}else r.push(!1);e.searchTicketNumber&&(e.searchTicketNumber.trim()==e.ticketListing[n].ticketNo?r.push(!0):r.push(!1)),e.searchTicketDept&&(e.searchTicketDept.trim()==e.ticketListing[n].concernDeptName?r.push(!0):r.push(!1)),e.concernFromCreatedDate&&(e.concernFromCreatedDate.trim()<=e.datePipe.transform(e.ticketListing[n].createdOn,"yyyy-MM-dd")?r.push(!0):r.push(!1)),e.concernToCreatedDate&&(e.concernToCreatedDate.trim()>=e.datePipe.transform(e.ticketListing[n].createdOn,"yyyy-MM-dd")?r.push(!0):r.push(!1)),e.disposedOnFromDate&&(e.ticketListing[n].disposedOn&&e.disposedOnFromDate.trim()<=e.datePipe.transform(e.ticketListing[n].disposedOn,"yyyy-MM-dd")?r.push(!0):r.push(!1)),e.disposedOnToDate&&(e.ticketListing[n].disposedOn&&e.disposedOnToDate.trim()>=e.datePipe.transform(e.ticketListing[n].disposedOn,"yyyy-MM-dd")?r.push(!0):r.push(!1)),e.searchTicketQuery&&(e.searchTicketQuery.trim()==e.ticketListing[n].query_master?r.push(!0):r.push(!1)),e.searchTicketStatus&&(e.searchTicketStatus.trim()==e.ticketListing[n].status?r.push(!0):r.push(!1)),r.every((function(e){return 1==e}))&&e.ticketSearchListing.push(e.ticketListing[n])}else e.ticketSearchListing=e.ticketListing;e.ticketSearchListing.length<=0?(e.ticketListing=[],e.completeFlag="No Support Request Found."):e.ticketListing=e.ticketSearchListing,e.filterDataArray=e.ticketListing,e.dataArray=e.ticketListing,e.tableSortFilter(null,null,null,"default")}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}),(function(){e.ticketListing.length<=0&&(e.completeFlag="No Support Request Found.")}))}},{key:"resetForm",value:function(){this.searchForm.reset(),this.searchForm.markAsPristine(),this.searchForm.markAsUntouched(),this.getTicketListing()}},{key:"forwardedListFunc",value:function(e){this.forwardedListPopup=!0,this.ticketForwardedListArr=e}},{key:"closeticketForwardedListPopup",value:function(){this.ticketForwardedListArr=[],this.forwardedListPopup=!1}},{key:"rejectTicket",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,this._ticketService.rejectTicket(this.rejectTicketForm.value).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Support Request has been Rejected.",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"getDeptName",value:function(e){if(e){var t=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(var n in t)if(t[n].userDept==e)return t[n].userDeptKey;return""}}},{key:"colorCode",value:function(e){return e?"color-code2":"color-code1"}},{key:"pendencyTableFunc",value:function(e,t){console.log("inside list func"),sessionStorage.setItem("ticketParamDept",e),sessionStorage.setItem("ticketParamCategory",t),this._router.navigate(["ticket/ticket-pendency-list"])}},{key:"getReraEfile",value:function(e){var t=this;this.loadingSpinner=!0,this.efileList=[],this._ticketService.getReraEfile(e).subscribe((function(e){if(t.loadingSpinner=!1,console.log("eFile"),console.log(e),e.data.length>0)for(var n=0;n<e.data.length;n++)t.efileList.push({fileNo:e.data[n].efileTapalMasterModel.fileNo,subject:e.data[n].efileTapalMasterModel.subject,fileId:e.data[n].efileTapalMasterModel.id,etapalfileNo:e.data[n].detailModel.efileNo,receivedDate:e.data[n].detailModel.receivedDate,docLists:e.data[n].detailModel.docLists,outwordNo:e.data[n].associateModel.outwordNo,eTapalfileId:e.data[n].detailModel.id,docAssociateLists:e.data[n].associateModel.docAssociateLists})}),(function(e){t.loadingSpinner=!1}))}},{key:"takeActionOnEFileClick",value:function(e,t){var n=this;this.loadingSpinner=!0,this.efileData="",this.eTapalData="",this.eOfficeFileType=t,"efile"==t?(this.efileId=e,this.efileViewAllPopup=!0):"etapal"==t&&(this.efilePopupLoading=!0,this.efileViewAllPopup=!1,this._ticketService.getReraETapalNoData(e).subscribe((function(e){n.loadingSpinner=!1,n.eTapalData=e.data,console.log(e),console.log(t),n.efilePopupLoading=!1}),(function(e){n.loadingSpinner=!1,n.efilePopupLoading=!1})),this.openEFilePopup())}},{key:"openEFilePopup",value:function(){this.eFilePopup=!0}},{key:"closeEFilePopup",value:function(){this.eFilePopup=!1}},{key:"exportToExcel",value:function(){var e=p.utils.table_to_sheet(this.table_listing.nativeElement),t=p.utils.book_new();p.utils.book_append_sheet(t,e,"Support Requests List"),p.writeFile(t,"Support_Requests_list.xlsx")}},{key:"tableSortFilter",value:function(e,t,n,r){this.sortData="default"==r?{sortType:"DESC",key:"createdOn",typ:"date",sort:r}:{sortType:e,key:t,typ:n,sort:r};var a={headers:[{key:"ticketNo",label:"Support Request No.",type:"string"},{key:"createdUserName",label:"Applicant Name",type:"string"},{key:"concernDeptName",label:"Concern",type:"string"},{key:"query",label:"Query",type:"string"},{key:"details",label:"Remarks",type:"string"},{key:"lattitude",label:"Source",type:"string"},{key:"createdOn",label:"Created On",type:"date"},{key:"disposedOn",label:"Disposed On",type:"date"}],actualArray:this.ticketListing,sortData:this.sortData};this.tableHeader=a.headers,this.tableJsonData.next({exportJson:a}),console.log(a)}},{key:"filterValue",value:function(e){console.log(e),this.filterDataArray=e.filterArray,this.sortData=e.sort,this.getPageNo(1)}},{key:"getPageNo",value:function(e){var t=this;this.currentPageNo=e,this.filterDataArray.length>9&&(this.paginationCount=10*e),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout((function(){document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(t.paginationCount=t.filterDataArray.length)}),100)}}]),e}();u.ctorParameters=function(){return[{type:d.a},{type:c.a},{type:l.e},{type:i.e}]},r.b([Object(a.kb)("table_listing",{static:!1})],u.prototype,"table_listing",void 0),u=r.b([Object(a.n)({selector:"app-ticket-listing",template:r.c(n("5B9t")).default,styles:[r.c(n("QSZ4")).default]})],u);var m=function(){function e(t,n,r){_classCallCheck(this,e),this._apiURL=t,this._ticketService=n,this._router=r,this.ticketListing=new Array,this.enquiryFormIsActive=!1,this.docId4=new o.a({}),this.inputJson=new o.a({}),this.ticketForwardArray=new Array,this.uploadedFilesInfo=new Array,this.enquiryModel=new Array,this.TP=!1,this.legal=!1,this.finance=!1,this.efileViewAllPopup=!1,this.assignModel=new Array,this.closedModel=new Array,this.tickets=1,this.ticketOpenedList=new Array,this.reOpenticketArray=new Array,this.openModel=new Array,this.loader=!1,this.getAllDeptsSelectList=new Array,this.searchTicketDept="",this.searchTicketStatus="",this.ticketSearchListing=new Array,this.pendencyListArrTotal=new Array,this.rejectTicketIsActive=!1,this.eOfficeFileType="",this.efilePopupLoading=!1,this.searchTicketQuery="",this.loadingSpinner=!1,this.tableJsonData=new o.a({}),this.paginationCount=10}return _createClass(e,[{key:"ngOnInit",value:function(){this.fileDonwloadPath=this._apiURL.fileDownloadAPI+"download/",this.uploadTicketFile={},this.uploadedFilesInfo=[];var e=sessionStorage.getItem("userType");sessionStorage.getItem("dept"),this.escalationOfficerArr=["TPTEO","FINANCETEO","LEGALTEO","COMPLIANCETEO","ADMINTEO","ITTEO","LEGALOTHTEO"],this.resolvingOfficerArr=["TPTRO","LEGALTRO","FINANCETRO","COMPLIANCETRO","ADMINTRO","ITTRO","LEGALOTHTRO"],this.currentUserType="TICKETOFFICER"==e?"officer":e,this.resolvingOfficerStatus=this.resolvingOfficerArr.includes(this.currentUserType),this.escalationOfficerStatus=this.escalationOfficerArr.includes(this.currentUserType),this.enquiryForm=new s.d({ticketEnquiryFile:new s.c(""),ticketEnquiryDescription:new s.c("",[s.h.required]),ticketFkId:new s.c("")}),this.forwardTicketForm=new s.d({ticketEnquiryTo:new s.c(null,[s.h.required]),ticketEnquiryFile:new s.c(""),ticketEnquiryDescription:new s.c("",[s.h.required]),ticketFkId:new s.c("")}),this.closeTicketForm=new s.d({attachmentId:new s.c(""),remakrs:new s.c("",[s.h.required]),tktCloseId:new s.c,internalRemarks:new s.c("",[s.h.required])}),this.openTicketForm=new s.d({assignTo:new s.c("",[s.h.required]),remarks:new s.c("",[s.h.required]),tktOpenId:new s.c}),this.rejectTicketForm=new s.d({ticketId:new s.c}),this.searchForm=new s.d({searchTicketNumber:new s.c(""),searchTicketDept:new s.c(""),searchTicketStatus:new s.c(""),searchTicketRaiseBy:new s.c(""),searchTicketQuery:new s.c("")}),this.getTicketListing(),this.getAllDeptsfunc(),this.getPendencyList(),this.resetForm()}},{key:"getAllDeptsfunc",value:function(){for(var e in this.getAllDeptsSelectList=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}],this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].optdisabled=!1;console.log(this.getAllDeptsSelectList)}},{key:"getPendencyList",value:function(){var e=this;this.loadingSpinner=!0,console.log("this.pendencyListArrTotal"),console.log(this.pendencyListArrTotal),this._ticketService.getPendencyList().subscribe((function(t){for(var n in e.loadingSpinner=!1,e.pendencyList=t.data,e.pendencyListArrTotal.total=e.pendencyListArrTotal.disposed=e.pendencyListArrTotal.enquiry=e.pendencyListArrTotal.less15=e.pendencyListArrTotal.between15to30=e.pendencyListArrTotal.greater30=0,e.pendencyList)e.pendencyListArrTotal.total+=Number(e.pendencyList[n].total),e.pendencyListArrTotal.disposed+=Number(e.pendencyList[n].disposed),e.pendencyListArrTotal.enquiry+=Number(e.pendencyList[n].enquiry),e.pendencyListArrTotal.less15+=Number(e.pendencyList[n].less15),e.pendencyListArrTotal.between15to30+=Number(e.pendencyList[n].between15to30),e.pendencyListArrTotal.greater30+=Number(e.pendencyList[n].greater30);e.pendencyListArrTotal.disposec_percent=(e.pendencyListArrTotal.disposed/e.pendencyListArrTotal.total*100).toFixed(2)}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}))}},{key:"pageChanged",value:function(e){this.config.currentPage=e}},{key:"openticketActionPopup",value:function(){this.ticketActionPopup=!0}},{key:"closeticketActionPopup",value:function(){this.ticketActionPopup=!1}},{key:"setFile",value:function(e){this.uploadTicketFile[e.fid]=e.docid;var t={docId:e.docid,fname:e.fName};this.uploadedFilesInfo.push(t)}},{key:"getTicketListing",value:function(){var e=this;this.loadingSpinner=!0,this.ticketListing=[],this.completeFlag="Loading ...",this._ticketService.getTicketsTaskList(this.currentUserType).subscribe((function(t){e.loadingSpinner=!1,e.ticketListing=t.data.ticket,e.filterDataArray=e.ticketListing,e.dataArray=e.ticketListing,e.tableSortFilter(null,null,null,"default")}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}),(function(){e.loadingSpinner=!1,e.ticketListing.length<=0&&(e.completeFlag="No Record Found!")}))}},{key:"takeActionOnTicket",value:function(e){var t=this;this.loadingSpinner=!0,this.forWardClosedOption="",this.ticketClosedOption=!0,this.efileViewAllPopup=!1,this.ticketOpenedList=[],this.ticketForwardArray=[],this.reOpenticketArray=[],this.enquiryForm.reset(),this.forwardTicketForm.reset(),this.closeTicketForm.reset(),this.openTicketForm.reset(),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this._ticketService.getTicketById(e.ticketId).subscribe((function(n){t.loadingSpinner=!1,console.log("resultclick"),console.log(n),t.currentTicketData=n.data,t.currTicketId=n.data.ticketId,t.statusOf=n.data.status,t.isForwared=n.data.forwardStatus,t.esclationStatus=n.data.esclationStatus,t.ticketUniqueNo=n.data.ticketNo,t.enquiryFormIsActive=!1,t.forwardTicketFormIsActive=!1,t.closeTicketFormIsActive=!1,t.rejectTicketIsActive=!1,n.data.forwardUserList?n.data.forwardUserList.forEach((function(e){t.currentUserType==e.ticketEnquiryTo&&(t.forWardClosedOption=e.status),"YES"!=t.esclationStatus&&null==e.esclationStatus&&("CLOSED"!=e.status&&(t.ticketClosedOption=!1),"CLOSED"==e.status&&(t.ticketOpenedOption=!0,t.ticketOpenedList.push({tokey:e.ticketEnquiryTo,to:e.ticketEnquiryToDepName,enabled:""}))),"YES"==t.esclationStatus&&"YES"==e.esclationStatus&&("CLOSED"!=e.status&&(t.ticketClosedOption=!1),"CLOSED"==e.status&&(t.ticketOpenedOption=!0,t.ticketOpenedList.push({to:e.ticketEnquiryToDepName,enabled:""})))})):t.forWardClosedOption="OPEN",t.getSubmittedEnquiry(t.currTicketId),t.getForwardedList(t.currTicketId),t.getClosedList(t.currTicketId),t.openticketActionPopup(),t.getReraEfile(e.ticketId)}),(function(e){t.loadingSpinner=!1,t.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})})),this.getAllDeptsfunc()}},{key:"ticketAction",value:function(e){"enquiry"==e.target.value?(this.enquiryFormIsActive=!0,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"forwardticket"==e.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!0,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"closeticket"==e.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!0,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"openticket"==e.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"rejectticket"==e.target.value&&(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!0,this.ticketForwardArray=[],this.reOpenticketArray=[])}},{key:"addMore",value:function(){var e,t=this;e=this.forwardTicketForm.controls.ticketEnquiryFile.value?this.uploadedFilesInfo.find((function(e){return e.docId===t.forwardTicketForm.controls.ticketEnquiryFile.value})).fname:"";var n={ticketFrdFkId:this.forwardTicketForm.controls.ticketFkId.value,ticketEnquiryTo:this.forwardTicketForm.controls.ticketEnquiryTo.value,attachmentId:this.forwardTicketForm.controls.ticketEnquiryFile.value,remakrs:this.forwardTicketForm.controls.ticketEnquiryDescription.value,fileName:e};this.ticketForwardArray.push(n),this.ticketForwardArray&&this.ticketForwardArray.forEach((function(e){for(var n in t.getAllDeptsSelectList)t.getAllDeptsSelectList[n].userDept==e.ticketEnquiryTo&&(t.getAllDeptsSelectList[n].optdisabled=!0)})),this.removedKeyword=["ticketFkId"],this.resetterOfForm(this.forwardTicketForm.controls,this.removedKeyword,this.forwardTicketForm),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this.docId4.next({show:!1})}},{key:"addOpenTicketMore",value:function(){var e=this,t={ticketFkId:this.openTicketForm.controls.tktOpenId.value,assignTo:this.openTicketForm.controls.assignTo.value,remarks:this.openTicketForm.controls.remarks.value,status:"RE OPEN"};this.reOpenticketArray.push(t),this.reOpenticketArray&&this.reOpenticketArray.forEach((function(t){e.ticketOpenedList.forEach((function(n,r){t.assignTo==n.to&&(e.ticketOpenedList[r].enabled=!0)}))})),this.removedKeyword=["tktOpenId"],this.resetterOfForm(this.openTicketForm.controls,this.removedKeyword,this.openTicketForm),this.openTicketForm.controls.assignTo.setValue("")}},{key:"deleteForwardTicketByIdId",value:function(e){var t=this;if(this.ticketForwardArray.splice(e,1),this.ticketForwardArray.length>0){var n=function(e){t.ticketForwardArray.forEach((function(n){t.getAllDeptsSelectList[e].userDept==n.ticketEnquiryTo?t.getAllDeptsSelectList[e].optdisabled=!0:t.getAllDeptsSelectList[e].optdisabled=!1}))};for(var r in this.getAllDeptsSelectList)n(r)}else for(var a in this.getAllDeptsSelectList)this.getAllDeptsSelectList[a].optdisabled=!1}},{key:"deleteOpenTicketById",value:function(e){var t=this;this.reOpenticketArray.splice(e,1),this.ticketOpenedList&&this.ticketOpenedList.forEach((function(e,n){t.reOpenticketArray.length>0?t.reOpenticketArray.forEach((function(r){r.assignTo==e.to?t.ticketOpenedList[n].enabled=!0:t.ticketOpenedList[n].enabled=""})):t.ticketOpenedList[n].enabled=""}))}},{key:"submitTicketEnquiry",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0;var t={ticketFkId:this.enquiryForm.controls.ticketFkId.value,attachmentId:this.enquiryForm.controls.ticketEnquiryFile.value,remarks:this.enquiryForm.controls.ticketEnquiryDescription.value,enquiryFlag:"ENQUIRY"};this._ticketService.saveTicketEnquiry(t).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.enquiryForm.reset(),e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Enquiry has been raised successfully",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"submitTicketForward",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,this._ticketService.saveTicketForward(this.ticketForwardArray).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Support Request has been forwarded to the concern Department(s).",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"submitTicketClose",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,"officer"!=this.currentUserType&&(this.closeTicketForm.value.deptName=this.currentUserType),this._ticketService.closeTicket(this.closeTicketForm.value,this.currentUserType).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Support Request has been closed successfully.",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"getSubmittedEnquiry",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalEnquiryIdOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.enquiryModel=e.data:t.enquiryModel=[]}),(function(e){t.loadingSpinner=!1,t.enquiryModel=[]}))}},{key:"getForwardedList",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalForwardedOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.assignModel=e.data:t.assignModel=[]}),(function(e){t.loadingSpinner=!1,t.assignModel=[]}))}},{key:"getClosedList",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalClosedOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.closedModel=e.data:t.closedModel=[]}),(function(e){t.loadingSpinner=!1,t.closedModel=[]}))}},{key:"getOpenTicketList",value:function(e){var t=this;this.loadingSpinner=!0,this._ticketService.getTotalOpenOfData(e).subscribe((function(e){t.loadingSpinner=!1,e.data?t.openModel=e.data:t.openModel=[]}),(function(e){t.loadingSpinner=!1,t.openModel=[]}))}},{key:"resetterOfForm",value:function(e,t,n){Object.keys(e).forEach((function(e){t.includes(e)||n.controls[e].reset()}))}},{key:"submitTicketOpen",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,this._ticketService.openTicket(this.reOpenticketArray,this.currentUserType).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.reOpenticketArray=[],e.inputJson.next({popShow:!0,popMsg:"Support Request has been Opened successfully.",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"searchFormSubmit",value:function(){var e=this;this.loadingSpinner=!0,this.tickets=1,this.searchTicketNumber=this.searchForm.controls.searchTicketNumber.value,this.searchTicketDept=this.searchForm.controls.searchTicketDept.value,this.searchTicketStatus=this.searchForm.controls.searchTicketStatus.value,this.searchTicketRaiseBy=this.searchForm.controls.searchTicketRaiseBy.value,this.searchTicketQuery=this.searchForm.controls.searchTicketQuery.value,null==this.searchTicketNumber&&(this.searchTicketNumber=""),null==this.searchTicketDept&&(this.searchTicketDept=""),null==this.searchTicketStatus&&(this.searchTicketStatus=""),null==this.searchTicketRaiseBy&&(this.searchTicketRaiseBy=""),null==this.searchTicketQuery&&(this.searchTicketQuery=""),this.completeFlag="Loading ...",this.ticketListing=[],this._ticketService.getTicketsTaskList(this.currentUserType).subscribe((function(t){if(e.loadingSpinner=!1,e.ticketListing=t.data.ticket,console.log("this.ticketListing"),console.log(e.ticketListing),e.ticketSearchListing=[],""!=e.searchTicketNumber||""!=e.searchTicketDept||""!=e.searchTicketStatus||""!=e.searchTicketRaiseBy||""!=e.searchTicketQuery)for(var n in e.ticketListing){var r=[];if("OPEN"!=e.ticketListing[n].status&&"FORWARDED"!=e.ticketListing[n].status||"YES"!=e.ticketListing[n].esclationStatus||(e.ticketListing[n].status="ESCALATED"),"OPEN"!=e.ticketListing[n].status&&"FORWARDED"!=e.ticketListing[n].status||null!=e.ticketListing[n].esclationStatus||(e.ticketListing[n].status="OPEN"),e.searchTicketRaiseBy)if(null!=e.ticketListing[n].createdUserName&&""!=e.ticketListing[n].createdUserName){var a="\\b"+e.searchTicketRaiseBy.trim().toLowerCase()+"\\b";e.ticketListing[n].createdUserName.toLowerCase().match(new RegExp(a,"g"))?(console.log(e.ticketListing[n].createdUserName),r.push(!0)):r.push(!1)}else r.push(!1);e.searchTicketNumber&&(e.searchTicketNumber.trim()==e.ticketListing[n].ticketNo?r.push(!0):r.push(!1)),e.searchTicketDept&&(e.searchTicketDept.trim()==e.ticketListing[n].concernDeptName?r.push(!0):r.push(!1)),e.searchTicketQuery&&(e.searchTicketQuery.trim()==e.ticketListing[n].query_master?r.push(!0):r.push(!1)),e.searchTicketStatus&&(e.searchTicketStatus.trim()==e.ticketListing[n].status?r.push(!0):r.push(!1)),r.every((function(e){return 1==e}))&&e.ticketSearchListing.push(e.ticketListing[n])}else e.ticketSearchListing=e.ticketListing;console.log("this.ticketSearchListing"),console.log(e.ticketSearchListing),e.ticketSearchListing.length<=0?(e.ticketListing=[],e.completeFlag="No Support Request Found."):e.ticketListing=e.ticketSearchListing,e.filterDataArray=e.ticketListing,e.dataArray=e.ticketListing,e.tableSortFilter(null,null,null,"default")}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}),(function(){e.loadingSpinner=!1,e.ticketListing.length<=0&&(e.completeFlag="No Support Request Found.")}))}},{key:"resetForm",value:function(){this.searchForm.reset(),this.searchForm.markAsPristine(),this.searchForm.markAsUntouched(),this.getTicketListing()}},{key:"forwardedListFunc",value:function(e){this.forwardedListPopup=!0,this.ticketForwardedListArr=e}},{key:"closeticketForwardedListPopup",value:function(){this.ticketForwardedListArr=[],this.forwardedListPopup=!1}},{key:"rejectTicket",value:function(){var e=this;this.loadingSpinner=!0,this.loader=!0,this._ticketService.rejectTicket(this.rejectTicketForm.value).subscribe((function(t){e.loadingSpinner=!1,e.loader=!1,e.getTicketListing(),e.closeticketActionPopup(),e.inputJson.next({popShow:!0,popMsg:"Support Request has been Rejected.",popClass:"alert alert-success",popRoute:""})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1}))}},{key:"getDeptName",value:function(e){if(e){var t=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(var n in t)if(t[n].userDept==e)return t[n].userDeptKey;return""}}},{key:"colorCode",value:function(e){return e?"color-code2":"color-code1"}},{key:"pendencyTableFunc",value:function(e,t){console.log("inside list func"),sessionStorage.setItem("ticketParamDept",e),sessionStorage.setItem("ticketParamCategory",t),this._router.navigate(["ticket/ticket-pendency-list"])}},{key:"getReraEfile",value:function(e){var t=this;this.loadingSpinner=!0,this.efileList=[],this._ticketService.getReraEfile(e).subscribe((function(e){if(t.loadingSpinner=!1,console.log("eFile"),console.log(e),e.data.length>0)for(var n=0;n<e.data.length;n++)t.efileList.push({fileNo:e.data[n].efileTapalMasterModel.fileNo,subject:e.data[n].efileTapalMasterModel.subject,fileId:e.data[n].detailModel.id,etapalfileNo:e.data[n].detailModel.efileNo,receivedDate:e.data[n].detailModel.receivedDate,docLists:e.data[n].detailModel.docLists,outwordNo:e.data[n].associateModel.outwordNo,eTapalfileId:e.data[n].detailModel.id,docAssociateLists:e.data[n].associateModel.docAssociateLists})}),(function(e){t.loadingSpinner=!1}))}},{key:"takeActionOnEFileClick",value:function(e,t){var n=this;this.loadingSpinner=!0,this.efileData="",this.eTapalData="",this.eOfficeFileType=t,"efile"==t?(this.efileId=e,this.efileViewAllPopup=!0):"etapal"==t&&(this.efilePopupLoading=!0,this.efileViewAllPopup=!1,this._ticketService.getReraETapalNoData(e).subscribe((function(e){n.loadingSpinner=!1,n.eTapalData=e.data,console.log(e),console.log(t),n.efilePopupLoading=!1}),(function(e){n.loadingSpinner=!1,n.efilePopupLoading=!1})),this.openEFilePopup())}},{key:"openEFilePopup",value:function(){this.eFilePopup=!0}},{key:"closeEFilePopup",value:function(){this.eFilePopup=!1}},{key:"exportToExcel",value:function(){var e=p.utils.table_to_sheet(this.table_listing.nativeElement),t=p.utils.book_new();p.utils.book_append_sheet(t,e,"Support Requests Task List"),p.writeFile(t,"Support_Requests_task_list.xlsx")}},{key:"tableSortFilter",value:function(e,t,n,r){this.sortData="default"==r?{sortType:"DESC",key:"createdOn",typ:"date",sort:r}:{sortType:e,key:t,typ:n,sort:r};var a={headers:[{key:"ticketNo",label:"Support Request No.",type:"string"},{key:"createdUserName",label:"Applicant Name",type:"string"},{key:"concernDeptName",label:"Concern",type:"string"},{key:"query",label:"Query",type:"string"},{key:"details",label:"Remarks",type:"string"},{key:"lattitude",label:"Source",type:"string"},{key:"createdOn",label:"Created On",type:"date"}],actualArray:this.ticketListing,sortData:this.sortData};this.tableHeader=a.headers,this.tableJsonData.next({exportJson:a}),console.log(a)}},{key:"filterValue",value:function(e){console.log(e),this.filterDataArray=e.filterArray,this.sortData=e.sort,this.getPageNo(1)}},{key:"getPageNo",value:function(e){var t=this;this.currentPageNo=e,this.filterDataArray.length>9&&(this.paginationCount=10*e),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout((function(){document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(t.paginationCount=t.filterDataArray.length)}),100)}}]),e}();m.ctorParameters=function(){return[{type:d.a},{type:c.a},{type:l.e}]},r.b([Object(a.kb)("table_listing",{static:!1})],m.prototype,"table_listing",void 0),m=r.b([Object(a.n)({selector:"app-ticket-tasklist",template:r.c(n("FYaX")).default,styles:[r.c(n("HhXg")).default]})],m);var g=function(){function e(t){var n=this;_classCallCheck(this,e),this._ticketService=t,this.loader=!1,this.ticketListing=[],this.tableJsonData=new o.a({}),this.paginationCount=10,this.wordWrap=function(e,t){for(var r="\n",a="";e.length>t;){for(var i=!1,l=t-1;l>=0;l--)if(n.testWhite(e.charAt(l))){a+=[e.slice(0,l),r].join(""),e=e.slice(l+1),i=!0;break}i||(a+=[e.slice(0,t),r].join(""),e=e.slice(t))}return a+e}}return _createClass(e,[{key:"ngOnInit",value:function(){this.ticketParamDept=sessionStorage.getItem("ticketParamDept"),this.ticketParamCategory=sessionStorage.getItem("ticketParamCategory"),this.ticketParamCategoryLabel=sessionStorage.getItem("ticketParamCategoryLabel"),this.ticketParamCategoryIfDept=sessionStorage.getItem("ticketParamCategoryIfDept"),"TCO"==this.ticketParamDept?this.ticketParamDeptName="Ticket Controlling Officer":1==this.ticketParamCategoryIfDept?this.ticketParamDeptName=this.getDeptName(this.ticketParamDept):this.ticketParamDeptName=this.ticketParamDept,this.pendencyList()}},{key:"pendencyList",value:function(){var e=this;console.log("a"+this.ticketParamDept),console.log("b"+this.ticketParamCategory),this.loader=!0,this._ticketService.getPendencyListing(this.ticketParamDept,this.ticketParamCategory).subscribe((function(t){e.ticketListing=t.data,e.filterDataArray=t.data,e.tableSortFilter(null,null,null,"default"),console.log(t),e.loader=!1}),(function(t){e.loader=!1}))}},{key:"getDeptName",value:function(e){if("TOTAL"==e)return e;if(e){var t=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(var n in t)if(t[n].userDept==e)return t[n].userDeptKey;return""}}},{key:"testWhite",value:function(e){return new RegExp(/^\s$/).test(e.charAt(0))}},{key:"tableSortFilter",value:function(e,t,n,r){this.sortData="default"==r?{sortType:"DESC",key:"createdOn",typ:"date",sort:r}:{sortType:e,key:t,typ:n,sort:r};var a={headers:[{key:"ticketNo",label:"Support Request No.",type:"string"},{key:"concernDeptName",label:"Department",type:"string"},{key:"query",label:"Query",type:"string"},{key:"attachmentUId",label:"Attachment",type:"string"},{key:"details",label:"Response to Applicant",type:"string"},{key:"createdOn",label:"Created On",type:"date"}],actualArray:this.ticketListing,sortData:this.sortData};this.tableHeader=a.headers,this.tableJsonData.next({exportJson:a}),console.log(a)}},{key:"filterValue",value:function(e){console.log(e),this.filterDataArray=e.filterArray,this.sortData=e.sort,this.getPageNo(1)}},{key:"getPageNo",value:function(e){var t=this;this.currentPageNo=e,this.filterDataArray.length>9&&(this.paginationCount=10*e),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout((function(){document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(t.paginationCount=t.filterDataArray.length)}),100)}}]),e}();g.ctorParameters=function(){return[{type:c.a}]},g=r.b([Object(a.n)({selector:"app-ticket-pendency-list",template:r.c(n("HTpo")).default,styles:[r.c(n("wVAR")).default]})],g);var h=function(){function e(t){_classCallCheck(this,e),this._ticketService=t,this.docId4=new o.a({}),this.inputJson=new o.a({}),this.ticketPopup=!1,this.test=!0,this.queryDesc="",this.loader=!1,this.getName="",this.getEmail=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.concern="TP",this.userDetails="Update "+sessionStorage.getItem("titcketType")+" Details",this.createTicketForm=new s.d({createTicketConcern:new s.c("",[s.h.required]),queryDesc:new s.c("",[s.h.required]),createTicketQuery:new s.c("",[s.h.required]),createTicketFile:new s.c(""),createTicketDetails:new s.c(null,[s.h.required])}),this.uploadTicketFile={},this.fileId={},this.getAllDeptsfunc(),this.getName=sessionStorage.getItem("ProName"),this.getEmail=sessionStorage.getItem("proEmail")}},{key:"getAllDeptsfunc",value:function(){for(var e in this.getAllDeptsSelectList=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}],this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].optdisabled=!1;console.log(this.getAllDeptsSelectList)}},{key:"setFile",value:function(e){this.uploadTicketFile[e.fid]=e.docid}},{key:"submitTicket",value:function(){var e=this;console.log("check"),this.loadingSpinner=!0,this.loader=!0;var t={attachmentId:this.createTicketForm.controls.createTicketFile.value,concernDeptName:this.createTicketForm.controls.createTicketConcern.value,details:this.createTicketForm.controls.createTicketDetails.value,query:this.createTicketForm.controls.queryDesc.value,query_master:this.createTicketForm.controls.createTicketQuery.value,status:"OPEN",createdUserName:sessionStorage.getItem("ProName"),emailId:sessionStorage.getItem("proEmail"),mobileNo:sessionStorage.getItem("proMobile")};this.test=!1,this.createTicketForm.reset(),this._ticketService.saveUserTicket(t).subscribe((function(t){console.log("form submitted"),console.log(t),e.test=!0,e.loadingSpinner=!1,e.loader=!1,e.uploadTicketFile=[],e.uploadTicketFile.aadharId=null,e.inputJson.next({popShow:!0,popMsg:"Support Request Generated Successfully",popClass:"alert alert-success",popRoute:"home"})}),(function(t){e.loadingSpinner=!1,e.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),e.loader=!1})),console.log(t)}},{key:"setNameOfQuery",value:function(e){this.queryName=e.target.options[e.target.selectedIndex].text}}]),e}();h.ctorParameters=function(){return[{type:c.a}]},h=r.b([Object(a.n)({selector:"app-user-create-ticket",template:r.c(n("1MdG")).default,styles:[r.c(n("MjyU")).default]})],h);var f=function(){function e(t){var n=this;_classCallCheck(this,e),this._ticket=t,this.pageTitle="",this.paginationCount=0,this.filterDataArray=[],this.tableHeader=[],this.tableJsonData=new o.a({}),this.currentPageNo=1,this.loadingSpinner=!1,this.loadingMessage="Loading..",this.ticketOperation=function(e,t){console.log("dept",e),console.log("dept",t),n.loadingSpinner=!0,n._ticket.getTicketPendencyList(e,t).subscribe((function(e){n.loadingMessage="No record found.",n.loadingSpinner=!1,console.error("ticket response",e),"200"==e.status?(n.filterDataArray=e.data,n.totalList=e.data,n.tableSortFilter(null,null,null,"default")):n.loadingMessage="No record found."}),(function(e){n.loadingMessage="No record found.",n.loadingSpinner=!1,console.error("error in the ticket",e)}))},this.checkRemark=function(e){return null!=e&&e.split(" ").length>=10}}return _createClass(e,[{key:"ngOnInit",value:function(){this.pageTitle=sessionStorage.getItem("pageTitle");var e,t;e=sessionStorage.getItem("deptarmentForTicket"),t=sessionStorage.getItem("filterDateValidation"),this.ticketOperation(e,t)}},{key:"tableSortFilter",value:function(e,t,n,r){var a;this.sortData="default"==r?{sortType:"DESC",key:"startDate",typ:"date",sort:r}:{sortType:e,key:t,typ:n,sort:r},a={headers:[{key:"dept",label:"Deptartment",type:"string"},{key:"concernDept",label:"Concern Deptartment",type:"string"},{key:"supportNo",label:"Support No",type:"date"},{key:"query",label:"Query",type:"string"},{key:"description",label:"Ticket Description",type:"string"},{key:"assignedTo",label:"Assigned To",type:"string"},{key:"userType",label:"User Type",type:"string"},{key:"mobileNo",label:"Mobile Number",type:"string"},{key:"emailId",label:"Email ID",type:"string"},{key:"remarks",label:"Remarks",type:"string"},{key:"createdOn",label:"Created On",type:"date"}],actualArray:this.totalList,sortData:this.sortData},this.tableHeader=a.headers,this.tableJsonData.next({exportJson:a}),console.log(a)}},{key:"filterValue",value:function(e){console.log(e),this.filterDataArray=e.filterArray,this.sortData=e.sort,this.getPageNo(1)}},{key:"getPageNo",value:function(e){var t=this;this.currentPageNo=e,this.filterDataArray.length>9&&(this.paginationCount=10*e),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout((function(){document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(t.paginationCount=t.filterDataArray.length)}),100)}}]),e}();f.ctorParameters=function(){return[{type:c.a}]};var b=[{path:"ticket-listing",component:u},{path:"ticket-tasklist",component:m},{path:"ticket-pendency-list",component:g},{path:"user-create-ticket",component:h},{path:"executive-summary-tickets",component:f=r.b([Object(a.n)({selector:"app-ticket-listing-executive",template:r.c(n("Eh9e")).default,styles:[r.c(n("Ciua")).default]})],f)}],v=function e(){_classCallCheck(this,e)};v=r.b([Object(a.J)({imports:[l.f.forChild(b)],exports:[l.f]})],v);var k=n("ybvR"),y=n("xkgV"),T=n("4nBV"),w=n("5c4+"),D=n("spJD"),I=n("kdZ/"),F=n("UPf0"),A=n("L7/k");n.d(t,"TicketModule",(function(){return E}));var E=function e(){_classCallCheck(this,e)};E=r.b([Object(a.J)({declarations:[u,m,g,h,f],imports:[i.b,v,s.e,s.g,k.a,y.a,D.a,T.a,w.a,F.a,I.a,A.a],providers:[i.e],exports:[]})],E)},wVAR:function(e,t,n){"use strict";n.r(t),t.default=".table-bordered.tickettable td span {\n  font-weight: 400 !important;\n}\n\n.table-bordered.tickettable td a:hover {\n  color: #ec7b0d;\n  text-decoration: underline !important;\n}\n\n.table-bordered.tickettable th, .table-bordered.tickettable td {\n  padding: 5px !important;\n  font-size: 14px !important;\n}\n\n.table-bordered.tickettable.mainDash td {\n  font-size: 14px !important;\n}\n\n.table-bordered.tickettable td {\n  font-size: 12px !important;\n}"}}]);
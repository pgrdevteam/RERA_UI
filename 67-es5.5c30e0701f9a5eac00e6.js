function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"6Y1g":function(t,e,n){"use strict";n.r(e),e.default='\r\n<form [formGroup]="searchFilter" class="row mb-3" *ngIf="hideFilter">\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Project Type</strong></label>\r\n      <select class="form-control" #prj formControlName="projectType">\r\n          <option value="null">--Select Project Type--</option>\r\n          <option value="Residential/Group Housing">Residential</option>\r\n          <option value="Commercial">Commercial</option>\r\n          <option value="Mixed Development">Mixed</option>\r\n          <option value="Plotted Development">Plotted</option>\r\n      </select>\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n    <label><strong>Project Name</strong></label>\r\n    <input type="text" class="form-control"   formControlName="projectName">\r\n</div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>District</strong></label>\r\n      <select class="form-control"  formControlName="districtCode">\r\n          <option value="null">--Select District--</option>\r\n          <option *ngFor="let d of gjDistrict" value="{{d?.districtCode}}">{{d?.districtName}}</option>\r\n      </select>\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Pin Code</strong></label>\r\n      <input type="number" formControlName="pinCode"  onKeyPress="if(this.value.length==6) return false;" class="form-control">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Min Area</strong></label>\r\n      <input type="number"  formControlName="minArea" class="form-control">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Max Area</strong></label>\r\n      <input type="number"  formControlName="maxArea" class="form-control">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Min Cost</strong></label>\r\n      <input type="number" class="form-control"  formControlName="minCost">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Max Cost</strong></label>\r\n      <input type="number" class="form-control"   formControlName="maxCost">\r\n  </div>\r\n  <div class="col-md-12 text-center">\r\n      <input type="button" class="btn btn-primary mt20" value="Filter" (click)="filterMap()">\r\n      <input type="button" class="btn btn-primary mt20" value="Reset" (click)="resetMap()">\r\n  </div>\r\n</form>\r\n\r\n<div class="text-right mb-4"><input type="button" class="btn btn-primary" value="View Project" (click)="openProject()"></div>\r\n<div id="map"></div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n<app-validation-message [message]="inputJson"></app-validation-message>'},CKLL:function(t,e,n){"use strict";n.r(e);var a=n("mrSG"),r=n("8Y7J"),o=n("SVse"),l=n("iInd"),i=n("s7LF"),s=n("2Vo4"),c=n("ywUv"),p=n("+EOf"),d=function(){function t(e,n){_classCallCheck(this,t),this._router=e,this._mapSerice=n,this.mapJson={},this.inputJson=new s.a({}),this.getMapCord=new Array,this.allprjdata={projectType:""},this.prjDtl=new Array,this.gMapLatLng=new Array,this.gjDistrict=[],this._dlatlng=new Array,this.loadingSpinner=!1,this.hideFilter=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._dlatlng[0]={zoom:9,center:{lat:22.730248792401763,lng:72.502915578125},mapTypeId:"terrain"},this._dlatlng.AHME={zoom:11,center:{lat:23.0313804,lng:72.6054446},mapTypeId:"terrain"},this._dlatlng.ANAN={zoom:14,center:{lat:22.5516034,lng:72.932202},mapTypeId:"terrain"},this._dlatlng.AMRE={zoom:12,center:{lat:21.6020661,lng:71.2031971},mapTypeId:"terrain"},this._dlatlng.ARAV={zoom:11,center:{lat:23.5862756,lng:73.2633217},mapTypeId:"terrain"},this._dlatlng.BANA={zoom:11,center:{lat:24.3417121,lng:71.6783641},mapTypeId:"terrain"},this._dlatlng.BHAR={zoom:14,center:{lat:21.7352931,lng:72.9898103},mapTypeId:"terrain"},this._dlatlng.BHAV={zoom:13,center:{lat:21.7639097,lng:72.1198864},mapTypeId:"terrain"},this._dlatlng.BOT={zoom:15,center:{lat:22.1738298,lng:71.6552954},mapTypeId:"terrain"},this._dlatlng.CUDE={zoom:15,center:{lat:22.3072606,lng:74.0053544},mapTypeId:"terrain"},this._dlatlng.DAHO={zoom:14,center:{lat:22.8493569,lng:74.2326651},mapTypeId:"terrain"},this._dlatlng.DANG={zoom:11,center:{lat:20.8206175,lng:73.5912704},mapTypeId:"terrain"},this._dlatlng.DEDW={zoom:11,center:{lat:22.1250525,lng:69.3233773},mapTypeId:"terrain"},this._dlatlng.GANDHI={zoom:13,center:{lat:23.2191955,lng:72.6146458},mapTypeId:"terrain"},this._dlatlng.GISO={zoom:11,center:{lat:20.9907994,lng:70.5868247},mapTypeId:"terrain"},this._dlatlng.JAMN={zoom:13,center:{lat:22.4745533,lng:70.0185848},mapTypeId:"terrain"},this._dlatlng.JUNA={zoom:14,center:{lat:21.5250025,lng:70.4418982},mapTypeId:"terrain"},this._dlatlng.KHED={zoom:16,center:{lat:22.7501971,lng:72.6823239},mapTypeId:"terrain"},this._dlatlng.KUTC={zoom:9,center:{lat:23.591376,lng:69.9961433},mapTypeId:"terrain"},this._dlatlng.MAHI={zoom:11,center:{lat:23.1940685,lng:73.6654984},mapTypeId:"terrain"},this._dlatlng.MEHS={zoom:11,center:{lat:23.6007618,lng:72.3854672},mapTypeId:"terrain"},this._dlatlng.MORB={zoom:11,center:{lat:23.1854542,lng:73.6430741},mapTypeId:"terrain"},this._dlatlng.NARM={zoom:11,center:{lat:21.7806528,lng:73.6665998},mapTypeId:"terrain"},this._dlatlng.NAVS={zoom:14,center:{lat:20.9432782,lng:72.9436175},mapTypeId:"terrain"},this._dlatlng.PANC={zoom:10,center:{lat:22.6994321,lng:73.6615487},mapTypeId:"terrain"},this._dlatlng.PATA={zoom:14,center:{lat:23.847591,lng:72.1282474},mapTypeId:"terrain"},this._dlatlng.PORB={zoom:14,center:{lat:21.6396455,lng:69.6356923},mapTypeId:"terrain"},this._dlatlng.RAJK={zoom:12,center:{lat:22.2710891,lng:70.8109934},mapTypeId:"terrain"},this._dlatlng.SABK={zoom:10,center:{lat:23.8012317,lng:73.1185678},mapTypeId:"terrain"},this._dlatlng.SURA={zoom:12,center:{lat:21.1650657,lng:72.8473456},mapTypeId:"terrain"},this._dlatlng.SURN={zoom:14,center:{lat:22.7226677,lng:71.6481115},mapTypeId:"terrain"},this._dlatlng.TAPI={zoom:10,center:{lat:21.1847708,lng:73.7717281},mapTypeId:"terrain"},this._dlatlng.VADO={zoom:12,center:{lat:22.3212485,lng:73.1830295},mapTypeId:"terrain"},this._dlatlng.VALS={zoom:14,center:{lat:20.6063387,lng:72.929391},mapTypeId:"terrain"},this.searchFilter=new i.d({projectType:new i.c("null"),districtCode:new i.c("null"),pinCode:new i.c(null),minArea:new i.c(null),maxArea:new i.c(null),minCost:new i.c(null),maxCost:new i.c(null),projectName:new i.c(null)}),sessionStorage.removeItem("openMapProject"),null!=this.mapJson.subscribe?this.mapJson.subscribe((function(e){console.log(e),t.allprjdata=e,t.filterData=e,t.hideFilter=!1,c.a.load().then((function(){t.showProjectOnMap(t._dlatlng[0])}))})):(this.getDistrictMaster(),this.getMapCordinates())}},{key:"getMapCordinates",value:function(){var t=this;this.loadingSpinner=!0,this._mapSerice.getMapCordinatesService().subscribe((function(e){console.log(e),t.loadingSpinner=!1,t.allprjdata=e.data,t.filterData=e.data,c.a.load().then((function(){t.showProjectOnMap(t._dlatlng[0])}))}),(function(t){console.log(t)}))}},{key:"testfunction",value:function(t){console.log("Test function "+t)}},{key:"callingFun",value:function(t){this.testfunction(t)}},{key:"showProjectOnMap",value:function(t){var e=this;this.loadMap(t),this.allprjdata.forEach((function(t){var n=new Array;t.coordinates.forEach((function(t){n.push({lat:parseFloat(t.lat),lng:parseFloat(t.lang)})}));var a="<b> ";a+="<br>Project Name: "+t.projectName,a+="<br>Project Type:"+t.projectType,a+="<br>Promoter Name:"+t.promotorName+" ",a+="<br>Project Cost:"+t.projectCost+" </b>",e.showPolygon(n,a,t.projectName,t.projectId,e.callingFun)}))}},{key:"loadMap",value:function(t){console.log(t.center.lat),console.log(t.center.lng),console.log(t.zoom),this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:t.center.lat,lng:t.center.lng},zoom:t.zoom})}},{key:"showPolygon",value:function(t,e,n,a,r){var o=new google.maps.Polygon({paths:t,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:3,fillColor:"#FF0000",fillOpacity:.35,contents:a,callbk:r,_ths:this});o.setMap(this.map),new google.maps.Marker({position:t[0],map:this.map,title:n}),o.addListener("click",this.showProjTagOnMap)}},{key:"callbk",value:function(t,e){var n=this;console.log("  bbb   "+t.contents),this._mapSerice.getProjectService(t.contents).subscribe((function(a){console.log(a);var r="<div><strong>Project Name:</strong> "+a.data.projectname+"<br><strong>Reg No.:</strong> "+a.data.regno+"<br><strong>Promoter Name:</strong> "+a.data.promoter+"<br><strong>Project Address:</strong> "+a.data.siteaddr+"<br><strong>Project Type:</strong> "+a.data.details+"<br><strong>Project Blocks:</strong> "+a.data.blocks+"<br><strong>Project Cost:</strong> "+a.data.cost+"<br><strong>Project Date:</strong> "+a.data.dates+"<br><strong>Units:</strong> "+a.data.units;sessionStorage.setItem("publicProjectRegId",t.contents),n.viewProject=!0;var o=new google.maps.InfoWindow;o.setContent(r),o.setPosition(e),o.open(t.map)}),(function(t){console.log(t)}))}},{key:"showProjTagOnMap",value:function(t){console.log(this.latLngs,Object.keys(this.latLngs)[0]);var e=Object.keys(this.latLngs)[0],n=this.latLngs[e][0][e][0];console.log(n),this._ths.callbk(this,n)}},{key:"getDistrictMaster",value:function(){var t=this;this._mapSerice.getDistrictMasterService("GJ").subscribe((function(e){console.log(e),t.gjDistrict=e}),(function(t){console.log(t)}))}},{key:"filterMap",value:function(){var t=this,e=this.searchFilter.controls.projectType.value,n=this.searchFilter.controls.districtCode.value,a=this.searchFilter.controls.pinCode.value,r=this.searchFilter.controls.minArea.value,o=this.searchFilter.controls.maxArea.value,l=this.searchFilter.controls.minCost.value,i=this.searchFilter.controls.maxCost.value,s=this.searchFilter.controls.projectName.value;console.log(this.filterData),console.log(this.allprjdata);var p={};for(var d in p={projectType:e,districtCode:n,pinCode:a},console.log(p),p)null!=p[d]&&""!=p[d]&&"null"!=p[d]&&null!=p[d]||delete p[d];console.log(p),this.allprjdata=this.filterData.filter((function(t){for(var e in p)if(t[e]!=p[e])return!1;return!0})),console.log(this.filterData),"null"!=n&&null!=n||(n=0),r>0&&o>0?this.allprjdata=this.allprjdata.filter((function(t){return parseInt(t.minArea)>=r&&parseInt(t.maxArea)<=o})):r>0?this.allprjdata=this.allprjdata.filter((function(t){return parseInt(t.minArea)>=r})):o>0&&(this.allprjdata=this.allprjdata.filter((function(t){return parseInt(t.maxArea)<=o}))),l>0&&i>0?this.allprjdata=this.allprjdata.filter((function(t){return parseInt(t.minCost)>=l&&parseInt(t.maxCost)<=i})):l>0?this.allprjdata=this.allprjdata.filter((function(t){return parseInt(t.minCost)>=l})):i>0&&(this.allprjdata=this.allprjdata.filter((function(t){return parseInt(t.maxCost)<=i}))),s&&(this.allprjdata=this.allprjdata.filter((function(t){return t.projectName==s}))),console.log(this.allprjdata),this.allprjdata.length<1&&this.inputJson.next({popShow:!0,popMsg:"No result found",popClass:"alert alert-danger",popRoute:""}),c.a.load().then((function(){t.showProjectOnMap(t._dlatlng[n])}))}},{key:"resetMap",value:function(){var t=this;this.searchFilter.reset(),this.allprjdata=this.filterData,c.a.load().then((function(){t.showProjectOnMap(t._dlatlng[0])}))}},{key:"openProject",value:function(){sessionStorage.getItem("publicProjectRegId")?this._router.navigate(["project-preview"]):this.inputJson.next({popShow:!0,popMsg:"Please click on project polygon",popClass:"alert alert-danger",popRoute:""})}}]),t}();d.ctorParameters=function(){return[{type:l.e},{type:p.a}]},a.b([Object(r.E)()],d.prototype,"mapJson",void 0);var m=[{path:"public-page-map",component:d=a.b([Object(r.n)({selector:"app-public-page-map",template:a.c(n("6Y1g")).default,styles:[a.c(n("Rvku")).default]})],d)}],g=function t(){_classCallCheck(this,t)};g=a.b([Object(r.J)({imports:[l.f.forChild(m)],exports:[l.f]})],g);var u=n("UPf0"),h=n("4nBV");n.d(e,"PublicPageMapModule",(function(){return f}));var f=function t(){_classCallCheck(this,t)};f=a.b([Object(r.J)({declarations:[d],imports:[o.b,g,u.a,i.g,h.a]})],f)},Rvku:function(t,e,n){"use strict";n.r(e),e.default=""}}]);
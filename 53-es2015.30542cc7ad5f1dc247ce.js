(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{"1MdG":function(t,e,n){"use strict";n.r(e),e.default='\r\n<div class="row mt-4 mb-8">\r\n    <div class="container-fluid">\r\n        <div class="card ">\r\n            <div class="card-header"><b>Create Support Request</b></div>\r\n                <form [formGroup]="createTicketForm">\r\n                    <div class="card-body">\r\n                        <div class="row">\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Select Concerned Department<sup>*</sup></label>\r\n                            \x3c!-- <select  class="form-control" formControlName="createTicketConcern">\r\n                                <option value=""> --Select-- </option>\r\n                                <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                                  <option value="{{d.userDept}}" [disabled]="d.optdisabled">{{d.userDeptKey}}</option>\r\n                                </ng-container>\r\n                            </select> --\x3e\r\n                            <input type="text" class="form-control" [(ngModel)]="concern" readonly formControlName="createTicketConcern">\r\n                        </div>\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Select Request Type<sup>*</sup></label>\r\n\r\n                            <input type="hidden" formControlName="queryDesc" [(ngModel)]="userDetails">\r\n              \r\n                              \x3c!-- <select class="form-control" formControlName="createTicketQuery" (change)="setNameOfQuery($event)">\r\n                              <option value=\'\'> --Select-- </option>\r\n                              <option value=\'reratrib\'>Real Estate Regulatory Authority and Appellate Tribunal</option>\r\n                              <option value=\'projectreg\'>Real Estate Projects Registration</option>\r\n                              <option value="refund">Refund Request</option>\r\n                              <option value=\'agentreg\'> Real Estate Agents Registration</option>\r\n                              <option value=\'filingcomp\'>Filing of complaints</option>\r\n                              <option value=\'financedicipline\'>Financial Discipline</option>\r\n                              <option value=""></option>\r\n                              </select> --\x3e\r\n                              <input type="text" class="form-control" [(ngModel)]="userDetails" readonly formControlName="createTicketQuery">     \r\n                        </div>\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Attachment</label>\r\n                            <input type="hidden" [(ngModel)]="uploadTicketFile.aadharId" formControlName="createTicketFile" />\r\n                            <app-file-upload (myEvent)="setFile($event)" *ngIf="test"\r\n                                [parm]="{apiType:\'NEW\', fileId:\'aadharId\',docId:docId4,staticDocId:\'docId4\',show:false,fileType:[\'pdf\']}"></app-file-upload>\r\n                        </div>\r\n                    </div>\r\n                        <div class="row mt-4">\r\n                        <div class="col-md-4">\r\n                            <label class="control-label font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                            <textarea rows="3" cols="1" class="form-control" formControlName="createTicketDetails"></textarea>\r\n                        </div>\r\n                        </div>\r\n                        <div class="row mt-4">\r\n                        <div class="col-md-4">\r\n                            <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="!this.createTicketForm.valid" disabled (click)="submitTicket()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                        </div>\r\n                    </div>\r\n  \r\n                    </div>\r\n                </form>\r\n         </div>\r\n      </div>\r\n</div>   \r\n\r\n  <app-validation-message [message]="inputJson"></app-validation-message>\r\n\r\n  <app-loader *ngIf="loadingSpinner"></app-loader>'},"5B9t":function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n  <div class="container-fluid">\r\n    <div class="col-md-12 text-center mb-2">\r\n      <h2 class="text-dark mt-4">Support Request/ Report</h2>\r\n    </div>\r\n    <form [formGroup]="searchForm" (ngSubmit)="searchFormSubmit()">\r\n\r\n      <div class="mb-4 mt-5 col-md-12">\r\n        <div class="col-md-12">\r\n              <div><div>\r\n              <div class="col-md-12">\r\n                 \r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Support Request No. </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketNumber">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Applicant Name </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketRaiseBy">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern From Created Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="concernFromCreatedDate" [(ngModel)]="concernFromCreatedDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern To Created Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="concernToCreatedDate" [(ngModel)]="concernToCreatedDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Disposed On From Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="disposedOnFromDate" [(ngModel)]="disposedOnFromDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Disposed On To Date</label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="date" formControlName="disposedOnToDate" [(ngModel)]="disposedOnToDate">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <select class="form-control" formControlName="searchTicketDept" [(ngModel)]="searchTicketDept">\r\n                      <option value="">--Select--</option>\r\n                      <option *ngFor="let d of getAllDeptsSelectList, let i = index" [value]="d.userDept">\r\n                        {{d.userDeptKey}}\r\n                      </option>\r\n                    </select> \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Query</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketQuery" [(ngModel)]="searchTicketQuery">\r\n                    <option value="">--Select--</option>\r\n                    <option value=\'reratrib\'>Real Estate Regulatory Authority and Appellate Tribunal</option>\r\n                    <option value=\'projectreg\'>Real Estate Projects Registration</option>\r\n                    <option value=\'agentreg\'> Real Estate Agents Registration</option>\r\n                    <option value=\'filingcomp\'>Filing of complaints</option>\r\n                    <option value=\'financedicipline\'>Financial Discipline</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Status</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketStatus" [(ngModel)]="searchTicketStatus">\r\n                    <option value="">--Select--</option>\r\n                    <option value="OPEN">Open</option>\r\n                    <option value="ENQUIRY">Enquiry</option>\r\n                    \x3c!--<option value="FORWARDED">Forwarded</option>--\x3e\r\n                    <option value="CLOSED">Closed</option>\r\n                    <option value="ESCALATED">Escalated</option>\r\n                    <option value="REJECTED">Rejected</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n                <div class="form-group col-md-12 text-center">\r\n                  <button type="submit" class="btn btn-primary btn-small mt-5" [disabled]="!this.searchForm.valid">Search</button>\r\n                  <button type="reset" class="btn btn-primary btn-small mt-5" (click)=\'resetForm()\'>Reset</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n     </form>\r\n\r\n    <div class="col-md-12">\r\n      <div>\r\n        <div class="col-md-12 mb-4">\r\n          <div class="card ">\r\n            \r\n      <div class="card-header d-flex justify-content-between align-items-center">\r\n        <h2><b>Support Request/ Report</b></h2>\r\n\r\n        <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n        </div>\r\n            \x3c!-- <div class="card-header"><b>Support Request/ Report</b>\r\n              <b> <span class="pull-right"> <button (click)="exportToExcel()" class="text-right mb-2 btn btn-success">Export To Excel</button></span></b>\r\n            </div> --\x3e\r\n            <div class="card-body ">\r\n              <div class="row ">\r\n                <div class="col-md-12 ">\r\n                  <div class="table-responsive col-md-12 ">\r\n\r\n                    <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n                    <table #table_listing class="table table-bordered text-center  bg-white">\r\n                                         \r\n    <thead>\r\n      <tr class="bg-light  text-size-small text-center">\r\n          <th>Sr.No.</th>\r\n          <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n          </div>\r\n        </th>  \r\n        \r\n        <th>Attachment</th>\r\n         <th class="w-50"> Forwarded Status</th>\r\n        <th> Status</th>\r\n        <th class="w-7">Action</th>\r\n      </tr>\r\n  </thead>\r\n   \r\n                      <tbody  *ngIf="filterDataArray?.length > 0; else noTicketFound">\r\n                        \x3c!--<tr *ngFor="let data of ticketListing | paginate: { id: \'foo3\', itemsPerPage: \'20\', currentPage: tickets }">--\x3e\r\n                        <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }; let ic = index">\r\n                    <td class="tabel-text-right">{{((currentPageNo-1)*10)+(ic+1) }} </td>\r\n                    \x3c!-- <td>{{ i + 1 }}</td> --\x3e\r\n                          <td>{{ data?.ticketNo }}</td>\r\n                          <td>{{ data?.createdUserName }}</td>\r\n                          \x3c!--<td>{{data?.concernDeptName}}</td>--\x3e\r\n                          <td>{{getDeptName(data?.concernDeptName)}}</td>\r\n                          <td>{{data?.query}}</td>\r\n                          <td class="text-left">{{data.details}}</td>\r\n                          <td>\r\n                            <span *ngIf="(data.lattitude != null || data.longitude != null); else source_div">Mobile App</span>\r\n                            <ng-template #source_div>Web</ng-template>\r\n                            </td>\r\n                          <td class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n                          <td class="text-nowrap" *ngIf="data.disposedOn;else disposediv">{{data.disposedOn | date : \'dd-MM-yyyy\'}}</td>\r\n                          <ng-template #disposediv><td>--</td></ng-template>\r\n                          \r\n                          <td>\r\n                            <div *ngIf="data?.attachmentUId;then download_link else no_image_available"></div>\r\n                            <label class="control-label">\r\n                              <ng-template #download_link>\r\n                                \x3c!--<a href="{{ fileDonwloadPath }}{{ data?.attachmentUId }}" class="text-danger"> <i\r\n                                    class="icon icon-download"></i> Download</a>--\x3e\r\n                                <app-multi-file-view [Uid]="data?.attachmentUId" ></app-multi-file-view>\r\n                              </ng-template>\r\n                              <ng-template #no_image_available>\r\n                                \x3c!--No Attachment Available!--\x3e\r\n                                --\r\n                              </ng-template>\r\n                            </label>\r\n                          </td>\r\n                          <td class="text-center">\r\n                            \x3c!--<ng-container *ngFor="let fwdlist of data.forwardUserList">\r\n                              To: {{fwdlist.ticketEnquiryTo}}, Status: {{fwdlist.status}} <br>\r\n                            </ng-container>--\x3e\r\n                            <a *ngIf="data.forwardUserList.length > 0;else noForward" href= \'javascript:void(0)\' (click) =\'forwardedListFunc(data.forwardUserList)\'>View</a>\r\n                            <ng-template #noForward>--</ng-template>\r\n                            \r\n                          </td>\r\n                          \x3c!--<td *ngIf="data.status == \'FORWARDED\'; else status">--\x3e\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus == \'YES\'; else status_0"> ESCALATED </td>\r\n                            <ng-template #status_0>\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus != \'YES\'; else status_1">\r\n                              OPEN</td>\r\n                              <ng-template #status_1>\r\n                                <td>{{data.status}}</td>\r\n                              </ng-template>\r\n                            </ng-template>\r\n\r\n                          <td class="pt-4">\r\n                            <button class="btn btn-small bg-success text-white" (click)="takeActionOnTicket(data)"\r\n                              title="Ticket Action"><i class="icon-export"></i></button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                      <ng-template #noTicketFound>\r\n                        <tbody>\r\n                          <tr>\r\n                            <td colspan="14">\r\n                              <div *ngIf="completeFlag == \'Loading ...\'">{{completeFlag}}</div>\r\n                              <div *ngIf="completeFlag != \'Loading ...\'" class="error">{{completeFlag}}</div>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </ng-template>\r\n\r\n                    </table>\r\n                    <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n                      <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n                    </div>\r\n                    \x3c!--<div class="col-md-12 text-right">\r\n                      <pagination-controls  id="foo3" (pageChange)="tickets = $event"></pagination-controls>\r\n                    </div>--\x3e\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="modal show" id="reassign" *ngIf="ticketActionPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-lg ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>View Support Request</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketActionPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <div class="col-md-12 pt-2 pb-2 bg-light mb-4 border">\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Support Request No</label>\r\n            {{currentTicketData?.ticketNo}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created On</label>\r\n            {{currentTicketData?.createdOn | date : \'dd-MM-yyyy\'}}\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created By</label>\r\n            {{currentTicketData?.createdUserName}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Concern</label>\r\n            {{getDeptName(currentTicketData?.concernDeptName)}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Query</label>\r\n            {{currentTicketData.query}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Attachment</label>\r\n\r\n            <div *ngIf="currentTicketData?.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="currentTicketData.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                \x3c!--No Attachment Available!--\x3e\r\n                --\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="col-md-4">\r\n            <label class="control-label font-weight-bold mb-1">Remarks</label>\r\n            <p>{{currentTicketData?.details}}</p>\r\n          </div>\r\n          <div class="col-md-4" *ngIf="currentTicketData?.emailId!=null">\r\n            <label class="control-label font-weight-bold mb-1">Email Id </label>\r\n            <p>{{currentTicketData?.emailId}}</p>\r\n          </div>\r\n\r\n          <div class="col-md-4" *ngIf="currentTicketData?.mobileNo!=null">\r\n            <label class="control-label font-weight-bold mb-1">Mobile No </label>\r\n            <p>{{currentTicketData?.mobileNo}}</p>\r\n          </div>\r\n        </div>\r\n\r\n        \x3c!--e-office Documents start--\x3e\r\n        <div class="card shadow mb-4" *ngIf="efileList.length > 0">\r\n          <div class="card-header">\r\n            <label class="control-label font-weight-bold collapse-class" >e-office Documents\r\n              <a class="" data-toggle="collapse" href="#collapseEOfficeDoc" role="button" aria-expanded="false" aria-controls="collapseEOfficeDoc">+</a>\r\n            </label>\r\n          </div>  \r\n            <div class="card-body e-office-div collapse" id="collapseEOfficeDoc">\r\n              <div class="table-responsive text-center pb-2">\r\n                <table class="table table-bordered text-center tableLayout">\r\n                  <thead class="bg-light">\r\n                    <tr>\r\n                      <td width=\'6%\'>Sr. No</td>\r\n                      <td>eFile Number</td>\r\n                      <td>Subject</td>\r\n                      <td>etapal No.</td>\r\n                      <td>Date</td>\r\n                      <td>eTapals Associated</td>\r\n                      <td>Outward No.</td>\r\n                      <td>Decisions</td>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr *ngFor="let efile of efileList; let i = index" [attr.data-index]="i">\r\n                      <td>{{ i + 1 }}</td>\r\n                      <td><a href="javascript:void(0)" (click)="takeActionOnEFileClick(efile.fileId,\'efile\')">{{efile?.fileNo}}</a></td>\r\n                      <td>{{efile?.subject}}</td>\r\n                      <td><a href="javascript:void(0)" (click)="takeActionOnEFileClick(efile.eTapalfileId,\'etapal\')">{{efile?.etapalfileNo}}</a></td>\r\n                      <td>{{efile?.receivedDate | date: "dd-MM-yyyy"}}</td>\r\n                      <td>\r\n                        <p *ngFor="let docList of efile?.docLists">\r\n                          <app-multi-file-view [Uid]="docList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                      <td>{{ efile?.outwordNo }}</td>\r\n                      <td>\r\n                        <p *ngFor="let docAssociateList of efile?.docAssociateLists">\r\n                          <app-multi-file-view [Uid]="docAssociateList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n        </div>\r\n        \x3c!--e-office Documents end--\x3e\r\n\r\n \r\n      \r\n      \x3c!-- Enquiry Section --\x3e\r\n      <div *ngIf="efileViewAllPopup">\r\n        <app-efileviewalldupli [wfoEfileid]="efileId" ></app-efileviewalldupli>\r\n      </div>\r\n      <div class="card shadow mb-4" *ngIf="enquiryModel.length > 0">\r\n        <div *ngIf="enquiryModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Enquiries & Response\r\n            <a class="" data-toggle="collapse" href="#collapseEnquiry" role="button" aria-expanded="false" aria-controls="collapseEnquiry">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="enquiryModel.length > 0">\r\n          <div *ngFor="let ticketInEn of enquiryModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(ticketInEn.deptName)}}">\r\n              <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply">\r\n                  {{ticketInEn.userName}} ({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                \x3c!--<img src="assets/images/exclammation_mark1.png" id="curtain1">--\x3e\r\n              </div>\r\n              <ng-template #user_reply>\r\n                <div class="col-md-9">\r\n                  {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n              </ng-template>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{ticketInEn.remarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(ticketInEn.deptName)}}" id="collapseEnquiry">\r\n                <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply1">\r\n                  {{ticketInEn.userName}} ({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <ng-template #user_reply1>\r\n                  <div class="col-md-9">\r\n                    {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                  </div>\r\n                </ng-template>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{ticketInEn.remarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n   \r\n\r\n      \x3c!-- Forward Model --\x3e\r\n      <div class="card shadow mb-4" *ngIf="assignModel.length > 0">\r\n        <div *ngIf="assignModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Forwarded To\r\n            <a class="" data-toggle="collapse" href="#collapseForward" role="button" aria-expanded="false" aria-controls="collapseForward">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="assignModel.length > 0">\r\n          <div *ngFor="let assignModelData of assignModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}">\r\n              \r\n              <div class="col-md-9">\r\n                \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{assignModelData.remakrs}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}" id="collapseForward">\r\n                <div class="col-md-9">\r\n                  \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                  {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n\r\n                    <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{assignModelData.remakrs}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n     \r\n\r\n      <div class="card shadow mb-4" *ngIf="closedModel.length > 0">\r\n        <div *ngIf="closedModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class" >Closed By\r\n            <a class="" data-toggle="collapse" href="#collapseClose" role="button" aria-expanded="false" aria-controls="collapseClose">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="closedModel.length > 0">\r\n          <div *ngFor="let closedMo of closedModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(closedMo?.deptName)}}">\r\n              <div class="col-md-9">\r\n                {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{closedMo.remakrs}}</p>\r\n              </div>\r\n              <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                <p>{{closedMo.internalRemarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(closedMo?.deptName)}}" id="collapseClose">\r\n                <div class="col-md-9">\r\n                  {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    \r\n                    <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{closedMo.remakrs}}</p>\r\n                </div>\r\n                <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                  <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                  <p>{{closedMo.internalRemarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- Feedback from Authority Section --\x3e\r\n      <div class="card shadow mb-4" *ngIf="currentTicketData.esclationStatus == \'YES\'">  \r\n        <div class="card-header">\r\n          <label class="control-label">User Feedback</label>\r\n        </div>\r\n        <div class="col-md-12">\r\n          <p>{{currentTicketData.feedbackRemark}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="openModel.length > 0">\r\n        <div *ngIf="openModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold" >Reopened For</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="openModel.length > 0">\r\n          <div *ngFor="let openMo of openModel" class="card-body office-note-box popDis o-note">\r\n           \r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Department: </label>\r\n            {{openMo.assignTo}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{openMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{openMo.remarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>        \r\n      </div>--\x3e\r\n      \r\n      \x3c!-- Only For Ticket Officer --\x3e\r\n      <div *ngIf="currentUserType==\'officer\'">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="forwardticket"\r\n                  (click)="ticketAction($event)"><b>Forward</b>\r\n              </label>\r\n            </div>\r\n            \x3c!--<div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && ticketClosedOption == true">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            \x3c!--<div class="form-check-inline" *ngIf="ticketOpenedOption == true && statusOf!=\'CLOSED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="openticket"\r\n                  (click)="ticketAction($event)"><b>Open Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            <div class="form-check-inline" *ngIf="(ticketUniqueNo == \'UNDER SCRUTINY\' || ticketUniqueNo == \'\') && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="rejectticket"\r\n                  (click)="ticketAction($event)"><b>Reject Support Request</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n\r\n        <div class="col-md-12 border" *ngIf="ticketForwardArray.length > 0 && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n\r\n          <table class="table table-bordered table-striped mt-3">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assign To</th>\r\n              <th>Attachment Name</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of ticketForwardArray, let i = index">\r\n                <td>{{getDeptName(tval.ticketEnquiryTo)}}</td>\r\n                <td> {{tval.fileName}}</td>\r\n                <td>{{tval.remakrs}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteForwardTicketByIdId(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n\r\n        <form [formGroup]="forwardTicketForm" id="validateFoem" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border mt-3" *ngIf="forwardTicketFormIsActive">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold">Assign To<sup>*</sup></label>\r\n                <select class="form-control" formControlName="ticketEnquiryTo">\r\n                  <option value="">--Select--</option>\r\n                   \x3c!--<option value="TP" [disabled]="TP">TP</option>\r\n                  <option value="Legal" [disabled]="legal">Legal</option>\r\n                  <option value="Finance" [disabled]="finance">Finance</option>--\x3e\r\n                  <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                    <option value="{{d.userDept}}" [disabled]="d.optdisabled">{{d.userDeptKey}}</option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n\r\n              <div class="col-md-6">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketEnqFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketEnqFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 text-center ">\r\n                <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                  [disabled]="this.forwardTicketForm.invalid" (click)="addMore()">Add</button>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="ticketForwardArray.length <= 0" disabled\r\n                  (click)="submitTicketForward()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n          <form [formGroup]="closeTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Attachment</label>\r\n              <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n              <app-file-upload (myEvent)="setFile($event)"\r\n                [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n            </div>\r\n\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        \x3c!-- Open ticket again --\x3e\r\n        <div class="col-md-12 border" *ngIf="reOpenticketArray.length > 0">\r\n          <table class="table table-bordered table-striped">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assigned To</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of reOpenticketArray, let i = index">\r\n                <td>{{tval.assignTo}}</td>\r\n                <td>{{tval.remarks}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteOpenTicketById(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="openTicketFormIsActive">\r\n          <form [formGroup]="openTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktOpenId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Reassign To<sup>*</sup></label>\r\n              <select class="form-control" formControlName="assignTo">\r\n\r\n                <option value="">--Select--</option>\r\n                <ng-container *ngFor="let tl of this.ticketOpenedList">\r\n                  <option value="{{tl.tokey}}" [disabled] ="tl.enabled">{{tl.to}}</option>\r\n                </ng-container>\r\n              </select>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remarks"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12 text-center ">\r\n              <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                [disabled]="this.openTicketForm.invalid" (click)="addOpenTicketMore()">Add</button>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="reOpenticketArray.length <= 0" disabled (click)="submitTicketOpen()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        <div class="col-md-12 border" *ngIf="rejectTicketIsActive">\r\n          <form [formGroup]="rejectTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="ticketId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              Do you want to reject this Support Request?\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="rejectTicket()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TRO(Resolving Officer)  --\x3e\r\n      \r\n      \x3c!--<div *ngIf="(currentUserType==\'TP\' || currentUserType==\'Legal\' || currentUserType==\'Finance\') && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\')">--\x3e\r\n        \r\n        \x3c!-- added 14jun--\x3e\r\n        <div class="row" *ngIf="(resolvingOfficerStatus)">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n              <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n                <label class="form-check-label">\r\n                  <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                    (click)="ticketAction($event)"><b>Enquiry</b>\r\n                </label>\r\n              </div>\r\n            </div>  \r\n            <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n              <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n              </div>\r\n            </div>\r\n          </div>  \r\n        </div>\r\n\r\n        <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        </div>\r\n\r\n        <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TEO(Escalation Officer)  --\x3e\r\n      \x3c!--changed 14jun --\x3e\r\n      <div class="row" *ngIf="(escalationOfficerStatus)">\r\n        <div class="form-group col-md-12 text-center mb-4">\r\n          <span *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n          </span>\r\n          <span *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n            </div>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'ENQUIRY\' || forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal show" id="reassign" *ngIf="forwardedListPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-small ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>Forwarded Status</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketForwardedListPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <table class="table table-bordered misDashTable text-center">\r\n          <thead>\r\n              <tr>\r\n                  <th>Dept</th>\r\n                  <th>Status</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr *ngFor="let fwdlist of ticketForwardedListArr">\r\n                  \x3c!--<td>{{fwdlist.ticketEnquiryTo}}</td>--\x3e\r\n                  <td>{{getDeptName(fwdlist.ticketEnquiryToDepName)}}</td>\r\n                  <td>{{fwdlist.status}}</td>\r\n              </tr>\r\n          </tbody>\r\n        </table>      \r\n      </div>\r\n    </div>\r\n  </div>\r\n </div>\r\n\r\n\r\n<div class="modal show" *ngIf="eFilePopup">\r\n  <div class="modal-dialog modal-lg modal-dialog-centered">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b> File Details With Notes</b></h3>\r\n        <button type="button" class="close" (click)="closeEFilePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n          <div class="card mb-2"  *ngIf="eOfficeFileType == \'efile\' && efilePopupLoading == false">\r\n                <div class="card-body ">\r\n            <div class="row">\r\n              <div class="col-md-6 mb-4">\r\n                  <label class="control-label font-weight-bold">File No</label>\r\n                <span>{{efileData.fileNo}}</span>\r\n              </div>\r\n              <div class="col-md-6 mb-4">\r\n                <label class="control-label font-weight-bold">Created On</label>\r\n                <span>{{efileData.createdOn | date : \'dd-MM-yyyy\'}}</span>\r\n              </div>\r\n              <div class="col-md-12 mb-4">\r\n                <label class="control-label font-weight-bold">Subject</label>  \r\n                <span>{{efileData.subject}}</span>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div> \r\n\r\n        <div class="card mb-2" *ngIf="eOfficeFileType == \'etapal\' && efilePopupLoading == false">\r\n            <div class="card-body ">\r\n          <div class="row">\r\n            <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Document Type</label>  \r\n                <span>{{eTapalData.docType}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received By</label>  \r\n              <span>{{eTapalData.receivedBy}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received Date</label>  \r\n              <span>{{eTapalData.receivedDate | date : \'dd-MM-yyyy\'}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Addressee</label>  \r\n              <span>{{eTapalData.departmentName}}</span>\r\n            </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Keyword</label>  \r\n            <span>{{eTapalData.captionKey}}</span>\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">File Download</label>\r\n            <span *ngFor="let doclistFile of eTapalData?.docLists">\r\n              <span class=" btn-small mb-2 mr-2"> <app-multi-file-view [Uid]="doclistFile.docUID" ></app-multi-file-view></span>\r\n            </span>\r\n          </div>\r\n          <div class="col-md-12 mb-4">\r\n            <label class="control-label font-weight-bold">Subject</label>\r\n          <span>{{eTapalData.subject}}</span>\r\n          </div>\r\n          </div>\r\n        </div>\r\n    </div> \r\n    <div class=\'text-center\' *ngIf="efilePopupLoading">Loading ...</div>\r\n  </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n<div class="popup-overlay" *ngIf="ticketActionPopup"></div>\r\n<div class="popup-overlay" *ngIf="forwardedListPopup"></div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<div class="popup-overlay" *ngIf="eFilePopup"></div>'},Ciua:function(t,e,n){"use strict";n.r(e),e.default=""},Eh9e:function(t,e,n){"use strict";n.r(e),e.default='<div class="d-flex justify-content-between align-items-center">\r\n  <h2>{{pageTitle}} </h2>\r\n  <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n  </div>\r\n\r\n<div #listing class="text-left">\r\n  <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n<div class="table-responsive">\r\n<table class="table table-bordered text-left text-center">\r\n   \r\n  <thead>\r\n      <tr class="bg-light  text-size-small text-center">\r\n          <th>Sr.No.</th>\r\n          <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n          </div>\r\n        </th>\r\n        <th>Attachment</th>\r\n      </tr>\r\n  </thead>\r\n \r\n  <tbody *ngIf="filterDataArray?.length > 0; else _no_approvedProjectList">\r\n      <tr *ngFor="let data of filterDataArray | paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }; let i = index">\r\n          <td class="tabel-text-right">{{((currentPageNo-1)*10)+(i+1) }} </td>\r\n          <td>{{data.dept}}</td>\r\n          <td>\r\n             {{data.concernDept}}\r\n          </td>\r\n          <td  class="text-nowrap">{{data.supportNo}}</td>\r\n          <td>{{data.query}}</td>\r\n          \x3c!-- <td>{{data.remarks}}</td> --\x3e\r\n          <td>{{data.description}}</td>\r\n          <td>{{data.assignedTo}}</td>\r\n          <td>{{data.userType}}</td>\r\n          <td>{{data.mobileNo}}</td>\r\n          <td>{{data.emailId}}</td>\r\n\r\n          <td class="moreLinkTd">\r\n            <div class="d-flex justify-content-between" *ngIf="data.remarks!=null">\r\n            <div [ngClass]="{textViewMore: checkRemark(data.remarks)}">\r\n              {{data.remarks}}\r\n            </div> \r\n            <a *ngIf="checkRemark(data.remarks)" class="link-color showMore" href="javascript:void()">View More</a> \r\n            <a class="link-color hideMore" href="javascript:void()">Hide More</a>\r\n          </div>\r\n          </td>\r\n          \r\n          \x3c!-- <td  class="text-nowrap">{{data.status}}</td> --\x3e\r\n          \r\n          <td  class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n          <td>\r\n            <app-multi-file-view *ngIf="data.uid; else _noRe" [Uid]="data.uid" ></app-multi-file-view>\r\n\r\n            <ng-template #_noRe>NA</ng-template>\r\n         </td>\r\n          \r\n          \x3c!--<td>{{data.projectStatus}}</td>--\x3e\r\n      </tr>\r\n  </tbody>\r\n  <ng-template #_no_approvedProjectList>\r\n      <tbody>\r\n          <tr>\r\n              <td colspan="8" class="red font-weight-bold text-center">{{loadingMessage}}</td>\r\n          </tr>\r\n      </tbody>\r\n  </ng-template>\r\n\r\n</table>\r\n<div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n  <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n</div>\r\n</div>\r\n</div>\r\n<div class="row mt-4">\r\n  <div class="col-md-12 text-center"> <a routerLink="/dashboard-new/authority/excutive-summary" title="Back"><button class="btn btn-primary">Back</button></a></div>\r\n</div>\r\n\r\n<div *ngIf="loadingSpinner">\r\n<app-loader></app-loader>\r\n</div>'},FYaX:function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n  <div class="container-fluid">\r\n    <div class="col-md-12 text-center mb-2">\r\n      <h2 class="text-dark mt-4">Support Request/ Report Task List</h2>\r\n    </div>\r\n\r\n    \x3c!--<div class="col-md-12" *ngIf="currentUserType==\'officer\'">\r\n      <div class=" col-md-12 table-responsive">\r\n          <table class="table table-bordered misDashTable text-center">\r\n              <thead>\r\n                  <tr>\r\n                      <th rowspan=2 width="25%">Dept</th>\r\n                      <th rowspan=2>Total</th>\r\n                      <th rowspan=2>Disposed</th>\r\n                      <th rowspan=2>Enquiry</th>\r\n                      <th colspan=3>Pending</th>\r\n                  </tr>\r\n                  <tr>\r\n                      <th rowspan=2><15 </th>\r\n                      <th rowspan=2>15-30</th>\r\n                      <th rowspan=2>>30</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr *ngFor="let d of pendencyList, let i = index">\r\n                  <td *ngIf="d.dept == \'TCO\';else depto" class="font-weight-bold">{{d.dept}}</td>\r\n                  <ng-template #depto><td class="font-weight-bold">{{getDeptName(d.dept)}}</td></ng-template>\r\n                  \r\n                  <td>\r\n                    <a *ngIf="d.total > 0;else e_total" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'TOTAL\')">{{d.total}}</a>\r\n                    <ng-template #e_total>{{d.total}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.disposed > 0;else e_disposed" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'DISPOSE\')">{{d.disposed}}({{(d.disposed / d.total) * 100 | number:\'1.0-0\'}}%)</a>\r\n                    <ng-template #e_disposed>0</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.enquiry > 0;else e_enquiry" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'ENQUIRY\')">{{d.enquiry}}</a>\r\n                    <ng-template #e_enquiry>{{d.enquiry}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.less15 > 0;else e_less15" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'LESS15\')">{{d.less15}}</a>\r\n                    <ng-template #e_less15>{{d.less15}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.between15to30 > 0;else e_between15to30" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'BETWEEN15TO30\')">{{d.between15to30}}</a>\r\n                    <ng-template #e_between15to30>{{d.between15to30}}</ng-template>\r\n                  </td>\r\n                  <td><a *ngIf="d.greater30 > 0;else e_greater30" href="javascript:void(0)" (click)="pendencyTableFunc(d.dept,\'GREATER30\')">{{d.greater30}}</a>\r\n                    <ng-template #e_greater30>{{d.greater30}}</ng-template>\r\n                  </td>                    \r\n                </tr>\r\n                <tr>\r\n                  <td class="font-weight-bold">Total</td>\r\n                  <td>{{pendencyListArrTotal[\'total\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'disposed\']}} ({{pendencyListArrTotal[\'disposec_percent\']}}%)</td>\r\n                  <td>{{pendencyListArrTotal[\'enquiry\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'less15\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'between15to30\']}}</td>\r\n                  <td>{{pendencyListArrTotal[\'greater30\']}}</td>\r\n                </tr>\r\n            </tbody>\r\n          </table>\r\n      </div>\r\n  </div>--\x3e\r\n\r\n    <form [formGroup]="searchForm" (ngSubmit)="searchFormSubmit()">\r\n\r\n      <div class="mb-4 mt-5 col-md-12">\r\n        <div class="col-md-12">\r\n          \x3c!--<div class="card shadow"> \r\n            <div class="card-body">--\x3e\r\n              <div><div>\r\n              <div class="col-md-12">\r\n                 \r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Support Request No. </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketNumber">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Applicant Name </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <input class="form-control" type="search" formControlName="searchTicketRaiseBy">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Concern </label>\r\n                  \r\n                  <div class="input-group mt-3">\r\n                    <select class="form-control" formControlName="searchTicketDept" [(ngModel)]="searchTicketDept">\r\n                      <option value="">--Select--</option>\r\n                      <option *ngFor="let d of getAllDeptsSelectList, let i = index" [value]="d.userDept">\r\n                        {{d.userDeptKey}}\r\n                      </option>\r\n                    </select> \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Query</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketQuery" [(ngModel)]="searchTicketQuery">\r\n                    <option value="">--Select--</option>\r\n                    <option value=\'reratrib\'>Real Estate Regulatory Authority and Appellate Tribunal</option>\r\n                    <option value=\'projectreg\'>Real Estate Projects Registration</option>\r\n                    <option value=\'agentreg\'> Real Estate Agents Registration</option>\r\n                    <option value=\'filingcomp\'>Filing of complaints</option>\r\n                    <option value=\'financedicipline\'>Financial Discipline</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-group col-md-3">\r\n                  <label class="control-label font-weight-bold">Status</label>\r\n                  <div class="input-group mt-3">\r\n                  <select class="form-control" formControlName="searchTicketStatus" [(ngModel)]="searchTicketStatus">\r\n                    <option value="">--Select--</option>\r\n                    <option value="OPEN">Open</option>\r\n                    <option value="ENQUIRY">Enquiry</option>\r\n                    \x3c!--<option value="FORWARDED">Forwarded</option>--\x3e\r\n                    <option value="CLOSED">Closed</option>\r\n                    <option value="ESCALATED">Escalated</option>\r\n                    <option value="REJECTED">Rejected</option>\r\n                  </select>            \r\n                  </div>\r\n                </div>\r\n                <div class="form-group col-md-12 text-center">\r\n                  <button type="submit" class="btn btn-primary btn-small mt-5" [disabled]="!this.searchForm.valid">Search</button>\r\n                  <button type="reset" class="btn btn-primary btn-small mt-5" (click)=\'resetForm()\'>Reset</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n     </form>\r\n\r\n    <div class="col-md-12">\r\n      <div>\r\n        <div class="col-md-12 mb-4">\r\n          <div class="card ">\r\n            <div class="card-header d-flex justify-content-between align-items-center">\r\n              <h2><b>Support Request/ Report  Task List</b></h2>\r\n      \r\n              <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n              </div>\r\n            \x3c!-- <div class="card-header"><b>Support Request/ Report  Task List</b>\r\n              <b> <span class="pull-right"> <button (click)="exportToExcel()" class="text-right mb-2 btn btn-success">Export To Excel</button></span></b>\r\n            </div> --\x3e\r\n            <div class="card-body ">\r\n              <div class="row ">\r\n                <div class="col-md-12 ">\r\n                  <div class="table-responsive col-md-12 ">\r\n                    <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n                    <table #table_listing class="table table-bordered text-center  bg-white">                             \r\n                      <thead>\r\n                        <tr class="bg-light  text-size-small text-center">\r\n                            <th>Sr.No.</th>\r\n                            <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n                              <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n                              <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n                            </div>\r\n                          </th>  \r\n                          \r\n                          <th>Attachment</th>\r\n                           <th class="w-50"> Forwarded Status</th>\r\n                          <th> Status</th>\r\n                          <th class="w-7">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                      \x3c!-- <thead>\r\n                        <tr>\r\n                          <th class="w-7">S.No.</th>\r\n                          <th class="w-5">Support Request No.</th>\r\n                          <th class="w-5">Request Raised By</th>\r\n                          <th class="w-5">Concern</th>\r\n                          <th>Query </th>\r\n                          <th class="w-50"> Remarks</th>\r\n                          <th>Source</th>\r\n                          <th>Created On</th>\r\n                          <th>Attachment</th>\r\n                          <th class="w-50"> Forwarded Status</th>\r\n                          <th> Status</th>\r\n                          <th class="w-7">Action</th>\r\n                        </tr>\r\n                      </thead> --\x3e\r\n                      <tbody  *ngIf="filterDataArray?.length > 0; else noTicketFound">\r\n                        \x3c!--<tr *ngFor="let data of ticketListing | paginate: { id: \'foo3\', itemsPerPage: 10, currentPage: tickets }">--\x3e\r\n                        <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }; let ic = index">\r\n                    <td class="tabel-text-right">{{((currentPageNo-1)*10)+(ic+1) }} </td>\r\n                    \x3c!-- <td>{{ i + 1 }}</td> --\x3e\r\n                          <td>{{ data?.ticketNo }}</td>\r\n                          <td>{{ data?.createdUserName }}</td>\r\n                          \x3c!--<td>{{data?.concernDeptName}}</td>--\x3e\r\n                          <td>{{getDeptName(data?.concernDeptName)}}</td>\r\n                          <td>{{data?.query}}</td>\r\n                          <td class="text-left">{{data.details}}</td>\r\n                          <td>\r\n                            <span *ngIf="(data.lattitude != null || data.longitude != null); else source_div">Mobile App</span>\r\n                            <ng-template #source_div>Web</ng-template>\r\n                            </td>\r\n                          <td  class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n                          <td>\r\n                            <div *ngIf="data?.attachmentUId;then download_link else no_image_available"></div>\r\n                            <label class="control-label">\r\n                              <ng-template #download_link>\r\n                                \x3c!--<a href="{{ fileDonwloadPath }}{{ data?.attachmentUId }}" class="text-danger"> <i\r\n                                    class="icon icon-download"></i> Download</a>--\x3e\r\n                                <app-multi-file-view [Uid]="data?.attachmentUId" ></app-multi-file-view>\r\n                              </ng-template>\r\n                              <ng-template #no_image_available>\r\n                                \x3c!--No Attachment Available!--\x3e\r\n                                --\r\n                              </ng-template>\r\n                            </label>\r\n                          </td>\r\n                          <td class="text-center">\r\n                            \x3c!--<ng-container *ngFor="let fwdlist of data.forwardUserList">\r\n                              To: {{fwdlist.ticketEnquiryTo}}, Status: {{fwdlist.status}} <br>\r\n                            </ng-container>--\x3e\r\n                            <a *ngIf="data.forwardUserList.length > 0;else noForward" href= \'javascript:void(0)\' (click) =\'forwardedListFunc(data.forwardUserList)\'>View</a>\r\n                            <ng-template #noForward>--</ng-template>\r\n                            \r\n                          </td>\r\n                          \x3c!--<td *ngIf="data.status == \'FORWARDED\'; else status">--\x3e\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus == \'YES\'; else status_0"> ESCALATED </td>\r\n                            <ng-template #status_0>\r\n                            <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus != \'YES\'; else status_1">\r\n                              OPEN</td>\r\n                              <ng-template #status_1>\r\n                                <td>{{data.status}}</td>\r\n                              </ng-template>\r\n                            </ng-template>\r\n\r\n                          <td class="pt-4">\r\n                            <button class="btn btn-small bg-success text-white" (click)="takeActionOnTicket(data)"\r\n                              title="Ticket Action"><i class="icon-export"></i></button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                      <ng-template #noTicketFound>\r\n                        <tbody>\r\n                        <tr>\r\n                          <td colspan="12">\r\n                            <div *ngIf="completeFlag == \'Loading ...\'">{{completeFlag}}</div>\r\n                            <div *ngIf="completeFlag != \'Loading ...\'" class="error">{{completeFlag}}</div>\r\n                          </td>\r\n                        </tr>\r\n                        </tbody>\r\n                      </ng-template>\r\n\r\n                    </table>\r\n                    <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n                      <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n                    </div>\r\n                    \x3c!--<div class="col-md-12 text-right">\r\n                      <pagination-controls  id="foo3" (pageChange)="tickets = $event"></pagination-controls>\r\n                    </div>--\x3e\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="modal show" id="reassign" *ngIf="ticketActionPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-lg ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>View Support Request</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketActionPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <div class="col-md-12 pt-2 pb-2 bg-light mb-4 border">\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Support Request No</label>\r\n            {{currentTicketData?.ticketNo}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created On</label>\r\n            {{currentTicketData?.createdOn | date : \'dd-MM-yyyy\'}}\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Created By</label>\r\n            {{currentTicketData?.createdUserName}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Concern</label>\r\n            {{getDeptName(currentTicketData?.concernDeptName)}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Query</label>\r\n            {{currentTicketData.query}}\r\n          </div>\r\n\r\n          <div class="col-md-4 mt-2 mb-3">\r\n            <label class="control-label font-weight-bold mb-1">Attachment</label>\r\n\r\n            <div *ngIf="currentTicketData?.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="currentTicketData.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                \x3c!--No Attachment Available!--\x3e\r\n                --\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="col-md-4">\r\n            <label class="control-label font-weight-bold mb-1">Remarks</label>\r\n            <p>{{currentTicketData?.details}}</p>\r\n          </div>\r\n          <div class="col-md-4" *ngIf="currentTicketData?.emailId!=null">\r\n            <label class="control-label font-weight-bold mb-1">Email Id </label>\r\n            <p>{{currentTicketData?.emailId}}</p>\r\n          </div>\r\n\r\n          <div class="col-md-4" *ngIf="currentTicketData?.mobileNo!=null">\r\n            <label class="control-label font-weight-bold mb-1">Mobile No </label>\r\n            <p>{{currentTicketData?.mobileNo}}</p>\r\n          </div>\r\n        </div>\r\n\r\n        \x3c!--e-office Documents start--\x3e\r\n        <div class="card shadow mb-4" *ngIf="efileList.length > 0">\r\n          <div class="card-header">\r\n            <label class="control-label font-weight-bold collapse-class" >e-office Documents\r\n              <a class="" data-toggle="collapse" href="#collapseEOfficeDoc" role="button" aria-expanded="false" aria-controls="collapseEOfficeDoc">+</a>\r\n            </label>\r\n          </div>  \r\n            <div class="card-body e-office-div collapse" id="collapseEOfficeDoc">\r\n              <div class="table-responsive text-center pb-2">\r\n                <table class="table table-bordered text-center tableLayout">\r\n                  <thead class="bg-light">\r\n                    <tr>\r\n                      <td width=\'6%\'>Sr. No</td>\r\n                      <td>eFile Number</td>\r\n                      <td>Subject</td>\r\n                      <td>etapal No.</td>\r\n                      <td>Date</td>\r\n                      <td>eTapals Associated</td>\r\n                      <td>Outward No.</td>\r\n                      <td>Decisions</td>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr *ngFor="let efile of efileList; let i = index" [attr.data-index]="i">\r\n                      <td>{{ i + 1 }}</td>\r\n                      <td>{{efile?.fileNo}}</td>\r\n                      <td>{{efile?.subject}}</td>\r\n                      <td>{{efile?.etapalfileNo}}</td>\r\n                      <td>{{efile?.receivedDate | date: "dd-MM-yyyy"}}</td>\r\n                      <td>\r\n                        <p *ngFor="let docList of efile?.docLists">\r\n                          <app-multi-file-view [Uid]="docList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                      <td>{{ efile?.outwordNo }}</td>\r\n                      <td>\r\n                        <p *ngFor="let docAssociateList of efile?.docAssociateLists">\r\n                          <app-multi-file-view [Uid]="docAssociateList?.docUID" ></app-multi-file-view>\r\n                        </p>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n        </div>\r\n        \x3c!--e-office Documents end--\x3e\r\n\r\n        \x3c!-- Enquiry Section --\x3e\r\n        \x3c!--<div class="card shadow mb-4" *ngIf="enquiryModel.length > 0">\r\n        <div *ngIf="enquiryModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold">Enquiries & Response</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="enquiryModel.length > 0">\r\n          <div *ngFor="let ticketInEn of enquiryModel" class="card-body office-note-box popDis o-note">\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Response By: </label>\r\n            {{ticketInEn.userName}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Attachment:</label>\r\n            <div *ngIf="ticketInEn.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                No Attachment Available!\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{ticketInEn.remarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>--\x3e\r\n      \r\n      \x3c!-- Enquiry Section --\x3e\r\n      <div *ngIf="efileViewAllPopup">\r\n        <app-efileviewalldupli [wfoEfileid]="efileId" ></app-efileviewalldupli>\r\n      </div>\r\n      <div class="card shadow mb-4" *ngIf="enquiryModel.length > 0">\r\n        <div *ngIf="enquiryModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Enquiries & Response\r\n            <a class="" data-toggle="collapse" href="#collapseEnquiry" role="button" aria-expanded="false" aria-controls="collapseEnquiry">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="enquiryModel.length > 0">\r\n          <div *ngFor="let ticketInEn of enquiryModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(ticketInEn.deptName)}}">\r\n              <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply">\r\n                  {{ticketInEn.userName}}({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                \x3c!--<img src="assets/images/exclammation_mark1.png" id="curtain1">--\x3e\r\n              </div>\r\n              <ng-template #user_reply>\r\n                <div class="col-md-9">\r\n                  {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n              </ng-template>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{ticketInEn.remarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(ticketInEn.deptName)}}" id="collapseEnquiry">\r\n                <div class="col-md-9" *ngIf="ticketInEn.deptName;else user_reply1">\r\n                  {{ticketInEn.userName}}({{ticketInEn.designation}}, {{getDeptName(ticketInEn.deptName)}}) | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <ng-template #user_reply1>\r\n                  <div class="col-md-9">\r\n                    {{ticketInEn.userName}} | {{ticketInEn.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                  </div>\r\n                </ng-template>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="ticketInEn.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="ticketInEn.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    <span *ngIf="ticketInEn.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{ticketInEn.remarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="assignModel.length > 0">\r\n        <div *ngIf="assignModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold">Forwarded To</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="assignModel.length > 0">\r\n          <div *ngFor="let assignModelData of assignModel" class="card-body office-note-box popDis o-note">\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Department: </label>\r\n            {{assignModelData.ticketEnquiryTo}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Attachment:</label>\r\n            <div *ngIf="assignModelData.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n                <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                No Attachment Available!\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{assignModelData.remakrs}}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>--\x3e\r\n\r\n      \x3c!-- Forward Model --\x3e\r\n      <div class="card shadow mb-4" *ngIf="assignModel.length > 0">\r\n        <div *ngIf="assignModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class">Forwarded To\r\n            <a class="" data-toggle="collapse" href="#collapseForward" role="button" aria-expanded="false" aria-controls="collapseForward">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="assignModel.length > 0">\r\n          <div *ngFor="let assignModelData of assignModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}">\r\n              \r\n              <div class="col-md-9">\r\n                \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{assignModelData.remakrs}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(assignModelData?.ticketEnquiryToDepName)}}" id="collapseForward">\r\n                <div class="col-md-9">\r\n                  \x3c!--({{assignModelData.ticketEnquiryTo}}, {{getDeptName(assignModelData.ticketEnquiryToDepName)}}) | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}--\x3e\r\n                  {{getDeptName(assignModelData.ticketEnquiryToDepName)}} | {{assignModelData.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="assignModelData.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="assignModelData.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n\r\n                    <span *ngIf="assignModelData.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{assignModelData.remakrs}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="closedModel.length > 0">\r\n        <div *ngIf="closedModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold" >Closed By</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="closedModel.length > 0">\r\n          <div *ngFor="let closedMo of closedModel" class="card-body office-note-box popDis o-note">\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Closed By: </label>\r\n            {{closedMo.userName}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-4 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Attachment:</label>\r\n            <div *ngIf="closedMo.attachmentUId;then download_link else no_image_available"></div>\r\n            <label class="control-label">\r\n              <ng-template #download_link>\r\n              <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n              </ng-template>\r\n              <ng-template #no_image_available>\r\n                No Attachment Available!\r\n              </ng-template>\r\n            </label>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{closedMo.remakrs}}</p>\r\n          </div>\r\n          \r\n          <div class="form-group col-md-12" *ngIf="closedMo?.internalRemarks">\r\n            <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n            <p>{{closedMo.internalRemarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>--\x3e\r\n\r\n      <div class="card shadow mb-4" *ngIf="closedModel.length > 0">\r\n        <div *ngIf="closedModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold collapse-class" >Closed By\r\n            <a class="" data-toggle="collapse" href="#collapseClose" role="button" aria-expanded="false" aria-controls="collapseClose">+</a>\r\n          </label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 bg-light" *ngIf="closedModel.length > 0">\r\n          <div *ngFor="let closedMo of closedModel;index as i" class="card-body col-md-12 no-padding">\r\n\r\n            <div *ngIf="i == 0" class="col-md-12 leftight-padding box-shadow {{colorCode(closedMo?.deptName)}}">\r\n              <div class="col-md-9">\r\n                {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n              </div>\r\n\r\n              <div class="col-md-3 text-right">\r\n                <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                  <ng-template #download_link>\r\n                  <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                  </ng-template>\r\n\r\n                  <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n              </div>\r\n              <div class="col-md-12 border-div">\r\n                <p>{{closedMo.remakrs}}</p>\r\n              </div>\r\n              <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                <p>{{closedMo.internalRemarks}}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf="i > 0">\r\n              <div class="col-md-12 leftight-padding collapse box-shadow {{colorCode(closedMo?.deptName)}}" id="collapseClose">\r\n                <div class="col-md-9">\r\n                  {{closedMo.userName}}({{closedMo.designation}}, {{getDeptName(closedMo.deptName)}}) | {{closedMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}\r\n                </div>\r\n                <div class="col-md-3 text-right">\r\n                  <div *ngIf="closedMo.attachmentUId;then download_link"></div>\r\n                    <ng-template #download_link>\r\n                    <app-multi-file-view [Uid]="closedMo.attachmentUId" ></app-multi-file-view>\r\n                    </ng-template>\r\n                    \r\n                    <span *ngIf="closedMo.esclationStatus" class="escalaltion-img"><img alt="Escalated" title="Escalated" src="assets/images/exclammation_mark1.png"></span>\r\n                </div>\r\n                <div class="col-md-12 border-div">\r\n                  <p>{{closedMo.remakrs}}</p>\r\n                </div>\r\n                <div class="col-md-12" *ngIf="closedMo?.internalRemarks">\r\n                  <label class="control-label font-weight-bold mb-2">Internal Remarks:</label>\r\n                  <p>{{closedMo.internalRemarks}}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- Feedback from Authority Section --\x3e\r\n      <div class="card shadow mb-4" *ngIf="currentTicketData.esclationStatus == \'YES\'">  \r\n        <div class="card-header">\r\n          <label class="control-label">User Feedback</label>\r\n        </div>\r\n        <div class="col-md-12">\r\n          <p>{{currentTicketData.feedbackRemark}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!--<div class="card shadow mb-4" *ngIf="openModel.length > 0">\r\n        <div *ngIf="openModel.length > 0" class="card-header">\r\n          <label class="control-label font-weight-bold" >Reopened For</label>\r\n        </div>\r\n        <div class="col-md-12 pt-2 pb-2 mb-4 " *ngIf="openModel.length > 0">\r\n          <div *ngFor="let openMo of openModel" class="card-body office-note-box popDis o-note">\r\n           \r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Department: </label>\r\n            {{openMo.assignTo}}\r\n          </div>\r\n\r\n          <div class="form-group col-md-6 mt-2">\r\n            <label class="control-label font-weight-bold mb-2">Date:</label>\r\n            <p>{{openMo.createdOn | date:\'dd-MM-yyyy hh:mm a\'}}</p>\r\n          </div>\r\n\r\n          <div class="form-group col-md-12">\r\n            <label class="control-label font-weight-bold mb-2">Remarks:</label>\r\n            <p>{{openMo.remarks}}</p>\r\n          </div>\r\n        </div>\r\n        </div>        \r\n      </div>--\x3e\r\n      \r\n      \x3c!-- Only For Ticket Officer --\x3e\r\n      <div *ngIf="currentUserType==\'officer\'">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="forwardticket"\r\n                  (click)="ticketAction($event)"><b>Forward</b>\r\n              </label>\r\n            </div>\r\n            \x3c!--<div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'ENQUIRY\' && ticketClosedOption == true">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            \x3c!--<div class="form-check-inline" *ngIf="ticketOpenedOption == true && statusOf!=\'CLOSED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="openticket"\r\n                  (click)="ticketAction($event)"><b>Open Ticket</b>\r\n              </label>\r\n            </div>--\x3e\r\n            <div class="form-check-inline" *ngIf="(ticketUniqueNo == \'UNDER SCRUTINY\' || ticketUniqueNo == \'\') && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="rejectticket"\r\n                  (click)="ticketAction($event)"><b>Reject Support Request</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n\r\n        <div class="col-md-12 border d-none" *ngIf="ticketForwardArray.length > 0 && isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n\r\n          <table class="table table-bordered table-striped mt-3">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assign To</th>\r\n              <th>Attachment Name</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of ticketForwardArray, let i = index">\r\n                <td>{{getDeptName(tval.ticketEnquiryTo)}}</td>\r\n                <td> {{tval.fileName}}</td>\r\n                <td>{{tval.remakrs}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteForwardTicketByIdId(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n\r\n        <form [formGroup]="forwardTicketForm" id="validateFoem" *ngIf="isForwared!=\'FORWARDED\' && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border mt-3" *ngIf="forwardTicketFormIsActive">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3" *ngIf="ticketForwardArray.length<1">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold">Assign To<sup>*</sup></label>\r\n                <select class="form-control" formControlName="ticketEnquiryTo">\r\n                  <option value="">--Select--</option>\r\n                   \x3c!--<option value="TP" [disabled]="TP">TP</option>\r\n                  <option value="Legal" [disabled]="legal">Legal</option>\r\n                  <option value="Finance" [disabled]="finance">Finance</option>--\x3e\r\n                  <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                    <option value="{{d.userDept}}">{{d.userDeptKey}}</option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n\r\n              <div class="col-md-6">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketEnqFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketEnqFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 text-center d-none">\r\n                <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                  [disabled]="this.forwardTicketForm.invalid" (click)="addMore()">Add</button>\r\n              </div>\r\n            </div>\r\n              <div class="mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.forwardTicketForm.invalid"\r\n                  (click)="addMore(); submitTicketForward()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            \r\n          </div>\r\n        </form>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n          <form [formGroup]="closeTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Attachment</label>\r\n              <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n              <app-file-upload (myEvent)="setFile($event)"\r\n                [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n            </div>\r\n\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        \x3c!-- Open ticket again --\x3e\r\n        <div class="col-md-12 border" *ngIf="reOpenticketArray.length > 0">\r\n          <table class="table table-bordered table-striped">\r\n            <thead>\r\n              <tr class="bg-light">\r\n              <th>Assigned To</th>\r\n              <th>Remarks</th>\r\n              <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor="let tval of reOpenticketArray, let i = index">\r\n                <td>{{tval.assignTo}}</td>\r\n                <td>{{tval.remarks}}</td>\r\n                <td><a href="javascript:void(0)" class="btn btn-small btn-warning" (click)="deleteOpenTicketById(i)">Delete</a></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        \x3c!--<div class="col-md-12 border" *ngIf="openTicketFormIsActive">\r\n          <form [formGroup]="openTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="tktOpenId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n            <div class="form-group col-md-6">\r\n              <label class="control-label font-weight-bold mb-2">Reassign To<sup>*</sup></label>\r\n              <select class="form-control" formControlName="assignTo">\r\n\r\n                <option value="">--Select--</option>\r\n                <ng-container *ngFor="let tl of this.ticketOpenedList">\r\n                  <option value="{{tl.tokey}}" [disabled] ="tl.enabled">{{tl.to}}</option>\r\n                </ng-container>\r\n              </select>\r\n            </div>\r\n            <div class="form-group col-md-12">\r\n              <label class="control-label font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n              <textarea rows="3" cols="1" class="form-control" formControlName="remarks"></textarea>\r\n            </div>\r\n            <div class="form-group col-md-12 text-center ">\r\n              <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                [disabled]="this.openTicketForm.invalid" (click)="addOpenTicketMore()">Add</button>\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                [disabled]="reOpenticketArray.length <= 0" disabled (click)="submitTicketOpen()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>--\x3e\r\n\r\n        <div class="col-md-12 border" *ngIf="rejectTicketIsActive">\r\n          <form [formGroup]="rejectTicketForm" id="validateFoem">\r\n          <input type="hidden" formControlName="ticketId" [(ngModel)]="currTicketId">\r\n          <div class="row mt-3">\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              Do you want to reject this Support Request?\r\n            </div>\r\n\r\n            <div class="col-md-12 mt-4 text-center mb-2">\r\n              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="rejectTicket()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n              <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                (click)="closeticketActionPopup()">Cancel</button>\r\n            </div>\r\n          </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TRO(Resolving Officer)  --\x3e\r\n      \r\n      \x3c!--<div *ngIf="(currentUserType==\'TP\' || currentUserType==\'Legal\' || currentUserType==\'Finance\') && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\')">--\x3e\r\n        <div *ngIf="(resolvingOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus != \'YES\')">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="forwardticket"\r\n                  (click)="ticketAction($event)"><b>Forward</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks to Applicant<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <form [formGroup]="forwardTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border mt-3" *ngIf="forwardTicketFormIsActive">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3" *ngIf="ticketForwardArray.length<1">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold">Assign To<sup>*</sup></label>\r\n                <select class="form-control" formControlName="ticketEnquiryTo">\r\n                  <option value="">--Select--</option>\r\n                   \x3c!--<option value="TP" [disabled]="TP">TP</option>\r\n                  <option value="Legal" [disabled]="legal">Legal</option>\r\n                  <option value="Finance" [disabled]="finance">Finance</option>--\x3e\r\n                  <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                    <option value="{{d.userDept}}">{{d.userDeptKey}}</option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n\r\n              <div class="col-md-6">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketEnqFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketEnqFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 text-center d-none">\r\n                <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                  [disabled]="this.forwardTicketForm.invalid" (click)="addMore()">Add</button>\r\n              </div>\r\n            </div>\r\n              <div class="mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.forwardTicketForm.invalid"\r\n                  (click)="addMore(); submitTicketForward()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            \r\n          </div>\r\n        </form>\r\n\r\n\r\n      </div>\r\n\r\n      \x3c!--   user Form for the Enquiry and closed FOR TEO(Escalation Officer)  --\x3e\r\n\r\n      <div *ngIf="(escalationOfficerStatus) && (forWardClosedOption == \'OPEN\' || forWardClosedOption == \'REOPEN\') && (esclationStatus == \'YES\')">\r\n        <div class="row">\r\n          <div class="form-group col-md-12 text-center mb-4">\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input " name="ticketAction" value="enquiry"\r\n                  (click)="ticketAction($event)"><b>Enquiry</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="closeticket"\r\n                  (click)="ticketAction($event)"><b>Close Support Request</b>\r\n              </label>\r\n            </div>\r\n            <div class="form-check-inline" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n              <label class="form-check-label">\r\n                <input type="radio" class="form-check-input" name="ticketAction" value="forwardticket"\r\n                  (click)="ticketAction($event)"><b>Forward</b>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <form [formGroup]="enquiryForm" id="validateFoem">\r\n          <div class="col-md-12 border" *ngIf="enquiryFormIsActive && statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketAttachFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketAttachFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n              <div class="col-md-4" *ngIf="uploadTicketFile?.emailId!=null">\r\n                <label class="control-label font-weight-bold mb-1">Email Id </label>\r\n                <p>{{uploadTicketFile?.emailId}}</p>\r\n              </div>\r\n    \r\n              <div class="col-md-4" *ngIf="uploadTicketFile?.mobileNo!=null">\r\n                <label class="control-label font-weight-bold mb-1">Mobile No </label>\r\n                <p>{{uploadTicketFile?.mobileNo}}</p>\r\n              </div>\r\n\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="this.enquiryForm.invalid" (click)="submitTicketEnquiry()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <form [formGroup]="closeTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border" *ngIf="closeTicketFormIsActive">\r\n            <input type="hidden" formControlName="tktCloseId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.closeAttachment" formControlName="attachmentId" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'closeAttachment\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mb-2">Remarks to Applicant<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="remakrs"></textarea>\r\n              </div>\r\n              <div class="col-md-12">\r\n                <label class="font-weight-bold mt-4">Internal Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="internalRemarks"></textarea>\r\n              </div>\r\n              <div class="col-md-12 mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.closeTicketForm.invalid" disabled (click)="submitTicketClose()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <form [formGroup]="forwardTicketForm" id="validateFoem" *ngIf="statusOf!=\'CLOSED\' && statusOf!=\'REJECTED\'">\r\n          <div class="col-md-12 border mt-3" *ngIf="forwardTicketFormIsActive">\r\n            <input type="hidden" formControlName="ticketFkId" [(ngModel)]="currTicketId">\r\n            <div class="row mt-3" *ngIf="ticketForwardArray.length<1">\r\n              <div class="col-md-6 mb-4">\r\n                <label class="font-weight-bold">Assign To<sup>*</sup></label>\r\n                <select class="form-control" formControlName="ticketEnquiryTo">\r\n                  <option value="">--Select--</option>\r\n                   \x3c!--<option value="TP" [disabled]="TP">TP</option>\r\n                  <option value="Legal" [disabled]="legal">Legal</option>\r\n                  <option value="Finance" [disabled]="finance">Finance</option>--\x3e\r\n                  <ng-container *ngFor="let d of getAllDeptsSelectList, let i = index">\r\n                    <option value="{{d.userDept}}">{{d.userDeptKey}}</option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n\r\n              <div class="col-md-6">\r\n                <label class="font-weight-bold mb-2">Attachment</label>\r\n                <input type="hidden" [(ngModel)]="uploadTicketFile.ticketEnqFile" formControlName="ticketEnquiryFile" />\r\n                <app-file-upload (myEvent)="setFile($event)"\r\n                  [parm]="{fileId:\'ticketEnqFile\',docId:docId4,show:false,fileType:[\'jpeg\',\'jpg\',\'png\',\'pdf\']}"></app-file-upload>\r\n              </div>\r\n\r\n              <div class="col-md-12 mb-4">\r\n                <label class="font-weight-bold mb-2">Remarks<sup>*</sup></label>\r\n                <textarea rows="3" cols="1" class="form-control" formControlName="ticketEnquiryDescription"></textarea>\r\n              </div>\r\n\r\n              <div class="col-md-12 text-center d-none">\r\n                <button class="btn btn-small bg-success text-white" title="Process In Progress"\r\n                  [disabled]="this.forwardTicketForm.invalid" (click)="addMore()">Add</button>\r\n              </div>\r\n            </div>\r\n              <div class="mt-4 text-center mb-2">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                  [disabled]="this.forwardTicketForm.invalid"\r\n                  (click)="addMore(); submitTicketForward()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i>Submit</button>\r\n                <button type="button" class="btn btn-primary" id="cancelBtn" data-dismiss="modal"\r\n                  (click)="closeticketActionPopup()">Cancel</button>\r\n              </div>\r\n            \r\n          </div>\r\n        </form>\r\n\r\n\r\n      </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal show" id="reassign" *ngIf="forwardedListPopup">\r\n  <div class="modal-dialog modal-dialog-centered modal-small ">\r\n    <div class="modal-content">\r\n\r\n\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b>Forwarded Status</b></h3>\r\n        <button type="button" class="close" data-dismiss="modal" (click)="closeticketForwardedListPopup()">&times;</button>\r\n      </div>\r\n\r\n\r\n      <div class="modal-body">\r\n        <table class="table table-bordered misDashTable text-center">\r\n          <thead>\r\n              <tr>\r\n                  <th>Dept</th>\r\n                  <th>Status</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr *ngFor="let fwdlist of ticketForwardedListArr">\r\n                  \x3c!--<td>{{fwdlist.ticketEnquiryTo}}</td>--\x3e\r\n                  <td>{{getDeptName(fwdlist.ticketEnquiryToDepName)}}</td>\r\n                  <td>{{fwdlist.status}}</td>\r\n              </tr>\r\n          </tbody>\r\n        </table>      \r\n      </div>\r\n    </div>\r\n  </div>\r\n </div> \r\n \r\n \r\n <div class="modal show" *ngIf="eFilePopup">\r\n  <div class="modal-dialog modal-lg modal-dialog-centered">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <h3 class="modal-title"><b> File Details With Notes</b></h3>\r\n        <button type="button" class="close" (click)="closeEFilePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n          <div class="card mb-2"  *ngIf="eOfficeFileType == \'efile\' && efilePopupLoading == false">\r\n                <div class="card-body ">\r\n            <div class="row">\r\n              <div class="col-md-6 mb-4">\r\n                  <label class="control-label font-weight-bold">File No</label>\r\n                <span>{{efileData.fileNo}}</span>\r\n              </div>\r\n              <div class="col-md-6 mb-4">\r\n                <label class="control-label font-weight-bold">Created On</label>\r\n                <span>{{efileData.createdOn | date : \'dd-MM-yyyy\'}}</span>\r\n              </div>\r\n              <div class="col-md-12 mb-4">\r\n                <label class="control-label font-weight-bold">Subject</label>  \r\n                <span>{{efileData.subject}}</span>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div> \r\n\r\n        <div class="card mb-2" *ngIf="eOfficeFileType == \'etapal\' && efilePopupLoading == false">\r\n            <div class="card-body ">\r\n          <div class="row">\r\n            <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Document Type</label>  \r\n                <span>{{eTapalData.docType}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received By</label>  \r\n              <span>{{eTapalData.receivedBy}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Received Date</label>  \r\n              <span>{{eTapalData.createdOn | date : \'dd-MM-yyyy\'}}</span>\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Select Addressee</label>  \r\n              <span>{{eTapalData.departmentName}}</span>\r\n            </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Keyword</label>  \r\n            <span>{{eTapalData.captionKey}}</span>\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">File Download</label>\r\n            <span *ngFor="let doclistFile of eTapalData?.docLists">\r\n              <span class=" btn-small mb-2 mr-2"> <app-multi-file-view [Uid]="doclistFile.docUID" ></app-multi-file-view></span>\r\n            </span>\r\n          </div>\r\n          <div class="col-md-12 mb-4">\r\n            <label class="control-label font-weight-bold">Subject</label>\r\n          <span>{{eTapalData.subject}}</span>\r\n          </div>\r\n          </div>\r\n        </div>\r\n    </div> \r\n    <div class=\'text-center\' *ngIf="efilePopupLoading">Loading ...</div>\r\n  </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n<div class="popup-overlay" *ngIf="ticketActionPopup"></div>\r\n<div class="popup-overlay" *ngIf="forwardedListPopup"></div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<div class="popup-overlay" *ngIf="eFilePopup"></div>'},HTpo:function(t,e,n){"use strict";n.r(e),e.default='<div class="d-flex justify-content-between align-items-center">\r\n    <h2>SUPPORT REQUEST ({{ticketParamDeptName}} - {{ticketParamCategoryLabel}})</h2>\r\n    <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n    </div>\r\n<div class="row">\r\n    <div class="col-md-12 ">\r\n        <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n        <div class="table-responsive col-md-12 ">\r\n            \x3c!-- <h2>SUPPORT REQUEST ({{ticketParamDeptName}} - {{ticketParamCategoryLabel}}) - ({{ticketListing.length}})</h2> --\x3e\r\n          \r\n            <table class="table table-bordered text-center tickettable bg-white">\r\n                <thead>\r\n                    <tr class="bg-light  text-size-small text-center">\r\n                        <th>Sr.No.</th>\r\n                        <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n                          <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n                          <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n                        </div>\r\n                      </th>\r\n                    </tr>\r\n                </thead>\r\n                \x3c!-- <thead>\r\n                    <tr>\r\n                    <th>Sr.No.</th>\r\n                    <th class="w-20">Support Request No.</th>\r\n                    <th class="w-5">Department</th>\r\n                    <th class="w-20">Query </th>\r\n                    <th class="w-20">Attachment</th>\r\n                    <th class="w-50"> Remarks</th>\r\n                    <th class="w-10">Created On</th>\r\n                    </tr>\r\n                </thead> --\x3e\r\n                <tbody *ngIf="filterDataArray?.length > 0; else _no_AllData1">\r\n                    <tr *ngFor="let data of filterDataArray | paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo };let i = index">\r\n                      <td class="tabel-text-right">{{((currentPageNo-1)*10)+(i+1) }} </td>\r\n                    <td>{{ data?.ticketNo }}</td>\r\n                    <td>{{getDeptName(data?.concernDeptName)}}</td>\r\n                    <td class="word-break">{{wordWrap(data?.query,40)}}</td>\r\n                    <td>\r\n                        <div *ngIf="data?.attachmentUId;then download_link else no_image_available"></div>\r\n                        <label class="control-label">\r\n                        <ng-template #download_link>\r\n                            <app-multi-file-view [Uid]="data?.attachmentUId" ></app-multi-file-view>\r\n                        </ng-template>\r\n                        <ng-template #no_image_available>\r\n                            --\r\n                        </ng-template>\r\n                        </label>\r\n                    </td>\r\n                    <td class="text-left">{{data.details}}</td>\r\n                    <td  class="text-nowrap">{{data.createdOn | date : \'dd-MM-yyyy\'}}</td>\r\n                    \x3c!--<td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus == \'YES\'; else status_0"> ESCALATED </td>\r\n                    <ng-template #status_0>\r\n                    <td *ngIf="(data.status == \'OPEN\' || data.status == \'FORWARDED\') && data.esclationStatus != \'YES\'; else status_1">\r\n                      OPEN</td>\r\n                      <ng-template #status_1>\r\n                        <td>{{data.status}}</td>\r\n                      </ng-template>\r\n                    </ng-template>--\x3e\r\n                    </tr>\r\n                </tbody>\r\n                <ng-template #_no_AllData1>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td colspan="7" class="red font-weight-bold text-center">No Records Found.</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </ng-template>\r\n            </table> \r\n            <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n                <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n              </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row">    \r\n    <div  class="col-md-12 text-center"> \r\n        <a href="#/mis/dashboard-complaint" title="Back"><button class="btn btn-primary"> Back</button></a></div>\r\n</div>'},HhXg:function(t,e,n){"use strict";n.r(e),e.default=".popDis {\n  border-radius: 0 25px 25px 0;\n}\n\n.box-shadow {\n  padding: 10px;\n  background: #fafafa;\n  margin-top: 10px;\n}\n\n.border-div {\n  border-top-style: solid !important;\n  border: 1px;\n  border-color: #C0C0C0;\n}\n\n.no-padding {\n  padding: 0px;\n}\n\n.leftight-padding {\n  padding: 7px 0px 0px 0px;\n}\n\n.collapse-class a {\n  background: orange !important;\n  padding: 0px 5px;\n  color: #ffffff;\n}\n\n.color-code2 {\n  background-color: #3847f32e;\n}\n\n.color-code1 {\n  background-color: #E5FCF0;\n}\n\n.escalaltion-img {\n  margin-left: 25px;\n}\n\n.misDashTable a {\n  font-size: 12px !important;\n}\n\n.e-office-div {\n  font-size: 14px !important;\n  font-weight: normal;\n}"},MjyU:function(t,e,n){"use strict";n.r(e),e.default=""},QSZ4:function(t,e,n){"use strict";n.r(e),e.default=".popDis {\n  border-radius: 0 25px 25px 0;\n}\n\n.box-shadow {\n  padding: 10px;\n  background: #fafafa;\n  margin-top: 10px;\n}\n\n.border-div {\n  border-top-style: solid !important;\n  border: 1px;\n  border-color: #C0C0C0;\n}\n\n.no-padding {\n  padding: 0px;\n}\n\n.leftight-padding {\n  padding: 7px 0px 0px 0px;\n}\n\n.collapse-class a {\n  background: orange !important;\n  padding: 0px 5px;\n  color: #ffffff;\n}\n\n.color-code2 {\n  background-color: #3847f32e;\n}\n\n.color-code1 {\n  background-color: #E5FCF0;\n}\n\n.escalaltion-img {\n  margin-left: 25px;\n}\n\n.misDashTable a {\n  font-size: 12px !important;\n}\n\n.e-office-div {\n  font-size: 14px !important;\n  font-weight: normal;\n}"},ROBH:function(t,e,n){"use strict";n.r(e);var r=n("mrSG"),i=n("8Y7J"),a=n("SVse"),s=n("iInd"),l=n("s7LF"),o=n("2Vo4"),c=n("rMJA"),d=n("FvaC"),p=n("EUZL");let m=class{constructor(t,e,n,r){this._apiURL=t,this._ticketService=e,this._router=n,this.datePipe=r,this.ticketListing=new Array,this.enquiryFormIsActive=!1,this.docId4=new o.a({}),this.inputJson=new o.a({}),this.ticketForwardArray=new Array,this.uploadedFilesInfo=new Array,this.enquiryModel=new Array,this.TP=!1,this.legal=!1,this.finance=!1,this.assignModel=new Array,this.closedModel=new Array,this.tickets=1,this.ticketOpenedList=new Array,this.reOpenticketArray=new Array,this.openModel=new Array,this.loader=!1,this.getAllDeptsSelectList=new Array,this.searchTicketDept="",this.searchTicketStatus="",this.ticketSearchListing=new Array,this.pendencyListArrTotal=new Array,this.rejectTicketIsActive=!1,this.efileViewAllPopup=!1,this.eOfficeFileType="",this.efilePopupLoading=!1,this.searchTicketQuery="",this.loadingSpinner=!1,this.tableJsonData=new o.a({}),this.paginationCount=10}ngOnInit(){this.fileDonwloadPath=this._apiURL.fileDownloadAPI+"download/",this.uploadTicketFile={},this.uploadedFilesInfo=[];let t=sessionStorage.getItem("userType");sessionStorage.getItem("dept");this.escalationOfficerArr=["TPTEO","FINANCETEO","LEGALTEO","COMPLIANCETEO","ADMINTEO","ITTEO","LEGALOTHTEO"],this.resolvingOfficerArr=["TPTRO","LEGALTRO","FINANCETRO","COMPLIANCETRO","ADMINTRO","ITTRO","LEGALOTHTRO"],this.currentUserType="TICKETOFFICER"==t?"officer":t,this.resolvingOfficerStatus=this.resolvingOfficerArr.includes(this.currentUserType),this.escalationOfficerStatus=this.escalationOfficerArr.includes(this.currentUserType),this.enquiryForm=new l.d({ticketEnquiryFile:new l.c(""),ticketEnquiryDescription:new l.c("",[l.h.required]),ticketFkId:new l.c("")}),this.forwardTicketForm=new l.d({ticketEnquiryTo:new l.c(null,[l.h.required]),ticketEnquiryFile:new l.c(""),ticketEnquiryDescription:new l.c("",[l.h.required]),ticketFkId:new l.c("")}),this.closeTicketForm=new l.d({attachmentId:new l.c(""),remakrs:new l.c("",[l.h.required]),tktCloseId:new l.c,internalRemarks:new l.c("",[l.h.required])}),this.openTicketForm=new l.d({assignTo:new l.c("",[l.h.required]),remarks:new l.c("",[l.h.required]),tktOpenId:new l.c}),this.rejectTicketForm=new l.d({ticketId:new l.c}),this.searchForm=new l.d({searchTicketNumber:new l.c(""),searchTicketDept:new l.c(""),searchTicketStatus:new l.c(""),searchTicketRaiseBy:new l.c(""),concernFromCreatedDate:new l.c(""),concernToCreatedDate:new l.c(""),disposedOnFromDate:new l.c(""),disposedOnToDate:new l.c(""),searchTicketQuery:new l.c("")}),this.getTicketListing(),this.getAllDeptsfunc(),this.getPendencyList(),this.resetForm()}getAllDeptsfunc(){this.getAllDeptsSelectList=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(let t in this.getAllDeptsSelectList)this.getAllDeptsSelectList[t].optdisabled=!1;console.log(this.getAllDeptsSelectList)}getPendencyList(){this.loadingSpinner=!0,console.log("this.pendencyListArrTotal"),console.log(this.pendencyListArrTotal),this._ticketService.getPendencyList().subscribe(t=>{this.loadingSpinner=!1,this.pendencyList=t.data,this.pendencyListArrTotal.total=this.pendencyListArrTotal.disposed=this.pendencyListArrTotal.enquiry=this.pendencyListArrTotal.less15=this.pendencyListArrTotal.between15to30=this.pendencyListArrTotal.greater30=0;for(let e in this.pendencyList)this.pendencyListArrTotal.total+=Number(this.pendencyList[e].total),this.pendencyListArrTotal.disposed+=Number(this.pendencyList[e].disposed),this.pendencyListArrTotal.enquiry+=Number(this.pendencyList[e].enquiry),this.pendencyListArrTotal.less15+=Number(this.pendencyList[e].less15),this.pendencyListArrTotal.between15to30+=Number(this.pendencyList[e].between15to30),this.pendencyListArrTotal.greater30+=Number(this.pendencyList[e].greater30);this.pendencyListArrTotal.disposec_percent=(this.pendencyListArrTotal.disposed/this.pendencyListArrTotal.total*100).toFixed(2)},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})})}pageChanged(t){this.config.currentPage=t}openticketActionPopup(){this.ticketActionPopup=!0}closeticketActionPopup(){this.ticketActionPopup=!1}setFile(t){this.uploadTicketFile[t.fid]=t.docid;let e={docId:t.docid,fname:t.fName};this.uploadedFilesInfo.push(e)}getTicketListing(){this.loadingSpinner=!0,this.ticketListing=[],this.completeFlag="Loading ...",this._ticketService.getAllTickets("AllTicket").subscribe(t=>{this.loadingSpinner=!1,this.ticketListing=t.data,this.filterDataArray=this.ticketListing,this.dataArray=this.ticketListing,this.tableSortFilter(null,null,null,"default")},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})},()=>{this.loadingSpinner=!1,this.ticketListing.length<=0&&(this.completeFlag="No Record Found!")})}takeActionOnTicket(t){this.loadingSpinner=!0,this.forWardClosedOption="",this.ticketClosedOption=!0,this.efileViewAllPopup=!1,this.ticketOpenedList=[],this.ticketForwardArray=[],this.reOpenticketArray=[],this.enquiryForm.reset(),this.forwardTicketForm.reset(),this.closeTicketForm.reset(),this.openTicketForm.reset(),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this._ticketService.getTicketById(t.ticketId).subscribe(e=>{this.loadingSpinner=!1,console.log("resultclick"),console.log(e),this.currentTicketData=e.data,this.currTicketId=e.data.ticketId,this.statusOf=e.data.status,this.isForwared=e.data.forwardStatus,this.esclationStatus=e.data.esclationStatus,this.ticketUniqueNo=e.data.ticketNo,this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,e.data.forwardUserList?e.data.forwardUserList.forEach(t=>{this.currentUserType==t.ticketEnquiryTo&&(this.forWardClosedOption=t.status),"YES"!=this.esclationStatus&&null==t.esclationStatus&&("CLOSED"!=t.status&&(this.ticketClosedOption=!1),"CLOSED"==t.status&&(this.ticketOpenedOption=!0,this.ticketOpenedList.push({tokey:t.ticketEnquiryTo,to:t.ticketEnquiryToDepName,enabled:""}))),"YES"==this.esclationStatus&&"YES"==t.esclationStatus&&("CLOSED"!=t.status&&(this.ticketClosedOption=!1),"CLOSED"==t.status&&(this.ticketOpenedOption=!0,this.ticketOpenedList.push({to:t.ticketEnquiryToDepName,enabled:""})))}):this.forWardClosedOption="OPEN",this.getSubmittedEnquiry(this.currTicketId),this.getForwardedList(this.currTicketId),this.getClosedList(this.currTicketId),this.openticketActionPopup(),console.log("efilerera"),this.getReraEfile(t.ticketId)},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}),this.getAllDeptsfunc()}ticketAction(t){"enquiry"==t.target.value?(this.enquiryFormIsActive=!0,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"forwardticket"==t.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!0,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"closeticket"==t.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!0,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"openticket"==t.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"rejectticket"==t.target.value&&(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!0,this.ticketForwardArray=[],this.reOpenticketArray=[])}addMore(){let t;t=this.forwardTicketForm.controls.ticketEnquiryFile.value?this.uploadedFilesInfo.find(t=>t.docId===this.forwardTicketForm.controls.ticketEnquiryFile.value).fname:"";let e={ticketFrdFkId:this.forwardTicketForm.controls.ticketFkId.value,ticketEnquiryTo:this.forwardTicketForm.controls.ticketEnquiryTo.value,attachmentId:this.forwardTicketForm.controls.ticketEnquiryFile.value,remakrs:this.forwardTicketForm.controls.ticketEnquiryDescription.value,fileName:t};this.ticketForwardArray.push(e),this.ticketForwardArray&&this.ticketForwardArray.forEach(t=>{for(let e in this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].userDept==t.ticketEnquiryTo&&(this.getAllDeptsSelectList[e].optdisabled=!0)}),this.removedKeyword=["ticketFkId"],this.resetterOfForm(this.forwardTicketForm.controls,this.removedKeyword,this.forwardTicketForm),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this.docId4.next({show:!1})}addOpenTicketMore(){let t={ticketFkId:this.openTicketForm.controls.tktOpenId.value,assignTo:this.openTicketForm.controls.assignTo.value,remarks:this.openTicketForm.controls.remarks.value,status:"RE OPEN"};this.reOpenticketArray.push(t),this.reOpenticketArray&&this.reOpenticketArray.forEach(t=>{this.ticketOpenedList.forEach((e,n)=>{t.assignTo==e.to&&(this.ticketOpenedList[n].enabled=!0)})}),this.removedKeyword=["tktOpenId"],this.resetterOfForm(this.openTicketForm.controls,this.removedKeyword,this.openTicketForm),this.openTicketForm.controls.assignTo.setValue("")}deleteForwardTicketByIdId(t){if(this.ticketForwardArray.splice(t,1),this.ticketForwardArray.length>0)for(let e in this.getAllDeptsSelectList)this.ticketForwardArray.forEach(t=>{this.getAllDeptsSelectList[e].userDept==t.ticketEnquiryTo?this.getAllDeptsSelectList[e].optdisabled=!0:this.getAllDeptsSelectList[e].optdisabled=!1});else for(let e in this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].optdisabled=!1}deleteOpenTicketById(t){this.reOpenticketArray.splice(t,1),this.ticketOpenedList&&this.ticketOpenedList.forEach((t,e)=>{this.reOpenticketArray.length>0?this.reOpenticketArray.forEach(n=>{n.assignTo==t.to?this.ticketOpenedList[e].enabled=!0:this.ticketOpenedList[e].enabled=""}):this.ticketOpenedList[e].enabled=""})}submitTicketEnquiry(){this.loadingSpinner=!0,this.loader=!0;let t={ticketFkId:this.enquiryForm.controls.ticketFkId.value,attachmentId:this.enquiryForm.controls.ticketEnquiryFile.value,remarks:this.enquiryForm.controls.ticketEnquiryDescription.value,enquiryFlag:"ENQUIRY"};this._ticketService.saveTicketEnquiry(t).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.enquiryForm.reset(),this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Enquiry has been raised successfully",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}submitTicketForward(){this.loadingSpinner=!0,this.loader=!0,this._ticketService.saveTicketForward(this.ticketForwardArray).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Support Request has been forwarded to the concern Department(s).",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}submitTicketClose(){this.loadingSpinner=!0,this.loader=!0,"officer"!=this.currentUserType&&(this.closeTicketForm.value.deptName=this.currentUserType),this._ticketService.closeTicket(this.closeTicketForm.value,this.currentUserType).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Support Request has been closed successfully.",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}getSubmittedEnquiry(t){this.loadingSpinner=!0,this._ticketService.getTotalEnquiryIdOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.enquiryModel=t.data:this.enquiryModel=[]},t=>{this.loadingSpinner=!1,this.enquiryModel=[]})}getForwardedList(t){this.loadingSpinner=!0,this._ticketService.getTotalForwardedOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.assignModel=t.data:this.assignModel=[]},t=>{this.loadingSpinner=!1,this.assignModel=[]})}getClosedList(t){this.loadingSpinner=!0,this._ticketService.getTotalClosedOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.closedModel=t.data:this.closedModel=[]},t=>{this.loadingSpinner=!1,this.closedModel=[]})}getOpenTicketList(t){this.loadingSpinner=!0,this._ticketService.getTotalOpenOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.openModel=t.data:this.openModel=[]},t=>{this.loadingSpinner=!1,this.openModel=[]})}resetterOfForm(t,e,n){Object.keys(t).forEach(t=>{e.includes(t)||n.controls[t].reset()})}submitTicketOpen(){this.loadingSpinner=!0,this.loader=!0,this._ticketService.openTicket(this.reOpenticketArray,this.currentUserType).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.reOpenticketArray=[],this.inputJson.next({popShow:!0,popMsg:"Support Request has been Opened successfully.",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}searchFormSubmit(){this.loadingSpinner=!0,this.tickets=1,this.searchTicketNumber=this.searchForm.controls.searchTicketNumber.value,this.searchTicketDept=this.searchForm.controls.searchTicketDept.value,this.searchTicketStatus=this.searchForm.controls.searchTicketStatus.value,this.searchTicketRaiseBy=this.searchForm.controls.searchTicketRaiseBy.value,this.concernFromCreatedDate=this.searchForm.controls.concernFromCreatedDate.value,this.concernToCreatedDate=this.searchForm.controls.concernToCreatedDate.value,this.disposedOnFromDate=this.searchForm.controls.disposedOnFromDate.value,this.disposedOnToDate=this.searchForm.controls.disposedOnToDate.value,this.searchTicketQuery=this.searchForm.controls.searchTicketQuery.value,null==this.searchTicketNumber&&(this.searchTicketNumber=""),null==this.searchTicketDept&&(this.searchTicketDept=""),null==this.searchTicketStatus&&(this.searchTicketStatus=""),null==this.searchTicketRaiseBy&&(this.searchTicketRaiseBy=""),null==this.searchTicketQuery&&(this.searchTicketQuery=""),this.concernFromCreatedDate?this.concernFromCreatedDate=this.datePipe.transform(this.concernFromCreatedDate,"yyyy-MM-dd"):this.concernFromCreatedDate="",this.concernToCreatedDate?this.concernToCreatedDate=this.datePipe.transform(this.concernToCreatedDate,"yyyy-MM-dd"):this.concernToCreatedDate="",this.disposedOnFromDate?this.disposedOnFromDate=this.datePipe.transform(this.disposedOnFromDate,"yyyy-MM-dd"):this.disposedOnFromDate="",this.disposedOnToDate?this.disposedOnToDate=this.datePipe.transform(this.disposedOnToDate,"yyyy-MM-dd"):this.disposedOnToDate="",this.completeFlag="Loading ...",this.ticketListing=[],this._ticketService.getAllTickets(this.currentUserType).subscribe(t=>{if(this.loadingSpinner=!1,"officer"!=this.currentUserType?this.ticketListing=t.data.ticket:this.ticketListing=t.data,this.ticketSearchListing=[],""!=this.searchTicketNumber||""!=this.searchTicketDept||""!=this.searchTicketStatus||""!=this.searchTicketRaiseBy||""!=this.concernFromCreatedDate||""!=this.concernToCreatedDate||""!=this.disposedOnFromDate||""!=this.disposedOnToDate||""!=this.searchTicketQuery)for(let e in this.ticketListing){let t=[];if("OPEN"!=this.ticketListing[e].status&&"FORWARDED"!=this.ticketListing[e].status||"YES"!=this.ticketListing[e].esclationStatus||(this.ticketListing[e].status="ESCALATED"),"OPEN"!=this.ticketListing[e].status&&"FORWARDED"!=this.ticketListing[e].status||null!=this.ticketListing[e].esclationStatus||(this.ticketListing[e].status="OPEN"),this.searchTicketRaiseBy)if(null!=this.ticketListing[e].createdUserName&&""!=this.ticketListing[e].createdUserName){let n="\\b"+this.searchTicketRaiseBy.trim().toLowerCase()+"\\b";this.ticketListing[e].createdUserName.toLowerCase().match(new RegExp(n,"g"))?(console.log(this.ticketListing[e].createdUserName),t.push(!0)):t.push(!1)}else t.push(!1);this.searchTicketNumber&&(this.searchTicketNumber.trim()==this.ticketListing[e].ticketNo?t.push(!0):t.push(!1)),this.searchTicketDept&&(this.searchTicketDept.trim()==this.ticketListing[e].concernDeptName?t.push(!0):t.push(!1)),this.concernFromCreatedDate&&(this.concernFromCreatedDate.trim()<=this.datePipe.transform(this.ticketListing[e].createdOn,"yyyy-MM-dd")?t.push(!0):t.push(!1)),this.concernToCreatedDate&&(this.concernToCreatedDate.trim()>=this.datePipe.transform(this.ticketListing[e].createdOn,"yyyy-MM-dd")?t.push(!0):t.push(!1)),this.disposedOnFromDate&&(this.ticketListing[e].disposedOn&&this.disposedOnFromDate.trim()<=this.datePipe.transform(this.ticketListing[e].disposedOn,"yyyy-MM-dd")?t.push(!0):t.push(!1)),this.disposedOnToDate&&(this.ticketListing[e].disposedOn&&this.disposedOnToDate.trim()>=this.datePipe.transform(this.ticketListing[e].disposedOn,"yyyy-MM-dd")?t.push(!0):t.push(!1)),this.searchTicketQuery&&(this.searchTicketQuery.trim()==this.ticketListing[e].query_master?t.push(!0):t.push(!1)),this.searchTicketStatus&&(this.searchTicketStatus.trim()==this.ticketListing[e].status?t.push(!0):t.push(!1)),t.every(t=>1==t)&&this.ticketSearchListing.push(this.ticketListing[e])}else this.ticketSearchListing=this.ticketListing;this.ticketSearchListing.length<=0?(this.ticketListing=[],this.completeFlag="No Support Request Found."):this.ticketListing=this.ticketSearchListing,this.filterDataArray=this.ticketListing,this.dataArray=this.ticketListing,this.tableSortFilter(null,null,null,"default")},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})},()=>{this.ticketListing.length<=0&&(this.completeFlag="No Support Request Found.")})}resetForm(){this.searchForm.reset(),this.searchForm.markAsPristine(),this.searchForm.markAsUntouched(),this.getTicketListing()}forwardedListFunc(t){this.forwardedListPopup=!0,this.ticketForwardedListArr=t}closeticketForwardedListPopup(){this.ticketForwardedListArr=[],this.forwardedListPopup=!1}rejectTicket(){this.loadingSpinner=!0,this.loader=!0,this._ticketService.rejectTicket(this.rejectTicketForm.value).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Support Request has been Rejected.",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}getDeptName(t){if(t){let e=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(let n in e)if(e[n].userDept==t)return e[n].userDeptKey;return""}}colorCode(t){let e;return e=t?"color-code2":"color-code1",e}pendencyTableFunc(t,e){console.log("inside list func"),sessionStorage.setItem("ticketParamDept",t),sessionStorage.setItem("ticketParamCategory",e),this._router.navigate(["ticket/ticket-pendency-list"])}getReraEfile(t){this.loadingSpinner=!0,this.efileList=[],this._ticketService.getReraEfile(t).subscribe(t=>{if(this.loadingSpinner=!1,console.log("eFile"),console.log(t),t.data.length>0)for(let e=0;e<t.data.length;e++)this.efileList.push({fileNo:t.data[e].efileTapalMasterModel.fileNo,subject:t.data[e].efileTapalMasterModel.subject,fileId:t.data[e].efileTapalMasterModel.id,etapalfileNo:t.data[e].detailModel.efileNo,receivedDate:t.data[e].detailModel.receivedDate,docLists:t.data[e].detailModel.docLists,outwordNo:t.data[e].associateModel.outwordNo,eTapalfileId:t.data[e].detailModel.id,docAssociateLists:t.data[e].associateModel.docAssociateLists})},t=>{this.loadingSpinner=!1})}takeActionOnEFileClick(t,e){this.loadingSpinner=!0,this.efileData="",this.eTapalData="",this.eOfficeFileType=e,"efile"==e?(this.efileId=t,this.efileViewAllPopup=!0):"etapal"==e&&(this.efilePopupLoading=!0,this.efileViewAllPopup=!1,this._ticketService.getReraETapalNoData(t).subscribe(t=>{this.loadingSpinner=!1,this.eTapalData=t.data,console.log(t),console.log(e),this.efilePopupLoading=!1},t=>{this.loadingSpinner=!1,this.efilePopupLoading=!1}),this.openEFilePopup())}openEFilePopup(){this.eFilePopup=!0}closeEFilePopup(){this.eFilePopup=!1}exportToExcel(){const t=p.utils.table_to_sheet(this.table_listing.nativeElement),e=p.utils.book_new();p.utils.book_append_sheet(e,t,"Support Requests List"),p.writeFile(e,"Support_Requests_list.xlsx")}tableSortFilter(t,e,n,r){this.sortData="default"==r?{sortType:"DESC",key:"createdOn",typ:"date",sort:r}:{sortType:t,key:e,typ:n,sort:r};let i={headers:[{key:"ticketNo",label:"Support Request No.",type:"string"},{key:"createdUserName",label:"Applicant Name",type:"string"},{key:"concernDeptName",label:"Concern",type:"string"},{key:"query",label:"Query",type:"string"},{key:"details",label:"Remarks",type:"string"},{key:"lattitude",label:"Source",type:"string"},{key:"createdOn",label:"Created On",type:"date"},{key:"disposedOn",label:"Disposed On",type:"date"}],actualArray:this.ticketListing,sortData:this.sortData};this.tableHeader=i.headers,this.tableJsonData.next({exportJson:i}),console.log(i)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}};m.ctorParameters=()=>[{type:d.a},{type:c.a},{type:s.e},{type:a.e}],r.b([Object(i.kb)("table_listing",{static:!1})],m.prototype,"table_listing",void 0),m=r.b([Object(i.n)({selector:"app-ticket-listing",template:r.c(n("5B9t")).default,styles:[r.c(n("QSZ4")).default]})],m);let h=class{constructor(t,e,n){this._apiURL=t,this._ticketService=e,this._router=n,this.ticketListing=new Array,this.enquiryFormIsActive=!1,this.docId4=new o.a({}),this.inputJson=new o.a({}),this.ticketForwardArray=new Array,this.uploadedFilesInfo=new Array,this.enquiryModel=new Array,this.TP=!1,this.legal=!1,this.finance=!1,this.efileViewAllPopup=!1,this.assignModel=new Array,this.closedModel=new Array,this.tickets=1,this.ticketOpenedList=new Array,this.reOpenticketArray=new Array,this.openModel=new Array,this.loader=!1,this.getAllDeptsSelectList=new Array,this.searchTicketDept="",this.searchTicketStatus="",this.ticketSearchListing=new Array,this.pendencyListArrTotal=new Array,this.rejectTicketIsActive=!1,this.eOfficeFileType="",this.efilePopupLoading=!1,this.searchTicketQuery="",this.loadingSpinner=!1,this.tableJsonData=new o.a({}),this.paginationCount=10}ngOnInit(){this.fileDonwloadPath=this._apiURL.fileDownloadAPI+"download/",this.uploadTicketFile={},this.uploadedFilesInfo=[];let t=sessionStorage.getItem("userType");sessionStorage.getItem("dept");this.escalationOfficerArr=["TPTEO","FINANCETEO","LEGALTEO","COMPLIANCETEO","ADMINTEO","ITTEO","LEGALOTHTEO"],this.resolvingOfficerArr=["TPTRO","LEGALTRO","FINANCETRO","COMPLIANCETRO","ADMINTRO","ITTRO","LEGALOTHTRO"],this.currentUserType="TICKETOFFICER"==t?"officer":t,this.resolvingOfficerStatus=this.resolvingOfficerArr.includes(this.currentUserType),this.escalationOfficerStatus=this.escalationOfficerArr.includes(this.currentUserType),this.enquiryForm=new l.d({ticketEnquiryFile:new l.c(""),ticketEnquiryDescription:new l.c("",[l.h.required]),ticketFkId:new l.c("")}),this.forwardTicketForm=new l.d({ticketEnquiryTo:new l.c(null,[l.h.required]),ticketEnquiryFile:new l.c(""),ticketEnquiryDescription:new l.c("",[l.h.required]),ticketFkId:new l.c("")}),this.closeTicketForm=new l.d({attachmentId:new l.c(""),remakrs:new l.c("",[l.h.required]),tktCloseId:new l.c,internalRemarks:new l.c("",[l.h.required])}),this.openTicketForm=new l.d({assignTo:new l.c("",[l.h.required]),remarks:new l.c("",[l.h.required]),tktOpenId:new l.c}),this.rejectTicketForm=new l.d({ticketId:new l.c}),this.searchForm=new l.d({searchTicketNumber:new l.c(""),searchTicketDept:new l.c(""),searchTicketStatus:new l.c(""),searchTicketRaiseBy:new l.c(""),searchTicketQuery:new l.c("")}),this.getTicketListing(),this.getAllDeptsfunc(),this.getPendencyList(),this.resetForm()}getAllDeptsfunc(){this.getAllDeptsSelectList=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(let t in this.getAllDeptsSelectList)this.getAllDeptsSelectList[t].optdisabled=!1;console.log(this.getAllDeptsSelectList)}getPendencyList(){this.loadingSpinner=!0,console.log("this.pendencyListArrTotal"),console.log(this.pendencyListArrTotal),this._ticketService.getPendencyList().subscribe(t=>{this.loadingSpinner=!1,this.pendencyList=t.data,this.pendencyListArrTotal.total=this.pendencyListArrTotal.disposed=this.pendencyListArrTotal.enquiry=this.pendencyListArrTotal.less15=this.pendencyListArrTotal.between15to30=this.pendencyListArrTotal.greater30=0;for(let e in this.pendencyList)this.pendencyListArrTotal.total+=Number(this.pendencyList[e].total),this.pendencyListArrTotal.disposed+=Number(this.pendencyList[e].disposed),this.pendencyListArrTotal.enquiry+=Number(this.pendencyList[e].enquiry),this.pendencyListArrTotal.less15+=Number(this.pendencyList[e].less15),this.pendencyListArrTotal.between15to30+=Number(this.pendencyList[e].between15to30),this.pendencyListArrTotal.greater30+=Number(this.pendencyList[e].greater30);this.pendencyListArrTotal.disposec_percent=(this.pendencyListArrTotal.disposed/this.pendencyListArrTotal.total*100).toFixed(2)},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})})}pageChanged(t){this.config.currentPage=t}openticketActionPopup(){this.ticketActionPopup=!0}closeticketActionPopup(){this.ticketActionPopup=!1}setFile(t){this.uploadTicketFile[t.fid]=t.docid;let e={docId:t.docid,fname:t.fName};this.uploadedFilesInfo.push(e)}getTicketListing(){this.loadingSpinner=!0,this.ticketListing=[],this.completeFlag="Loading ...",this._ticketService.getTicketsTaskList(this.currentUserType).subscribe(t=>{this.loadingSpinner=!1,this.ticketListing=t.data.ticket,this.filterDataArray=this.ticketListing,this.dataArray=this.ticketListing,this.tableSortFilter(null,null,null,"default")},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})},()=>{this.loadingSpinner=!1,this.ticketListing.length<=0&&(this.completeFlag="No Record Found!")})}takeActionOnTicket(t){this.loadingSpinner=!0,this.forWardClosedOption="",this.ticketClosedOption=!0,this.efileViewAllPopup=!1,this.ticketOpenedList=[],this.ticketForwardArray=[],this.reOpenticketArray=[],this.enquiryForm.reset(),this.forwardTicketForm.reset(),this.closeTicketForm.reset(),this.openTicketForm.reset(),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this._ticketService.getTicketById(t.ticketId).subscribe(e=>{this.loadingSpinner=!1,console.log("resultclick"),console.log(e),this.currentTicketData=e.data,this.currTicketId=e.data.ticketId,this.statusOf=e.data.status,this.isForwared=e.data.forwardStatus,this.esclationStatus=e.data.esclationStatus,this.ticketUniqueNo=e.data.ticketNo,this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,e.data.forwardUserList?e.data.forwardUserList.forEach(t=>{this.currentUserType==t.ticketEnquiryTo&&(this.forWardClosedOption=t.status),"YES"!=this.esclationStatus&&null==t.esclationStatus&&("CLOSED"!=t.status&&(this.ticketClosedOption=!1),"CLOSED"==t.status&&(this.ticketOpenedOption=!0,this.ticketOpenedList.push({tokey:t.ticketEnquiryTo,to:t.ticketEnquiryToDepName,enabled:""}))),"YES"==this.esclationStatus&&"YES"==t.esclationStatus&&("CLOSED"!=t.status&&(this.ticketClosedOption=!1),"CLOSED"==t.status&&(this.ticketOpenedOption=!0,this.ticketOpenedList.push({to:t.ticketEnquiryToDepName,enabled:""})))}):this.forWardClosedOption="OPEN",this.getSubmittedEnquiry(this.currTicketId),this.getForwardedList(this.currTicketId),this.getClosedList(this.currTicketId),this.openticketActionPopup(),this.getReraEfile(t.ticketId)},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})}),this.getAllDeptsfunc()}ticketAction(t){"enquiry"==t.target.value?(this.enquiryFormIsActive=!0,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"forwardticket"==t.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!0,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"closeticket"==t.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!0,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"openticket"==t.target.value?(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!1,this.ticketForwardArray=[],this.reOpenticketArray=[]):"rejectticket"==t.target.value&&(this.enquiryFormIsActive=!1,this.forwardTicketFormIsActive=!1,this.closeTicketFormIsActive=!1,this.rejectTicketIsActive=!0,this.ticketForwardArray=[],this.reOpenticketArray=[])}addMore(){let t;t=this.forwardTicketForm.controls.ticketEnquiryFile.value?this.uploadedFilesInfo.find(t=>t.docId===this.forwardTicketForm.controls.ticketEnquiryFile.value).fname:"";let e={ticketFrdFkId:this.forwardTicketForm.controls.ticketFkId.value,ticketEnquiryTo:this.forwardTicketForm.controls.ticketEnquiryTo.value,attachmentId:this.forwardTicketForm.controls.ticketEnquiryFile.value,remakrs:this.forwardTicketForm.controls.ticketEnquiryDescription.value,fileName:t};this.ticketForwardArray.push(e),this.ticketForwardArray&&this.ticketForwardArray.forEach(t=>{for(let e in this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].userDept==t.ticketEnquiryTo&&(this.getAllDeptsSelectList[e].optdisabled=!0)}),this.removedKeyword=["ticketFkId"],this.resetterOfForm(this.forwardTicketForm.controls,this.removedKeyword,this.forwardTicketForm),this.forwardTicketForm.controls.ticketEnquiryTo.setValue(""),this.docId4.next({show:!1})}addOpenTicketMore(){let t={ticketFkId:this.openTicketForm.controls.tktOpenId.value,assignTo:this.openTicketForm.controls.assignTo.value,remarks:this.openTicketForm.controls.remarks.value,status:"RE OPEN"};this.reOpenticketArray.push(t),this.reOpenticketArray&&this.reOpenticketArray.forEach(t=>{this.ticketOpenedList.forEach((e,n)=>{t.assignTo==e.to&&(this.ticketOpenedList[n].enabled=!0)})}),this.removedKeyword=["tktOpenId"],this.resetterOfForm(this.openTicketForm.controls,this.removedKeyword,this.openTicketForm),this.openTicketForm.controls.assignTo.setValue("")}deleteForwardTicketByIdId(t){if(this.ticketForwardArray.splice(t,1),this.ticketForwardArray.length>0)for(let e in this.getAllDeptsSelectList)this.ticketForwardArray.forEach(t=>{this.getAllDeptsSelectList[e].userDept==t.ticketEnquiryTo?this.getAllDeptsSelectList[e].optdisabled=!0:this.getAllDeptsSelectList[e].optdisabled=!1});else for(let e in this.getAllDeptsSelectList)this.getAllDeptsSelectList[e].optdisabled=!1}deleteOpenTicketById(t){this.reOpenticketArray.splice(t,1),this.ticketOpenedList&&this.ticketOpenedList.forEach((t,e)=>{this.reOpenticketArray.length>0?this.reOpenticketArray.forEach(n=>{n.assignTo==t.to?this.ticketOpenedList[e].enabled=!0:this.ticketOpenedList[e].enabled=""}):this.ticketOpenedList[e].enabled=""})}submitTicketEnquiry(){this.loadingSpinner=!0,this.loader=!0;let t={ticketFkId:this.enquiryForm.controls.ticketFkId.value,attachmentId:this.enquiryForm.controls.ticketEnquiryFile.value,remarks:this.enquiryForm.controls.ticketEnquiryDescription.value,enquiryFlag:"ENQUIRY"};this._ticketService.saveTicketEnquiry(t).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.enquiryForm.reset(),this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Enquiry has been raised successfully",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}submitTicketForward(){this.loadingSpinner=!0,this.loader=!0,this._ticketService.saveTicketForward(this.ticketForwardArray).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Support Request has been forwarded to the concern Department(s).",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}submitTicketClose(){this.loadingSpinner=!0,this.loader=!0,"officer"!=this.currentUserType&&(this.closeTicketForm.value.deptName=this.currentUserType),this._ticketService.closeTicket(this.closeTicketForm.value,this.currentUserType).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Support Request has been closed successfully.",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}getSubmittedEnquiry(t){this.loadingSpinner=!0,this._ticketService.getTotalEnquiryIdOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.enquiryModel=t.data:this.enquiryModel=[]},t=>{this.loadingSpinner=!1,this.enquiryModel=[]})}getForwardedList(t){this.loadingSpinner=!0,this._ticketService.getTotalForwardedOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.assignModel=t.data:this.assignModel=[]},t=>{this.loadingSpinner=!1,this.assignModel=[]})}getClosedList(t){this.loadingSpinner=!0,this._ticketService.getTotalClosedOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.closedModel=t.data:this.closedModel=[]},t=>{this.loadingSpinner=!1,this.closedModel=[]})}getOpenTicketList(t){this.loadingSpinner=!0,this._ticketService.getTotalOpenOfData(t).subscribe(t=>{this.loadingSpinner=!1,t.data?this.openModel=t.data:this.openModel=[]},t=>{this.loadingSpinner=!1,this.openModel=[]})}resetterOfForm(t,e,n){Object.keys(t).forEach(t=>{e.includes(t)||n.controls[t].reset()})}submitTicketOpen(){this.loadingSpinner=!0,this.loader=!0,this._ticketService.openTicket(this.reOpenticketArray,this.currentUserType).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.reOpenticketArray=[],this.inputJson.next({popShow:!0,popMsg:"Support Request has been Opened successfully.",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}searchFormSubmit(){this.loadingSpinner=!0,this.tickets=1,this.searchTicketNumber=this.searchForm.controls.searchTicketNumber.value,this.searchTicketDept=this.searchForm.controls.searchTicketDept.value,this.searchTicketStatus=this.searchForm.controls.searchTicketStatus.value,this.searchTicketRaiseBy=this.searchForm.controls.searchTicketRaiseBy.value,this.searchTicketQuery=this.searchForm.controls.searchTicketQuery.value,null==this.searchTicketNumber&&(this.searchTicketNumber=""),null==this.searchTicketDept&&(this.searchTicketDept=""),null==this.searchTicketStatus&&(this.searchTicketStatus=""),null==this.searchTicketRaiseBy&&(this.searchTicketRaiseBy=""),null==this.searchTicketQuery&&(this.searchTicketQuery=""),this.completeFlag="Loading ...",this.ticketListing=[],this._ticketService.getTicketsTaskList(this.currentUserType).subscribe(t=>{if(this.loadingSpinner=!1,this.ticketListing=t.data.ticket,console.log("this.ticketListing"),console.log(this.ticketListing),this.ticketSearchListing=[],""!=this.searchTicketNumber||""!=this.searchTicketDept||""!=this.searchTicketStatus||""!=this.searchTicketRaiseBy||""!=this.searchTicketQuery)for(let e in this.ticketListing){let t=[];if("OPEN"!=this.ticketListing[e].status&&"FORWARDED"!=this.ticketListing[e].status||"YES"!=this.ticketListing[e].esclationStatus||(this.ticketListing[e].status="ESCALATED"),"OPEN"!=this.ticketListing[e].status&&"FORWARDED"!=this.ticketListing[e].status||null!=this.ticketListing[e].esclationStatus||(this.ticketListing[e].status="OPEN"),this.searchTicketRaiseBy)if(null!=this.ticketListing[e].createdUserName&&""!=this.ticketListing[e].createdUserName){let n="\\b"+this.searchTicketRaiseBy.trim().toLowerCase()+"\\b";this.ticketListing[e].createdUserName.toLowerCase().match(new RegExp(n,"g"))?(console.log(this.ticketListing[e].createdUserName),t.push(!0)):t.push(!1)}else t.push(!1);this.searchTicketNumber&&(this.searchTicketNumber.trim()==this.ticketListing[e].ticketNo?t.push(!0):t.push(!1)),this.searchTicketDept&&(this.searchTicketDept.trim()==this.ticketListing[e].concernDeptName?t.push(!0):t.push(!1)),this.searchTicketQuery&&(this.searchTicketQuery.trim()==this.ticketListing[e].query_master?t.push(!0):t.push(!1)),this.searchTicketStatus&&(this.searchTicketStatus.trim()==this.ticketListing[e].status?t.push(!0):t.push(!1)),t.every(t=>1==t)&&this.ticketSearchListing.push(this.ticketListing[e])}else this.ticketSearchListing=this.ticketListing;console.log("this.ticketSearchListing"),console.log(this.ticketSearchListing),this.ticketSearchListing.length<=0?(this.ticketListing=[],this.completeFlag="No Support Request Found."):this.ticketListing=this.ticketSearchListing,this.filterDataArray=this.ticketListing,this.dataArray=this.ticketListing,this.tableSortFilter(null,null,null,"default")},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""})},()=>{this.loadingSpinner=!1,this.ticketListing.length<=0&&(this.completeFlag="No Support Request Found.")})}resetForm(){this.searchForm.reset(),this.searchForm.markAsPristine(),this.searchForm.markAsUntouched(),this.getTicketListing()}forwardedListFunc(t){this.forwardedListPopup=!0,this.ticketForwardedListArr=t}closeticketForwardedListPopup(){this.ticketForwardedListArr=[],this.forwardedListPopup=!1}rejectTicket(){this.loadingSpinner=!0,this.loader=!0,this._ticketService.rejectTicket(this.rejectTicketForm.value).subscribe(t=>{this.loadingSpinner=!1,this.loader=!1,this.getTicketListing(),this.closeticketActionPopup(),this.inputJson.next({popShow:!0,popMsg:"Support Request has been Rejected.",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1})}getDeptName(t){if(t){let e=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(let n in e)if(e[n].userDept==t)return e[n].userDeptKey;return""}}colorCode(t){let e;return e=t?"color-code2":"color-code1",e}pendencyTableFunc(t,e){console.log("inside list func"),sessionStorage.setItem("ticketParamDept",t),sessionStorage.setItem("ticketParamCategory",e),this._router.navigate(["ticket/ticket-pendency-list"])}getReraEfile(t){this.loadingSpinner=!0,this.efileList=[],this._ticketService.getReraEfile(t).subscribe(t=>{if(this.loadingSpinner=!1,console.log("eFile"),console.log(t),t.data.length>0)for(let e=0;e<t.data.length;e++)this.efileList.push({fileNo:t.data[e].efileTapalMasterModel.fileNo,subject:t.data[e].efileTapalMasterModel.subject,fileId:t.data[e].detailModel.id,etapalfileNo:t.data[e].detailModel.efileNo,receivedDate:t.data[e].detailModel.receivedDate,docLists:t.data[e].detailModel.docLists,outwordNo:t.data[e].associateModel.outwordNo,eTapalfileId:t.data[e].detailModel.id,docAssociateLists:t.data[e].associateModel.docAssociateLists})},t=>{this.loadingSpinner=!1})}takeActionOnEFileClick(t,e){this.loadingSpinner=!0,this.efileData="",this.eTapalData="",this.eOfficeFileType=e,"efile"==e?(this.efileId=t,this.efileViewAllPopup=!0):"etapal"==e&&(this.efilePopupLoading=!0,this.efileViewAllPopup=!1,this._ticketService.getReraETapalNoData(t).subscribe(t=>{this.loadingSpinner=!1,this.eTapalData=t.data,console.log(t),console.log(e),this.efilePopupLoading=!1},t=>{this.loadingSpinner=!1,this.efilePopupLoading=!1}),this.openEFilePopup())}openEFilePopup(){this.eFilePopup=!0}closeEFilePopup(){this.eFilePopup=!1}exportToExcel(){const t=p.utils.table_to_sheet(this.table_listing.nativeElement),e=p.utils.book_new();p.utils.book_append_sheet(e,t,"Support Requests Task List"),p.writeFile(e,"Support_Requests_task_list.xlsx")}tableSortFilter(t,e,n,r){this.sortData="default"==r?{sortType:"DESC",key:"createdOn",typ:"date",sort:r}:{sortType:t,key:e,typ:n,sort:r};let i={headers:[{key:"ticketNo",label:"Support Request No.",type:"string"},{key:"createdUserName",label:"Applicant Name",type:"string"},{key:"concernDeptName",label:"Concern",type:"string"},{key:"query",label:"Query",type:"string"},{key:"details",label:"Remarks",type:"string"},{key:"lattitude",label:"Source",type:"string"},{key:"createdOn",label:"Created On",type:"date"}],actualArray:this.ticketListing,sortData:this.sortData};this.tableHeader=i.headers,this.tableJsonData.next({exportJson:i}),console.log(i)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}};h.ctorParameters=()=>[{type:d.a},{type:c.a},{type:s.e}],r.b([Object(i.kb)("table_listing",{static:!1})],h.prototype,"table_listing",void 0),h=r.b([Object(i.n)({selector:"app-ticket-tasklist",template:r.c(n("FYaX")).default,styles:[r.c(n("HhXg")).default]})],h);let u=class{constructor(t){this._ticketService=t,this.loader=!1,this.ticketListing=[],this.tableJsonData=new o.a({}),this.paginationCount=10,this.wordWrap=(t,e)=>{var n="\n";let r="";for(;t.length>e;){let i=!1;for(let a=e-1;a>=0;a--)if(this.testWhite(t.charAt(a))){r+=[t.slice(0,a),n].join(""),t=t.slice(a+1),i=!0;break}i||(r+=[t.slice(0,e),n].join(""),t=t.slice(e))}return r+t}}ngOnInit(){this.ticketParamDept=sessionStorage.getItem("ticketParamDept"),this.ticketParamCategory=sessionStorage.getItem("ticketParamCategory"),this.ticketParamCategoryLabel=sessionStorage.getItem("ticketParamCategoryLabel"),this.ticketParamCategoryIfDept=sessionStorage.getItem("ticketParamCategoryIfDept"),"TCO"==this.ticketParamDept?this.ticketParamDeptName="Ticket Controlling Officer":1==this.ticketParamCategoryIfDept?this.ticketParamDeptName=this.getDeptName(this.ticketParamDept):this.ticketParamDeptName=this.ticketParamDept,this.pendencyList()}pendencyList(){console.log("a"+this.ticketParamDept),console.log("b"+this.ticketParamCategory),this.loader=!0,this._ticketService.getPendencyListing(this.ticketParamDept,this.ticketParamCategory).subscribe(t=>{this.ticketListing=t.data,this.filterDataArray=t.data,this.tableSortFilter(null,null,null,"default"),console.log(t),this.loader=!1},t=>{this.loader=!1})}getDeptName(t){if("TOTAL"==t)return t;if(t){let e=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(let n in e)if(e[n].userDept==t)return e[n].userDeptKey;return""}}testWhite(t){return new RegExp(/^\s$/).test(t.charAt(0))}tableSortFilter(t,e,n,r){this.sortData="default"==r?{sortType:"DESC",key:"createdOn",typ:"date",sort:r}:{sortType:t,key:e,typ:n,sort:r};let i={headers:[{key:"ticketNo",label:"Support Request No.",type:"string"},{key:"concernDeptName",label:"Department",type:"string"},{key:"query",label:"Query",type:"string"},{key:"attachmentUId",label:"Attachment",type:"string"},{key:"details",label:"Response to Applicant",type:"string"},{key:"createdOn",label:"Created On",type:"date"}],actualArray:this.ticketListing,sortData:this.sortData};this.tableHeader=i.headers,this.tableJsonData.next({exportJson:i}),console.log(i)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}};u.ctorParameters=()=>[{type:c.a}],u=r.b([Object(i.n)({selector:"app-ticket-pendency-list",template:r.c(n("HTpo")).default,styles:[r.c(n("wVAR")).default]})],u);let g=class{constructor(t){this._ticketService=t,this.docId4=new o.a({}),this.inputJson=new o.a({}),this.ticketPopup=!1,this.test=!0,this.queryDesc="",this.loader=!1,this.getName="",this.getEmail=""}ngOnInit(){this.concern="TP",this.userDetails="Update "+sessionStorage.getItem("titcketType")+" Details",this.createTicketForm=new l.d({createTicketConcern:new l.c("",[l.h.required]),queryDesc:new l.c("",[l.h.required]),createTicketQuery:new l.c("",[l.h.required]),createTicketFile:new l.c(""),createTicketDetails:new l.c(null,[l.h.required])}),this.uploadTicketFile={},this.fileId={},this.getAllDeptsfunc(),this.getName=sessionStorage.getItem("ProName"),this.getEmail=sessionStorage.getItem("proEmail")}getAllDeptsfunc(){this.getAllDeptsSelectList=[{userDeptKey:"Administration (General Queries, Supplies)",userDept:"ADMIN"},{userDeptKey:"Technical (Town Planning)",userDept:"TP"},{userDeptKey:"Accounts and Finance (CA)",userDept:"FINANCEF"},{userDeptKey:"IT",userDept:"IT"},{userDeptKey:"Legal (Court Procedure, Notices)",userDept:"LEGAL"},{userDeptKey:"Legal (Scrutiny, Agreements, others)",userDept:"LEGALOTH"},{userDeptKey:"Compliance & Regulatory (QPR, Form 5, Site Visit)",userDept:"COMPLIANCE"}];for(let t in this.getAllDeptsSelectList)this.getAllDeptsSelectList[t].optdisabled=!1;console.log(this.getAllDeptsSelectList)}setFile(t){this.uploadTicketFile[t.fid]=t.docid,"docId4"==t.staticDocId&&(this.attachmentUId=t.docUid)}submitTicket(){console.log("check"),this.loadingSpinner=!0,this.loader=!0;let t={attachmentId:this.createTicketForm.controls.createTicketFile.value,attachmentUId:this.attachmentUId,concernDeptName:this.createTicketForm.controls.createTicketConcern.value,details:this.createTicketForm.controls.createTicketDetails.value,query:this.createTicketForm.controls.queryDesc.value,query_master:this.createTicketForm.controls.createTicketQuery.value,status:"OPEN",createdUserName:sessionStorage.getItem("ProName"),emailId:sessionStorage.getItem("proEmail"),mobileNo:sessionStorage.getItem("proMobile")};this.test=!1,this.createTicketForm.reset(),this._ticketService.saveUserTicket(t).subscribe(t=>{console.log("form submitted"),console.log(t),this.test=!0,this.loadingSpinner=!1,this.loader=!1,this.uploadTicketFile=[],this.uploadTicketFile.aadharId=null,this.inputJson.next({popShow:!0,popMsg:"Support Request Generated Successfully",popClass:"alert alert-success",popRoute:"home"})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong",popClass:"alert alert-danger",popRoute:""}),this.loader=!1}),console.log(t)}setNameOfQuery(t){this.queryName=t.target.options[t.target.selectedIndex].text}};g.ctorParameters=()=>[{type:c.a}],g=r.b([Object(i.n)({selector:"app-user-create-ticket",template:r.c(n("1MdG")).default,styles:[r.c(n("MjyU")).default]})],g);let b=class{constructor(t){this._ticket=t,this.pageTitle="",this.paginationCount=0,this.filterDataArray=[],this.tableHeader=[],this.tableJsonData=new o.a({}),this.currentPageNo=1,this.loadingSpinner=!1,this.loadingMessage="Loading..",this.ticketOperation=(t,e)=>{console.log("dept",t),console.log("dept",e),this.loadingSpinner=!0,this._ticket.getTicketPendencyList(t,e).subscribe(t=>{this.loadingMessage="No record found.",this.loadingSpinner=!1,console.error("ticket response",t),"200"==t.status?(this.filterDataArray=t.data,this.totalList=t.data,this.tableSortFilter(null,null,null,"default")):this.loadingMessage="No record found."},t=>{this.loadingMessage="No record found.",this.loadingSpinner=!1,console.error("error in the ticket",t)})},this.checkRemark=t=>null!=t&&t.split(" ").length>=10}ngOnInit(){this.pageTitle=sessionStorage.getItem("pageTitle");let t="",e="";t=sessionStorage.getItem("deptarmentForTicket"),e=sessionStorage.getItem("filterDateValidation"),this.ticketOperation(t,e)}tableSortFilter(t,e,n,r){let i;this.sortData="default"==r?{sortType:"DESC",key:"startDate",typ:"date",sort:r}:{sortType:t,key:e,typ:n,sort:r},i={headers:[{key:"dept",label:"Deptartment",type:"string"},{key:"concernDept",label:"Concern Deptartment",type:"string"},{key:"supportNo",label:"Support No",type:"date"},{key:"query",label:"Query",type:"string"},{key:"description",label:"Ticket Description",type:"string"},{key:"assignedTo",label:"Assigned To",type:"string"},{key:"userType",label:"User Type",type:"string"},{key:"mobileNo",label:"Mobile Number",type:"string"},{key:"emailId",label:"Email ID",type:"string"},{key:"remarks",label:"Response to Applicant",type:"string"},{key:"createdOn",label:"Created On",type:"date"}],actualArray:this.totalList,sortData:this.sortData},this.tableHeader=i.headers,this.tableJsonData.next({exportJson:i}),console.log(i)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}};b.ctorParameters=()=>[{type:c.a}],b=r.b([Object(i.n)({selector:"app-ticket-listing-executive",template:r.c(n("Eh9e")).default,styles:[r.c(n("Ciua")).default]})],b);const f=[{path:"ticket-listing",component:m},{path:"ticket-tasklist",component:h},{path:"ticket-pendency-list",component:u},{path:"user-create-ticket",component:g},{path:"executive-summary-tickets",component:b}];let v=class{};v=r.b([Object(i.J)({imports:[s.f.forChild(f)],exports:[s.f]})],v);var k=n("ybvR"),y=n("xkgV"),T=n("4nBV"),w=n("5c4+"),D=n("spJD"),I=n("kdZ/"),F=n("UPf0"),A=n("L7/k");n.d(e,"TicketModule",(function(){return E}));let E=class{};E=r.b([Object(i.J)({declarations:[m,h,u,g,b],imports:[a.b,v,l.e,l.g,k.a,y.a,D.a,T.a,w.a,F.a,I.a,A.a],providers:[a.e],exports:[]})],E)},wVAR:function(t,e,n){"use strict";n.r(e),e.default=".table-bordered.tickettable td span {\n  font-weight: 400 !important;\n}\n\n.table-bordered.tickettable td a:hover {\n  color: #ec7b0d;\n  text-decoration: underline !important;\n}\n\n.table-bordered.tickettable th, .table-bordered.tickettable td {\n  padding: 5px !important;\n  font-size: 14px !important;\n}\n\n.table-bordered.tickettable.mainDash td {\n  font-size: 14px !important;\n}\n\n.table-bordered.tickettable td {\n  font-size: 12px !important;\n}"}}]);
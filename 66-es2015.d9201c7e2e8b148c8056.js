(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"6HN7":function(t,e,r){"use strict";r.r(e),e.default=".scrollme {\n  overflow-x: auto;\n}\n\n.activeClassForQPR {\n  color: #008a00;\n}\n\n.submittedClassForQPR {\n  color: #6f42c1;\n}\n\n.inactiveClassForQPR {\n  color: #6c757d;\n}\n\n.defaultClassForQPR {\n  color: #db3700;\n}\n\n.default_activeClassForQPR {\n  color: #fd7e14;\n}\n\n.cursorPoint {\n  cursor: pointer;\n}"},Cj44:function(t,e,r){"use strict";r.r(e);var a=r("mrSG"),s=r("8Y7J"),i=r("SVse"),n=r("iInd"),o=r("s7LF"),l=r("FvaC"),d=r("vTBr");let c=class{constructor(t,e){this._http=t,this._apiURL=e,this.getAgentId=1}postData(t){return this._http.post(this._apiURL.registrationAPI+"agent/save-agent-details",t)}getData(){return this._http.get(this._apiURL.registrationAPI+"agent/getAllAgentDetails")}getAgentIndividualService(){return this._http.get(this._apiURL.registrationAPI+"agent/agent"+this.getAgentId)}getDataofDistrict(t){return this._http.secureget(this._apiURL.reraMasterAPI+"district/getDistrictByStateUtCode"+t)}getallDistrict(){return this._http.secureget(this._apiURL.reraMasterAPI+"district/getDistrictByStateUtCode")}getDataofState(){return this._http.secureget(this._apiURL.reraMasterAPI+"state/getActiveState")}getDataofTaluka(t){return this._http.get(this._apiURL.reraMasterAPI+"subDistrict/getSubDistrictByDistrictCode"+t)}saveAgentData(t){return this._http.post(this._apiURL.agentApI+"save-agent-details",t)}getAgentDetail(t){return this._http.get(this._apiURL.agentApI+"/get-agent-details/"+t)}};c.ctorParameters=()=>[{type:d.a},{type:l.a}],c=a.b([Object(s.B)({providedIn:"root"})],c);var p=r("N6Kn");let u=class{constructor(t,e){this._http=t,this._apiURL=e}getTPDetails(t){return this._http.secureget(this._apiURL.rera_tp+"secure/town-plan/district-code/"+t)}getData(t,e){let r=e?e[0].districtName:"",a=`project_name=${t.project_name}&project_reg_no=${t.project_reg_no}&approved_authority=${t.approved_authority}&dist=${r}&subDist=${t.subDist}&status=${t.status}&complationStartdate=${t.complationStartdate}&complationenddate=${t.complationenddate}&approvalStartdate=${t.approvalStartdate}&approvalenddate=${t.approvalenddate}&mincost=${t.mincost}&maxcost=${t.maxcost}`;return this._http.secureget(this._apiURL.projectRegAPI+"secure/project-dtls?"+a)}};u.ctorParameters=()=>[{type:d.a},{type:l.a}],u=a.b([Object(s.B)({providedIn:"root"})],u);var m=r("EUZL"),h=r("2Vo4");let g=class{constructor(t,e,r,a,s,i){this._httpService=t,this._httpStateMasterServce=e,this.datepipe=r,this.searchService=a,this.fb=s,this._router=i,this.headersKey=["dinesh","kasale"],this.showFilters=!0,this.districtList=[],this.projectListData=[],this.paginationCount=5,this.date=new Date,this.currentDate=new Date,this.talukaList=[],this.approvingAuthority=["AUDA/AMC","SUDA/sMC","Others"],this.quarterStatus=["Active","Default_Active","Submitted","Default","Inactive","Exempt"],this.quarterStatusShort={ACTIVE:"ACT",EXEMPT:"EXP",SUBMITTED:"SS",DEFAULT:"DF",INACTIVE:"INACT",DEFAULT_ACTIVE:"Def_Act"},this.TPResult=[],this.loadingSpinner=!1,this.passValue=new h.a({})}ngOnInit(){this.createForm(),this.getGujDistricts(),this.maxDate=this.datepipe.transform(new Date(this.currentDate.getFullYear()+10,11,31),"yyyy-MM-dd"),this.getProjectListData(),this.passValue.next("qpr_dashboard")}createForm(){this.myForm=new o.d({dist:new o.c(""),subDist:new o.c(""),approved_authority:new o.c(""),mincost:new o.c(""),maxcost:new o.c(""),approvalStartdate:new o.c(""),approvalenddate:new o.c(""),complationStartdate:new o.c(""),complationenddate:new o.c(""),status:new o.c(""),project_reg_no:new o.c(""),project_name:new o.c("")})}onSubmit(t){null==this.myForm.controls.mincost.value&&this.myForm.patchValue({mincost:""}),null==this.myForm.controls.maxcost.value&&this.myForm.patchValue({maxcost:""});let e={formValues:this.myForm.value,distValue:this.selectedDist?this.selectedDist:null};sessionStorage.setItem("searchdata",JSON.stringify(e)),this.searchDataParam=e,this.getProjectListData()}getGujDistricts(){this._httpService.getDataofDistrict("GJ").subscribe(t=>{this.districtList=t},t=>{this.districtList=[]})}getTalukaList(){let t=this.myForm.controls.dist.value;this.selectedDist=this.districtList.filter(e=>e.districtCode===t),this._httpService.getDataofTaluka(t).subscribe(e=>{this.talukaList=e,this.getApprovingAuthority(t)},t=>{this.talukaList=[]})}getPageNo(t){this.currentPageNo=t,this.projectListData.length>5&&(this.paginationCount=5*t),0==this.projectListData.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.projectListData.length)},100)}getApprovingAuthority(t){this.searchService.getTPDetails(t).subscribe(t=>{"200"==t.status&&(this.TPResult=t.data)})}getProjectListData(){let t=this.getSeacrhFeilds();this.loadingSpinner=!0,this.searchService.getData(t.formValues,t.distValue).subscribe(t=>{t.data?(this.projectListData=t.data,console.log("this.projectListData :",this.projectListData),this.loadingSpinner=!1,sessionStorage.removeItem("searchdata"),this.getPageNo(1)):(this.projectListData=[],this.loadingSpinner=!1)},t=>{this.projectListData=[],this.loadingSpinner=!1})}getStatusDates(t,e){let r=", Submited Date :  "+this.datepipe.transform(t.qtr_detail[e].qtr_submitted_date,"dd-MM-yyyy");t.showStatus=`StartDate : ${this.datepipe.transform(t.qtr_detail[e].qtr_start_date,"dd-MM-yyyy")} , EndDate : ${this.datepipe.transform(t.qtr_detail[e].qtr_end_date,"dd-MM-yyyy")} ${t.qtr_detail[e].qtr_submitted_date?r:""}`}getLastStatusDates(t){let e=", Submited Date :  "+this.datepipe.transform(t.qtr_submitted_date,"dd-MM-yyyy");t.showStatus=`StartDate : ${this.datepipe.transform(t.qtr_start_date,"dd-MM-yyyy")} , EndDate : ${this.datepipe.transform(t.qtr_end_date,"dd-MM-yyyy")} ${t.qtr_submitted_date?e:""}`}clickToExport(){let t=this.projectListData.map(t=>({"REGISTRATION NO.":t.project_reg_no,"PROJECT NAME":t.project_name,"PROMOTER NAME":t.promoter_name,QUARTERS__STATUS:this.getStatusNames(t.qtr_detail),"DEFAULT QUARTER":this.getDefaultQtr(t.qtr_detail),"PROMOTER MO NUMBER":t.promoter_mobile,"PROMOTER EMAILID":t.promoter_email,"PROMOTER ADDRESS":t.promoter_address,"PROJECT TYPE":t.project_type,"PROJECT STATUS":t.project_status,"PROJECT ADDRESS":t.project_address,"APPROVED DATE":this.datepipe.transform(t.approved_date,"dd-MM-yyyy"),"END DATE":this.datepipe.transform(t.end_date,"dd-MM-yyyy"),"TOTAL PROJECT COST":t.project_cost,"NUMBER OF UNITS":t.no_of_unit,"LAND AREA":t.land_area,"ACK No.":t.ack_no,"AUTHORISED SIGN NAME":t.authorised_sign_name}));this.exportAsExcelFile(t)}exportAsExcelFile(t){const e={Sheets:{data:m.utils.json_to_sheet(t)},SheetNames:["data"]},r=m.write(e,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(r)}saveAsExcelFile(t){var e=r("Iab2");const a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});e.saveAs(a,"ProjectComplianceList.xlsx")}getStatusNames(t){return t.map(({qtr_name:t})=>t).toString()}viewData(t){sessionStorage.setItem("wfoId",t),this.searchDataParam&&sessionStorage.setItem("searchdata",JSON.stringify(this.searchDataParam)),this._router.navigate(["workflow"])}getDefaultQtr(t){let e=t.filter(t=>"DEFAULT"===t.qtr_status);if(e.length){let t=e.length;return e.shift().qtr_name+" / D-"+t}}goToQuarter(t,e,r,a){a.includes("Q-E")||a.includes("X")?sessionStorage.setItem("qprType","Q-E"):sessionStorage.setItem("qprType","Q-I"),sessionStorage.setItem("quarterId",t),sessionStorage.setItem("projectId",e),sessionStorage.setItem("QPRreturnId",r),this.searchDataParam&&sessionStorage.setItem("searchdata",JSON.stringify(this.searchDataParam)),this._router.navigate(["dashboard/Qpr-view"])}getSeacrhFeilds(){let t=JSON.parse(sessionStorage.getItem("searchdata"))||null;return t?(this.myForm.patchValue(t.formValues),t.distValue&&this.getTalukaList(),{formValues:t.formValues,distValue:this.selectedDist?t.distValue:null}):{formValues:this.myForm.value,distValue:this.selectedDist?this.selectedDist:null}}resetForm(){this.searchDataParam=null,sessionStorage.removeItem("searchdata"),this.myForm.reset(),this.createForm(),this.getProjectListData()}backButton(){window.history.back()}};g.ctorParameters=()=>[{type:c},{type:p.a},{type:i.e},{type:u},{type:o.b},{type:n.e}],a.b([Object(s.kb)("tableOpt",{static:!1})],g.prototype,"tableOpt",void 0),g=a.b([Object(s.n)({selector:"app-quarter-search",template:a.c(r("WuAw")).default,styles:[a.c(r("6HN7")).default]})],g);const v=[{path:"",component:g}];let b=class{};b=a.b([Object(s.J)({imports:[n.f.forChild(v)],exports:[n.f]})],b);var S=r("xkgV"),_=r("dTlI"),D=r("5c4+"),f=r("UPf0"),y=r("NSbh"),T=r("6Lj3");r.d(e,"QuarterSearchModule",(function(){return A}));let A=class{};A=a.b([Object(s.J)({declarations:[g],imports:[i.b,b,o.g,S.a,_.a,D.a,f.a,y.a,T.a]})],A)},WuAw:function(t,e,r){"use strict";r.r(e),e.default='<app-all-dashboard [activeTab]="3"></app-all-dashboard>\r\n<app-mis-dashboard-tabs [tabActive]=\'passValue\'></app-mis-dashboard-tabs>\r\n<div>\r\n    <div class="row">\r\n        <div class="col-md-12 mb-1 ">\r\n           <ul class="d-flex justify-content-between qprTab">\r\n                <li>\r\n                 <a class="btn btn-warning cursor-pointer" href="#/mis/qpr-dashboard">Q-I</a>\r\n               </li>\r\n      \r\n               <li>\r\n                <a class="btn btn-warning cursor-pointer" href="#/mis/qpr-dashboard-qe">Q-E</a>\r\n              </li>\r\n      \r\n      \r\n              <li>\r\n                <a class="btn btn-warning cursor-pointer" href="#/mis/dashboard-Compliance">Annual Compliance </a>\r\n              </li>\r\n              <li>\r\n                <a class="btn btn-success cursor-pointer" href="#/searchProjectList"> Project Search </a>\r\n              </li>\r\n           </ul>\r\n         </div>\r\n       </div>\r\n    <div class="col-sm-12">\r\n        <button type="submit" class="btn btn-warning pull-right mb-4" (click)="showFilters = !showFilters">Show / Hide\r\n            Filters</button>\r\n    </div>\r\n\r\n    <form [formGroup]="myForm" (ngSubmit)="onSubmit(myForm)">\r\n        <div id="labels" class="card shadow mb-3" *ngIf="showFilters">\r\n            <div class="card-body asd">\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>District </label>\r\n                    </div>\r\n                    <div class="col-md-3">\r\n                        <select class="form-control" formControlName="dist" (change)="getTalukaList()">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let dist of districtList" [attr.data-type]="dist"\r\n                                value="{{dist.districtCode}}">{{dist.districtName}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>Taluka </label>\r\n                    </div>\r\n                    <div class="col-md-3">\r\n                        <select class="form-control" formControlName="subDist">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let tal of talukaList" [attr.data-type]="data"\r\n                                value="{{tal.subDistrictName}}">{{tal.subDistrictName}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Plan Approving Authority </label>\r\n                    </div>\r\n                    <div class="col-md-3">\r\n                        <select class="form-control" formControlName="approved_authority">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let authority of TPResult" [attr.data-type]="authority.tpName"\r\n                                value="{{authority.tpName}}">{{authority.tpName}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class="col-sm-2">\r\n                        <label>Quarter Status </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select class="form-control" formControlName="status">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let qS of quarterStatus" [attr.data-type]="qS" value="{{qS}}">{{qS}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Min Project Cost </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="number" class="form-control" formControlName="mincost">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>Max Project Cost </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="number" class="form-control" formControlName="maxcost">\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Approved-From Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="approvalStartdate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>To Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="approvalenddate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>End-From Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="complationStartdate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>To Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="complationenddate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Project Registeration Number </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="text" class="form-control" formControlName="project_reg_no">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>Project Name </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="text" class="form-control" formControlName="project_name">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="col-sm-12">\r\n                    \r\n                    <button type="reset" (click)="resetForm()" class="btn btn-info pull-right mb-4">Reset</button>\r\n                    <button type="submit" class="btn btn-success pull-right mb-4 mr-2">Filter</button>\r\n                    <button type="button" (click)="clickToExport()"\r\n                        class="btn btn-warning pull-right mb-4 mr-2">Export</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <hr />\r\n    <h4 class="mb-4">Project List</h4>\r\n\r\n    <div class="scrollme">\r\n        <table class="table table-bordered table-responsive" #tableOpt id="myTableElementId">\r\n            <thead class="bg-light">\r\n                <tr>\r\n                    <td>SL. No</td>\r\n                    <td>REGISTRATION NO.</td>\r\n                    <td>PROJECT NAME</td>\r\n                    <td>PROMOTER NAME</td>\r\n                    <td>QUARTERS__STATUS</td>\r\n                    <td>LAST QUARTER</td>\r\n                    <td>APPROVED DATE</td>\r\n                    <td>END DATE</td>\r\n                    <td>LAND DOCUMENT</td>\r\n                    <td>ENCUMBRANCE CERTIFICATE</td>\r\n                    <td>TOTAL PROJECT COST</td>\r\n                    <td>NUMBER OF UNITS</td>\r\n                    <td>LAND AREA</td>\r\n                    <td>ACK No.</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr\r\n                    *ngFor="let item of projectListData | paginate: { id: \'foo1\', itemsPerPage: 5, currentPage: currentPageNo }; let i = index">\r\n                    <td>{{((currentPageNo-1)*5)+(i+1) }}</td>\r\n                    <td>{{item.project_reg_no}}</td>\r\n                    <td>\r\n                        <a href="javascript:void(0)" class="link-color"\r\n                            (click)="viewData(item.wfoId)">{{item.project_name}}</a>\r\n                    </td>\r\n                    <td>{{item.promoter_name}}</td>\r\n                    <td>\r\n                        <span *ngFor="let it of item.qtr_detail; let in = index" [title]="item?.showStatus"\r\n                            (mouseenter)="getStatusDates(item,in)"\r\n                            [ngClass]="[it.qtr_status === \'SUBMITTED\' ? \'submittedClassForQPR\' : \'\', it.qtr_status === \'INACTIVE\' ? \'inactiveClassForQPR\' : \'\', it.qtr_status === \'ACTIVE\' ? \'activeClassForQPR\' : \'\' , it.qtr_status === \'EXEMPT\' ? \'text-org\' : \'\' , it.qtr_status === \'DEFAULT\' ? \'defaultClassForQPR\' : \'\', quarterStatusShort[it.qtr_status]===\'SS\' ? \'cursorPoint\' : \'\']"\r\n                            (click)="quarterStatusShort[it.qtr_status]==\'SS\' ? goToQuarter(it.qtr_id,item.id,it.return_id,it.qtr_name) : \'\'">\r\n                            {{it.qtr_name}} ({{quarterStatusShort[it.qtr_status]}})\r\n                            <br>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <ng-container *ngFor="let lastStatus of item.qtr_detail; let ind = index;let last=last">\r\n                            <span *ngIf="last" [title]="lastStatus?.showStatus"\r\n                                (mouseenter)="getLastStatusDates(lastStatus)"\r\n                                [ngClass]="[lastStatus.qtr_status === \'SUBMITTED\' ? \'submittedClassForQPR\' : \'\', lastStatus.qtr_status === \'INACTIVE\' ? \'inactiveClassForQPR\' : \'\', lastStatus.qtr_status === \'ACTIVE\' ? \'activeClassForQPR\' : \'\' , lastStatus.qtr_status === \'EXEMPT\' ? \'text-org\' : \'\' , lastStatus.qtr_status === \'DEFAULT\' ? \'defaultClassForQPR\' : \'\' ,quarterStatusShort[lastStatus.qtr_status]===\'SS\' ? \'cursorPoint\' : \'\']"\r\n                                (click)="quarterStatusShort[lastStatus.qtr_status]==\'SS\' ? goToQuarter(lastStatus.qtr_id,item.id,lastStatus.return_id,lastStatus.qtr_name) : \'\'">\r\n                                {{lastStatus.qtr_name}}\r\n                                ({{quarterStatusShort[lastStatus.qtr_status]}})</span>\r\n                        </ng-container>\r\n                    </td>\r\n                    <td>{{item.approved_date | date : \'dd-MM-yyyy\'}}</td>\r\n                    <td>{{item.end_date | date : \'dd-MM-yyyy\'}}</td>\r\n                    <td>\r\n                        <span *ngIf="item.land_doc_uid">\r\n                            <app-multi-file-view [Uid]="item.land_doc_uid"></app-multi-file-view>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <span *ngIf="item.encumbrance_doc_uid">\r\n                            <app-multi-file-view [Uid]="item.encumbrance_doc_uid"></app-multi-file-view>\r\n                        </span>\r\n                    </td>\r\n                    <td>{{item.project_cost}}</td>\r\n                    <td>{{item.no_of_unit}}</td>\r\n                    <td>{{item.land_area}}</td>\r\n                    <td>{{item.ack_no}}</td>\r\n                </tr>\r\n                <tr *ngIf="projectListData.length==0">\r\n                    <td colspan="14" class="text-center"> Data Not Found</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="col-md-12 text-right" *ngIf="projectListData?.length > 0">\r\n            <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n        </div>\r\n        <div class=" col-md-12 text-center">\r\n            <button value="" class="btn btn-success" (click)="backButton()">Back</button>\r\n          </div>\r\n    </div>\r\n\r\n\r\n\r\n</div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>'}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"+DlQ":function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n\r\n  <div class="col-md-12 mb-4 ">\r\n    <div class="card ">\r\n      <div class="card-body">\r\n      <div class="row">\r\n        <div class=" col-md-12">\r\n          \r\n        <div class="card-header d-flex justify-content-between align-items-center">\r\n          <h2><b>Payment Detail</b></h2>\r\n  \r\n          <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n          </div>\r\n          <div class="table-responsive mt-4">\r\n            <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n          <table class="table table-bordered text-center" #tableOpt id="myTableElementId">\r\n            <thead>\r\n              <tr class="bg-light  text-size-small text-center">\r\n             \r\n                \r\n                  <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n                    <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n                    <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n                  </div>\r\n                </th>   \r\n                \r\n                <th>Action</th>\r\n  \r\n              </tr>\r\n          </thead>\r\n            <tbody *ngIf="filterDataArray?.length > 0; else noSearchRec">\r\n              <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }">\r\n                <td>{{data.registraionType}}</td>\r\n                <td><span *ngIf="data.paymentTokenNo!=null"><a href="javascript:void(0)" class="link-color" (click)="openProjectDetails(data.projectId, data.registraionType)">{{data.paymentTokenNo}}</a></span><span *ngIf="data.paymentTokenNo==null">NA</span></td>\r\n                <td>{{data.sbiReferenceNo}}</td>\r\n                <td class="text-right">{{data.reqAmount}}</td>\r\n                <td class="text-right"><span *ngIf="data.reqPenaltyAmount!=null">{{data.reqPenaltyAmount}}</span><span *ngIf="data.reqPenaltyAmount==null">0</span> </td>\r\n                <td class="text-right">{{data.reqTotalAmount}}</td>\r\n                <td><span *ngIf="data.processName!=\'Withdrawal\' && data.processName!=\'Project Land Area Change\' && data.registraionType!=\'Registration - Online Enquiry\' && data.registraionType!=\'Alteration - Online Enquiry\'"><span *ngIf="data.transactionDate!=null">{{data.transactionDate | date : \'dd-MM-yyyy\'}}</span><span *ngIf="data.transactionDate==null">NA</span></span><span *ngIf="data.processName==\'Withdrawal\' || data.processName==\'Project Land Area Change\' || data.registraionType==\'Registration - Online Enquiry\' || data.registraionType==\'Alteration - Online Enquiry\'">{{data.transactionDate}}</span></td>\r\n                <td style="white-space: nowrap">{{data.createdOn | date : \'dd-MM-yyyy, h:mm a\'}}</td>\r\n\r\n                <td style="white-space: nowrap" class="d-flex">\r\n                  <a href="javascript:void(0);" (click)="viewDetails(data)" class="cursor-pointer mr-4" title="View Transaction">\r\n                    <i class="fa icon-eye" aria-hidden="true"></i>\r\n                  </a> \r\n                  \r\n                  <a href="javascript:void(0)" (click)="refundProcess(data)" title="Create Refund" class="cursor-pointer mr-4">\r\n                    <i class="fas fa-rupee-sign" aria-hidden="true"></i>\r\n                  </a>\r\n                  \r\n                  <a href="{{downloadReciept}}{{data.transactionNo}}" class="cursor-pointer" title="Download Payment Receipt">\r\n                    <i class="icon icon-download green" aria-hidden="true"></i>\r\n                  </a>\r\n                 \r\n                </td>\r\n              </tr>\r\n\r\n\r\n            </tbody>\r\n            <ng-template #noSearchRec>\r\n            <tbody>\r\n              <tr>\r\n                <td class="text-center green" colspan="9">Please wait...</td>\r\n              </tr>\r\n            </tbody>\r\n            </ng-template>\r\n\r\n          </table>    \r\n             <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n            <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        \x3c!-- <div class="col-md-12 text-right">\r\n          <pagination-controls id="foo1" (pageChange)="ca = $event"></pagination-controls>\r\n        </div> --\x3e\r\n\r\n\r\n      </div>\r\n    </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  <div class="modal show" *ngIf="refund_rec">\r\n    <div class="modal-dialog modal-xl">\r\n      <div class="modal-content">\r\n\r\n        \x3c!-- Modal Header --\x3e\r\n        <div class="modal-header">\r\n          <h4 class="modal-title"><b>Create Refund Request</b> </h4>\r\n          <button type="button" (click)="closePopup()" class="close" data-dismiss="modal">&times;</button>\r\n        </div>\r\n\r\n\r\n        \x3c!-- Modal body --\x3e\r\n        <div class="modal-body">\r\n          <h3 class=""><b>Beneficiary Detail</b></h3>\r\n\r\n\r\n\r\n\r\n<div class="row">\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Name</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.userName}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Email Id</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.emailId}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Mobile No</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.mobileNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction No</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.transactionNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Token No</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.paymentTokenNo}}">\r\n          </div>\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Registraion Type</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.registraionType}}">\r\n          </div> --\x3e\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Gateway Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.sbiReferenceNo}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.payMode}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Gateway</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.paymentGateway}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited on</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.creditedOn | date : \'dd-MM-yyyy, h:mm a\'}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited Flag</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.creditFlag}}">\r\n          </div>\r\n\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Bank Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.bankReferenceNo}}">\r\n          </div> --\x3e\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Date</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.transactionDate}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Heads Name</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.registraionType}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{refundDataVal?.trxMode}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{refundDataVal?.reqAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(refundDataVal?.reqAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Additional Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{refundDataVal?.reqPenaltyAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(refundDataVal?.reqPenaltyAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Total Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{refundDataVal?.reqTotalAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(refundDataVal?.reqTotalAmount)">\r\n          </div>\r\n\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n          <h3 class=""><b>Refund Form</b></h3>\r\n          <form [formGroup]="refundForm" id="validateFoem">\r\n            <input type="hidden" class="form-control" formControlName="paymentId" [(ngModel)]="paymentId">\r\n            <input type="hidden" class="form-control" formControlName="requestId" [(ngModel)]="rRequestId">\r\n            <div class="col-md-12">\r\n\r\n              <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Refund Mode</label>\r\n                <input type="text" readonly class="form-control" formControlName="refundMode" [(ngModel)]="refundMode">\r\n              </div>\r\n\r\n              <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Ticket No.</label>\r\n                <input type="text" class="form-control" formControlName="ticketNo" [(ngModel)]="ticketNo" (focusout)="checkTicketNoIsValidOrNot(ticketNo)">\r\n              </div>\r\n\r\n              <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold">Ticket Query\r\n\r\n                  <a *ngIf="ticektInfo.attachmentUId!=null" href="{{downloadVdms}}{{ticektInfo.attachmentUId}}" title="Download Ticket Attachment">\r\n                    <i class="icon icon-download green"></i>\r\n                  </a>\r\n                </label>\r\n\r\n                <input type="hidden" formControlName="ticketAttachmentDocUID" [(ngModel)]="ticektInfo.attachmentUId">\r\n\r\n\r\n                <input type="text" readonly class="form-control" formControlName="ticketDescription" [(ngModel)]="ticektInfo.query">\r\n              </div>\r\n\r\n\r\n            </div>\r\n\r\n            <div class="col-md-12">\r\n\r\n\r\n              <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold ">Reason<sup>*</sup></label>\r\n                <select *ngIf="setPaymentType==\'allPayment\'" class="form-control" formControlName="reason">\r\n                  <option value="">--Select--</option>\r\n                  <option value="Duplicate Payment">Duplicate Payment</option>\r\n                  <option value="Project Outside Planning area">Project Outside Planning area</option>\r\n                  <option value="Excess Payment">Excess Payment</option>\r\n                </select>\r\n                <input *ngIf="setPaymentType!=\'allPayment\'" type="text" class="form-control" readonly [(ngModel)]="processName" formControlName="reason">\r\n              </div>\r\n\r\n                <div class="col-md-4 mb-4">\r\n                  <label class="control-label font-weight-bold ">Amount<sup>*</sup></label>\r\n                  <input type="text" class="form-control" [readonly]="setPaymentType==\'Withdrawal\'" formControlName="requestAmount" [(ngModel)]="requestAmount" (focusout)="paymentNotMoreThan(requestAmount,requestPenalty)" onKeyPress="if(this.value.length==12) return false;" (keydown)="allowNumericOnly($event)" (focus)="removeCommas(requestAmount,requestPenalty)">\r\n                </div>\r\n\r\n                <div class="col-md-4 mb-4">\r\n                  <label class="control-label font-weight-bold ">Additional Amount<sup>*</sup></label>\r\n                  <input type="text" class="form-control" [readonly]="setPaymentType==\'Withdrawal\'" formControlName="requestPenalty" [(ngModel)]="requestPenalty" (focusout)="paymentNotMoreThan(requestAmount,requestPenalty)" onKeyPress="if(this.value.length==12) return false;" (keydown)="allowNumericOnly($event)" (focus)="removeCommas(requestAmount,requestPenalty)">\r\n                </div>\r\n\r\n              </div>\r\n              <div class="col-md-12">\r\n\r\n\r\n                <div class="col-md-4 mb-4">\r\n                  <label class="control-label font-weight-bold ">Total Amount<sup>*</sup></label>\r\n                  <input type="hidden" formControlName="ammount" [(ngModel)]="ammount">\r\n                  <input type="text" readonly class="form-control" [value]="transformAmount(ammount)">\r\n                </div>\r\n\r\n\r\n              <div class="col-md-4 mb-4">\r\n                <label class="control-label font-weight-bold ">Remarks<sup>*</sup></label>\r\n                \x3c!-- <input type="text" class="form-control" formControlName="remarks"> --\x3e\r\n\r\n                <textarea class="form-control" formControlName="remarks"></textarea>\r\n\r\n              </div>\r\n              <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n                <label class="control-label font-weight-bold ">Payment Mode<sup>*</sup></label>\r\n                <input type="text" class="form-control" formControlName="paymentMode">\r\n                <select class="form-control">\r\n                  <option value="">--Select--</option>\r\n                  <option value="NEFT">NEFT</option>\r\n                  <option value="RTGS">RTGS</option>\r\n                  <option value="CHEQUE">Cheque</option>\r\n                  <option value="NETBANKING">Net Banking</option>\r\n                  <option value="DD">Demad Draft</option>\r\n                </select>\r\n              </div>\r\n              <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n                <label class="control-label font-weight-bold ">Transaction No<sup>*</sup></label>\r\n                <input type="text" class="form-control" formControlName="transactionNo">\r\n              </div>\r\n\r\n              <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n                <label class="control-label font-weight-bold ">Bank Name<sup>*</sup></label>\r\n                <input type="text" class="form-control" formControlName="bankName">\r\n              </div>\r\n              <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n                <label class="control-label font-weight-bold ">Refunded On<sup>*</sup></label>\r\n                <input type="date" max="{{date | date:\'yyyy-MM-dd\'}}" class="form-control" placeholder=""\r\n                  formControlName="refundedOn">\r\n              </div>\r\n              <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n                <label class="control-label font-weight-bold ">Scan Copy<sup>*</sup></label>\r\n                <input type="hidden" [ngModel]="outputValue.scanCopyId" formControlName="scanCopyId">\r\n                <app-file-upload (myEvent)="setValue($event)"\r\n                  [parm]="{fileId:\'scanCopyId\',docId:docId1,show:false,fileType:[\'pdf\',\'jpg\',\'jpeg\',\'png\']}">\r\n                </app-file-upload>\r\n                <div class="error-box"><small class="error">Please upload file</small></div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n\r\n\r\n\r\n            <div class="col-md-12">\r\n              <div class=" col-md-12 mt-4 d-none">\r\n                <div class="form-check">\r\n                  <label class="form-check-label">\r\n                    <input type="checkbox" class="form-check-input" value="">&nbsp;&nbsp;I declare that\r\n                    the information provided by me is True & Correct.\r\n                  </label>\r\n\r\n                </div>\r\n              </div>\r\n              <div class=" col-md-12 mt-4 text-center">\r\n\r\n                \x3c!-- <button class="btn btn-small btn-primary" [disabled]="this.refundForm.invalid"\r\n                  (click)="refundSubmit()"><i class="fa fa-spinner fa-spin text-white" *ngIf="refundLoader" aria-hidden="true"></i> Submit </button> --\x3e\r\n\r\n\r\n                  <button class="btn btn-small btn-primary" [disabled]="this.refundForm.invalid"\r\n                  (click)="showConfirmation()"><i class="fa fa-spinner fa-spin text-white" *ngIf="refundLoader" aria-hidden="true"></i> Submit </button>\r\n              </div>\r\n\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<div class="modal show" *ngIf="modalPopup">\r\n  <div class="modal-dialog modal-xl">\r\n    <div class="modal-content">\r\n\r\n      \x3c!-- Modal Header --\x3e\r\n      <div class="modal-header">\r\n        <h4 class="modal-title"><b>Transaction Details</b> </h4>\r\n        <button type="button" class="close" (click)="closePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n\r\n        <div class="row">\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.userName}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Email Id</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.emailId}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Mobile No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.mobileNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.transactionNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Token No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.paymentTokenNo}}">\r\n          </div>\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Registraion Type</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.registraionType}}">\r\n          </div> --\x3e\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Gateway Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.sbiReferenceNo}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.payMode}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Gateway</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.paymentGateway}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited on</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.creditedOn | date : \'dd-MM-yyyy, h:mm a\'}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited Flag</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.creditFlag}}">\r\n          </div>\r\n\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Bank Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.bankReferenceNo}}">\r\n          </div> --\x3e\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Date</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.transactionDate}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Heads Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.registraionType}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.trxMode}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData?.reqAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData?.reqAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Additional Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData?.reqPenaltyAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData?.reqPenaltyAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Total Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData?.reqTotalAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData?.reqTotalAmount)">\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="popup-overlay" *ngIf="modalOverlayPopup"></div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n\r\n\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<app-confirmation-box (outEm)="confirmationEvent($event)" [showMessage]="confirmationEventB"></app-confirmation-box>'},"560Y":function(t,e,n){"use strict";n.r(e),e.default=""},"5odX":function(t,e,n){"use strict";n.r(e),e.default='<div class="d-flex justify-content-between align-items-center">\r\n  \x3c!-- <h2>{{dealyedPageTitle}} </h2> --\x3e\r\n  <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n  </div>\r\n<div class="row">\r\n\r\n  <div class="col-md-12 mb-4">\r\n\r\n      <div class="row">\r\n\r\n        <div class=" col-md-12 ">\r\n          <div class="table-responsive ">\r\n        \r\n            <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n          <table class="table table-bordered text-center">\r\n                \r\n    <thead>\r\n      <tr class="bg-light  text-size-small text-center">\r\n          <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n          </div>\r\n        </th> \r\n        <th>Action</th>\r\n      </tr>\r\n  </thead>\r\n            \x3c!-- <thead class="bg-light font-weight-bold">\r\n              <tr class="text-center bg-light  text-size-small">\r\n                <th>Payment Type</th>\r\n                <th>Token No</th>\r\n                <th>Transaction No</th>\r\n                <th>Ticket No</th>\r\n                <th>INR Amount(a)</th>\r\n                <th>INR Additional Amount(b)</th>\r\n                <th>INR Refund Applied(a+b)</th>\r\n                <th>INR Paid Amount</th>\r\n                <th>Initiated On</th>\r\n                <th>Action</th>\r\n\r\n              </tr>\r\n            </thead> --\x3e\r\n            <tbody *ngIf="filterDataArray?.length > 0; else no_allPaymentDetail">\r\n              <tr *ngFor="let data of filterDataArray | paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }">\r\n                <td>{{data.paymentType}}</td>\r\n                <td>{{data.paymentTokenNo}}</td>\r\n                <td>{{data.transactionRefNo}}</td>\r\n                <td>{{data.paymentGateway}}</td>\r\n                <td>{{data.ticketNo}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.paymentAmount)}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.refundedAmount)}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.penaltyAmount)}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.totalAmount)}}</td>\r\n                <td class=" text-nowrap">{{data.refundInitDate | date : \'dd-MM-yyyy, h:mm a\'}}</td>\r\n                <td style="white-space: nowrap" class="d-flex">\r\n                  \r\n                  \r\n                  <a href="javascript:void(0)" (click)="takeActionOnData(data)" title="Create Refund" class="cursor-pointer mr-4"> \r\n                    <i class="fas fa-rupee-sign" aria-hidden="true"></i>\r\n                  </a>\r\n\r\n                  <a href="{{downloadReciept}}{{data.transactionNo}}" class="cursor-pointer" title="Download Payment Receipt"><i class="icon icon-download green" aria-hidden="true"></i></a>\r\n                  \r\n\r\n                  \r\n                </td>\r\n              </tr>\r\n\r\n            </tbody>\r\n\r\n            <ng-template #no_allPaymentDetail>\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="10">\r\n                    <span class="red font-weight-bold">Please wait...</span>\r\n                  </td>\r\n                </tr>\r\n\r\n              </tbody>\r\n            </ng-template>\r\n          </table>\r\n          <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n            <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<div class="modal show" *ngIf="modalPopup">\r\n  <div class="modal-dialog modal-xl">\r\n    <div class="modal-content">\r\n\r\n      <div class="modal-header">\r\n        <h4 class="modal-title"><b>Transection Details</b> </h4>\r\n        <button type="button" class="close" (click)="closePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n\r\n        <div class="row">\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.userName}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Email Id</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.emailId}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Mobile No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.mobileNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.transactionNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Token No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.paymentTokenNo}}">\r\n          </div>\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Registraion Type</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.registraionType}}">\r\n          </div> --\x3e\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Gateway Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.sbiReferenceNo}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.payMode}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Gateway</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.paymentGateway}}">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited on</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.creditedOn | date : \'dd-MM-yyyy, h:mm a\'}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited Flag</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.creditFlag}}">\r\n          </div>\r\n\r\n\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Bank Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.bankReferenceNo}}">\r\n          </div> --\x3e\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Date</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.transactionDate}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Heads Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.registraionType}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.trxMode}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData.reqAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData.reqAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Additional Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData.reqPenaltyAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData.reqPenaltyAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Total Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData.reqTotalAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData.reqTotalAmount)">\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <h3 class="text center"><b>Refund Details</b></h3>\r\n        <div class="row">\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(mainResponse.refundedAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Additional Amount</label>\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(mainResponse.penaltyAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Total Amount </label>\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(mainResponse.totalAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Refund Mode</label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.modeOfRefund)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Ticket No. </label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.ticketNo)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Ticket Query\r\n              <a *ngIf="mainResponse.ticketAttachmentDocUID!=null" href="{{downloadVdms}}{{mainResponse.ticketAttachmentDocUID}}" title="Download Ticket Attachment">\r\n                <i class="icon icon-download green"></i>\r\n              </a>\r\n            </label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.ticketDescription)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Reason</label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.reasonOfRefund)">\r\n          </div>\r\n\r\n\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Remark</label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.remarks)">\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        <h3 class="text center"><b>Approve / Reject Request</b></h3>\r\n        <div class="row">\r\n\r\n          <form [formGroup]=\'approveReject\' id="validateFoem">\r\n\r\n            <input type="hidden" formControlName="refundId" [(ngModel)]="mainResponse.refundId">\r\n\r\n            <div class="col-md-12 mb-4 text center">\r\n              <input type="radio" formControlName="checkUserAction" name="checkUserAction" [(ngModel)]="checkUserAction" value="APPROVE" (change)="actionOfRadio($event)"><strong>Approve</strong>\r\n              &nbsp;\r\n              <input type="radio" formControlName="checkUserAction" name="checkUserAction" [(ngModel)]="checkUserAction" value="REJECT" (change)="actionOfRadio($event)"><strong>Reject</strong>\r\n            </div>\r\n\r\n\r\n\r\n            <div class="col-md-4 mb-4" *ngIf="checkUserAction==\'APPROVE\'">\r\n              <label class="control-label font-weight-bold">Amount</label>\r\n              <input type="text" class="form-control" [readonly]="mainResponse.reasonOfRefund==\'Withdrawal\'" formControlName="amount" [(ngModel)]="amount" onKeyPress="if(this.value.length==12) return false;" (focusout)="paymentNotMoreThan(amount,penaltyAmount)" (keydown)="allowNumericOnly($event)" (focus)="removeCommas(amount,penaltyAmount)">\r\n            </div>\r\n\r\n\r\n            <div class="col-md-4 mb-4" *ngIf="checkUserAction==\'APPROVE\'">\r\n              <label class="control-label font-weight-bold"> Additional Amount</label>\r\n              <input type="text" class="form-control"  [readonly]="mainResponse.reasonOfRefund==\'Withdrawal\'" formControlName="penaltyAmount" [(ngModel)]="penaltyAmount" onKeyPress="if(this.value.length==12) return false;" (focusout)="paymentNotMoreThan(amount,penaltyAmount)" (keydown)="allowNumericOnly($event)" (focus)="removeCommas(amount,penaltyAmount)">\r\n            </div>\r\n\r\n            <div class="col-md-4 mb-4" *ngIf="checkUserAction==\'APPROVE\'">\r\n              <label class="control-label font-weight-bold"> Total Amount</label>\r\n              <input type="hidden" formControlName="totalAmount" [(ngModel)]="ammount">\r\n\r\n\r\n              <input type="text" readonly class="form-control text-right" [value]="transformAmount(ammount)">\r\n            </div>\r\n            <div class="col-md-4 mb-4" *ngIf="checkUserAction==\'APPROVE\'">\r\n              <label class="control-label font-weight-bold"> Any Supporting Documennt</label>\r\n              <input type="hidden" [(ngModel)]="outputValue.supportingDocId" class="form-control" formControlName="supportingDocId" >\r\n              <app-file-upload (myEvent)="setValue($event)"\r\n              [parm]="{fileId:\'supportingDocId\',docId:docId4,close:false,show:false,fileType:[\'pdf\',\'jpg\',\'jpeg\',\'png\']}">\r\n            </app-file-upload>\r\n            </div>\r\n\r\n\r\n            <div class="col-md-12 mb-4">\r\n              <label class="control-label font-weight-bold">Remark<sup>*</sup></label>\r\n              <textarea formControlName="authRemarks" class="form-control"></textarea>\r\n            </div>\r\n\r\n            <div class="col-md-12 mb-4">\r\n              <button class="btn btn-success" (click)="showConfirmation()" [disabled]="this.approveReject.invalid">{{checkUserAction}}</button>\r\n            </div>\r\n\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<app-confirmation-box (outEm)="confirmationEvent($event)" [showMessage]="confirmationEventB"></app-confirmation-box>'},ICAx:function(t,e,n){"use strict";n.r(e),e.default=""},RvKy:function(t,e,n){"use strict";n.r(e),e.default=""},dbMI:function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n\r\n  <div class="col-md-12 mb-4 ">\r\n    <div class="card ">\r\n     \r\n<div class="card-body">\r\n      <div class="row">\r\n        \x3c!-- <div class="col-md-12 text-right mb-1"><input type="button" class="btn btn-primary" (click)="clickToExport()"\r\n            value="Export Excel"></div> --\x3e\r\n        <div class=" col-md-12">\r\n               \r\n        <div class="card-header d-flex justify-content-between align-items-center">\r\n          <h2><b>Payment Refund</b></h2>\r\n  \r\n          <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n          </div>\r\n          <div class="table-responsive mt-4">\r\n            <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n          <table class="table table-bordered text-center" #tableOpt id="myTableElementId">\r\n            <thead>\r\n              <tr class="bg-light  text-size-small text-center">\r\n             \r\n                \r\n                  <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n                    <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n                    <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n                  </div>\r\n                </th>   \r\n                \r\n                <th>Action</th>\r\n  \r\n              </tr>\r\n          </thead>\r\n            \x3c!-- <thead class="bg-light font-weight-bold">\r\n              <tr class="text-center bg-light  text-size-small">\r\n                <th>Head</th>\r\n                <th>Token No</th>\r\n                <th>Transaction No</th> \r\n                <th>INR Amount(a)</th>\r\n                <th>INR Additional Amount(b)</th>\r\n                <th>INR Total Amount(a+b)</th>\r\n                <th>Transaction Date</th>\r\n                <th>Debited On</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead> --\x3e\r\n            <tbody  *ngIf="filterDataArray?.length > 0; else noSearchRec">\r\n\r\n\r\n              <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo }">\r\n\r\n\r\n                <td>{{data?.paymentType}}</td>\r\n                <td>{{data?.paymentTokenNo}}</td>\r\n                <td>{{data?.transactionNo}}</td>\r\n                <td>{{data?.transactionRefNo}}</td>\r\n                <td>{{data?.paymentGateway}}</td>\r\n                <td>{{data?.paymentAmount}}</td>\r\n                <td>{{data?.refundedAmount}}</td>\r\n                <td>{{data?.penaltyAmount}}</td>\r\n                <td>{{data?.totalAmount}}</td>\r\n                <td style="white-space: nowrap;">{{data?.refundInitDate | date : \'dd-MM-yyyy, h:mm a\' }}</td>\r\n\r\n                <td style="white-space: nowrap">\r\n                  <a href="javascript:void(0);" class="cursor-pointer" (click)="viewDetails(data)"><i class="fa icon-eye" aria-hidden="true"></i>\r\n                  </a>\r\n                  <u>\r\n                    <a href="{{downloadReciept}}{{data?.transactionNo}}" class="cursor-pointer" title="Download Payment Receipt"><i class="icon icon-download green"></i></a>\r\n                  </u>\r\n                </td>\r\n              </tr>\r\n\r\n\r\n            </tbody>\r\n            <ng-template #noSearchRec>\r\n            <tbody>\r\n              <tr>\r\n                <td *ngIf="!messageToFilter" class="text-center red" colspan="9">Please wait...</td>\r\n                <td *ngIf="messageToFilter" class="text-center red" colspan="9">No record Found.</td>\r\n              </tr>\r\n            </tbody>\r\n            </ng-template>\r\n\r\n          </table>  \r\n          <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n         <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n       </div>\r\n        </div>\r\n      </div>\r\n        \x3c!-- <div class="col-md-12 text-right">\r\n          <pagination-controls id="foo1" (pageChange)="ca = $event"></pagination-controls>\r\n        </div> --\x3e\r\n\r\n      </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<div class="modal show" *ngIf="modalPopup">\r\n  <div class="modal-dialog modal-xl">\r\n    <div class="modal-content">\r\n\r\n      \x3c!-- Modal Header --\x3e\r\n      <div class="modal-header">\r\n        <h4 class="modal-title"><b>Transection Details</b> </h4>\r\n        <button type="button" class="close" (click)="closePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n\r\n        <div class="row">\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.userName}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Email Id</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.emailId}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Mobile No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.mobileNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.transactionNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Token No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.paymentTokenNo}}">\r\n          </div>\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Registraion Type</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.registraionType}}">\r\n          </div> --\x3e\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Gateway Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.sbiReferenceNo}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.payMode}}">\r\n          </div>\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Bank Code</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.bankCode}}">\r\n          </div> --\x3e\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited on</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.creditedOn | date : \'dd-MM-yyyy HH:mm:ss \'}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited Flag</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.creditFlag}}">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Bank Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.bankReferenceNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Date</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.transactionDate}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Heads Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.registraionType}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData?.trxMode}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData?.reqAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control" [value]="transformAmount(allData?.reqAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Additional Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData?.reqPenaltyAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control" [value]="transformAmount(allData?.reqPenaltyAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Total Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData?.reqTotalAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control" [value]="transformAmount(allData?.reqTotalAmount)">\r\n          </div>\r\n\r\n        </div>\r\n\r\n\r\n        <h3 class="text center d-none"><b>Refund Details</b></h3>\r\n        <div class="row d-none" *ngFor="let refOf of refundListOfData">\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            <input type="text" readonly class="form-control" [value]="transformAmount(refOf.refundedAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Additional Amount</label>\r\n            <input type="text" readonly class="form-control" [value]="transformAmount(refOf.penaltyAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Total Amount </label>\r\n            <input type="text" readonly class="form-control" [value]="transformAmount(refOf.totalAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Refund Mode</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.paymentMode)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Ticket No. </label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.ticketNo)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Ticket Query\r\n              <a *ngIf="refOf.attachmentUId!=null" href="{{downloadVdms}}{{refOf.ticketAttachmentDocUID}}" title="Download Ticket Attachment">\r\n                <i class="icon icon-download green"></i>\r\n              </a>\r\n            </label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.ticketDescription)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Reason</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.reasonOfRefund)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Remark</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.remarks)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Account Officer Remark</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.authRemarks)">\r\n          </div>\r\n\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Transaction No.<u>\r\n              <a href="{{downloadReciept}}{{refOf.transactionNo}}" title="Download Payment Receipt">Download</a>\r\n            </u></label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.transactionNo)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Refund Initiated On</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.refundInitDate | date : \'dd-MM-yyyy  HH:mm:ss\')">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Refund Booked On</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.refundBookingDate | date : \'dd-MM-yyyy  HH:mm:ss\')">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Status</label>\r\n            <input type="text" readonly class="form-control" [value]="(refOf.status)">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="popup-overlay" *ngIf="modalOverlayPopup"></div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n\r\n\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n\r\n<app-confirmation-box (outEm)="confirmationEvent($event)" [showMessage]="confirmationEventB"></app-confirmation-box>'},fuKm:function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n\r\n<div class="col-md-12">\r\n  <div > \r\n<div class="col-md-9  mb-4">\r\n<div class="card "> \r\n\x3c!-- .card-body --\x3e\r\n<div class="card-header"><b>Payment Receipt</b></div>\r\n<div class="card-body ">\r\n<div class="row ">\r\n\r\n<div class="col-md-12 table-responsive">\r\n\r\n<table class="table table-bordered text-center">\r\n<thead class="bg-light font-weight-bold">\r\n<tr>\r\n\r\n\r\n<td>Token</td>\r\n<td>Transaction Ref No.</td>\r\n<td>Mode of Payment</td>\r\n<td>Date of Transaction</td>\r\n\r\n<td>Total Fees</td>\r\n\r\n\r\n<td>Status</td>\r\n\r\n<td>Action</td>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n<tr>\r\n<td>1231</td>\r\n<td> 1212</td>\r\n<td>Online</td>\r\n<td>10/01/2020</td>\r\n<td>5000</td>\r\n<td>Refunded</td>\r\n<td><a href="#"  data-toggle="modal" data-target="#refund_rec" ><img alt="#" src="https://static.thenounproject.com/png/673585-200.png" class="w-25"> </a></td>\r\n</tr>\r\n<tr>\r\n  <td>1231</td>\r\n  <td> 1212</td>\r\n  <td>Online</td>\r\n  <td>10/01/2020</td>\r\n  <td>5000</td>\r\n  <td>Refunded</td>\r\n  <td><a href="#"  data-toggle="modal" data-target="#refund_rec" ><img alt="#" src="https://static.thenounproject.com/png/673585-200.png" class="w-25"> </a></td>\r\n  </tr>\r\n  <tr>\r\n    <td>1231</td>\r\n    <td> 1212</td>\r\n    <td>Online</td>\r\n    <td>10/01/2020</td>\r\n    <td>5000</td>\r\n    <td>Refunded</td>\r\n    <td><a href="#"  data-toggle="modal" data-target="#refund_rec" ><img alt="#" src="https://static.thenounproject.com/png/673585-200.png" class="w-25"> </a></td>\r\n    </tr>\r\n    <tr>\r\n      <td>1231</td>\r\n      <td> 1212</td>\r\n      <td>Online</td>\r\n      <td>10/01/2020</td>\r\n      <td>5000</td>\r\n      <td>Refunded</td>\r\n      <td><a href="#"  data-toggle="modal" data-target="#refund_rec" ><img alt="#" src="https://static.thenounproject.com/png/673585-200.png" class="w-25"> </a></td>\r\n      </tr>\r\n</tbody>\r\n</table>\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\x3c!-- /.card-body --\x3e \r\n</div>\r\n</div>\r\n\r\n</div>\r\n</div>\r\n\r\n<div class="modal" id="refund_rec">\r\n  <div class="modal-dialog modal-xl">\r\n  <div class="modal-content"> \r\n  \r\n  \x3c!-- Modal Header --\x3e\r\n  <div class="modal-header">\r\n  <h4 class="modal-title"><b>Process Refund Request</b>  </h4>\r\n  <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n  </div>\r\n  \r\n  \x3c!-- Modal body --\x3e\r\n  <div class="modal-body">\r\n  \r\n    <form [formGroup]="refundForm" id="validateFoem">\r\n  \r\n  <div class="col-md-12">\r\n  <div class="col-md-4 mb-4">\r\n  <label class="control-label font-weight-bold">Payment Head</label>\r\n  <div class="mt-3">abc</div>\r\n  </div>\r\n  <div class="col-md-4 mb-4">\r\n  <label class="control-label font-weight-bold ">Token</label>\r\n  <div class="mt-3">121212121212</div>\r\n  </div>\r\n  <div class="col-md-4 mb-4">\r\n  <label class="control-label font-weight-bold ">SBI Recipt No.</label>\r\n  <div class="mt-3">121231233123</div>\r\n  </div>\r\n  <div class="col-md-4 mb-4">\r\n  <label class="control-label font-weight-bold ">Mode of Payment</label>\r\n  <div class="mt-3">Net Banking</div>\r\n  </div>\r\n  <div class="col-md-4 mb-4">\r\n  <label class="control-label font-weight-bold ">Date of Transaction</label>\r\n  <div class="mt-3">20/01/2020</div>\r\n  </div>\r\n  <div class="col-md-4 mb-4">\r\n  <label class="control-label font-weight-bold ">Date of Credit</label>\r\n  <div class="mt-3">21/01/2020</div>\r\n  </div>\t\r\n  \r\n  </div>\r\n  <div class=" text-black col-md-12 title Title_y  mb-2 ">Beneficiary Details </div>\r\n  \r\n  <div class="col-md-12 mb-4">\r\n  <label class="control-label font-weight-bold col-md-4">Beneficiary Name</label>\r\n  <div class="col-md-8">\r\n  <input type="text" class="form-control" disabled=[disabled] >\r\n  </div>\r\n  </div>\r\n  <div class="col-md-12 mb-4">\r\n  <label class="control-label font-weight-bold col-md-4">Beneficiary Email</label>\r\n  <div class="col-md-8">\r\n  <input type="text" class="form-control" disabled=[disabled]>\r\n  </div>\r\n  </div>\r\n  <div class="col-md-12 mb-4">\r\n  <label class="control-label font-weight-bold col-md-4">Beneficiary Contact</label>\r\n  <div class="col-md-8">\r\n  <input type="text" class="form-control" disabled=[disabled]>\r\n  </div>\r\n  </div>\r\n  <div class="clearfix"></div>\r\n  <hr>\r\n  \r\n  \r\n  <div class="col-md-12 mb-2">\r\n  <label class="control-label font-weight-bold col-md-4">Reasons for Refund\r\n  <small  class="font-9">(Please specify)</small>\r\n  </label>\r\n  <div class="col-md-8">\r\n  \r\n  <div class="form-check-inline">\r\n  <label class="form-check-label">\r\n  <input type="radio" class="form-check-input" disabled=[disabled] name="optradio">Duplicate Payment\r\n  </label>\r\n  </div>\r\n  <div class="form-check-inline">\r\n  <label class="form-check-label">\r\n  <input type="radio" class="form-check-input" disabled=[disabled] name="optradio">Project Outside Planning area\r\n  </label>\r\n  </div>\r\n  \r\n  <div class="form-check-inline">\r\n  <label class="form-check-label">\r\n  <input type="radio" class="form-check-input"  disabled=[disabled] name="optradio">Excess Payment\r\n  </label>\r\n  </div>\r\n  \r\n  <div class="form-check-inline">\r\n  <label class="form-check-label">\r\n  <input type="radio" class="form-check-input" disabled=[disabled] name="optradio">Any Other\r\n  </label>\r\n  \r\n  \r\n  \r\n  </div>\r\n  \x3c!-- <input type="text" class="form-control" placeholder="" required=""> --\x3e\r\n  \r\n  \r\n  </div>\r\n  </div>\r\n  \r\n  <div class="col-md-12 mb-4">\r\n  <label class="control-label font-weight-bold col-md-4">Amount of Refund Claimed</label>\r\n  <div class="col-md-8">\r\n  <input type="text" class="form-control" disabled=[disabled]>\r\n  </div>\r\n  </div>\r\n  <div class="col-md-12 mt-4">\r\n  <label class="control-label font-weight-bold ">Refund  Type</label>\r\n  \r\n  <div class=" mt-3">\r\n  <div class="form-check-inline badge p-2 pr-3 pl-3">\r\n  <label class="form-check-label font-weight-bold">\r\n  <input type="radio" class="form-check-input" disabled=[disabled] formControlName="refundIdFlag" value="Online" name="refundIdFlag" (change)="checkRadio($event)">Online\r\n  </label>\r\n  </div>\r\n  <div class="form-check-inline  badge  p-2  pr-3 pl-3">\r\n  <label class="form-check-label font-weight-bold">\r\n  <input type="radio" class="form-check-input" disabled=[disabled] formControlName="refundIdFlag"   value="Offline" name="refundIdFlag" (change)="checkRadio($event)">Offline\r\n  </label>\r\n  </div>\r\n  \r\n  </div>\r\n  </div>\r\n  \r\n  <div class="row">\r\n  \r\n  <div class="col-md-12  mt-3 pt-4 pb-4" *ngIf="!online">\r\n  \x3c!-- \r\n  <div class="col-md-12 mb-3">\r\n  <div class="badge bg-danger text-white">This panel show when offline payment</div>\r\n  </div> --\x3e\r\n  \r\n  <div class="col-md-4 mb-3 ">\r\n  <label class="control-label font-weight-bold">RERA Token No.</label>\r\n  <input type="text" class="form-control" formControlName="reraTokenNo" disabled=[disabled] placeholder="">\r\n  \r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n  <label class="control-label font-weight-bold">Transaction Ref No.</label>\r\n  <input type="text" class="form-control" formControlName="transactionRefNo" disabled=[disabled]    [disabled=[disabled]]="!ischeque" placeholder="">\r\n  \r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n    <div class="form-group ">\r\n    <label class="control-label font-weight-bold">Payment Mode<sup>*</sup></label>\r\n    <select class="form-control" formControlName="paymentMode" disabled=[disabled] #val (change)="checkType(val.value)" >\r\n      <option value="">--Select--</option>\r\n    <option value="NEFT">NEFT</option>\r\n    <option value="RTGS">RTGS</option>\r\n    <option value="CHEQUE">Cheque</option>\r\n    <option value="NETBANKING">Net Banking</option>\r\n    </select>\r\n    \r\n    \r\n    </div>\r\n    </div>\r\n  <div class="col-md-4 mb-3">\r\n  <label class="control-label font-weight-bold">Date of Refund.</label>\r\n  <input type="date" class="form-control" disabled=[disabled] formControlName="dateRefund" placeholder="">\r\n  \r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n  <div class="form-group">\r\n  <label class="control-label font-weight-bold">Attach Payment Receipt<sup>*</sup></label>\r\n  <input type="hidden" class="form-control" disabled=[disabled]  [(ngModel)]="outputValue.paymentReceipt" formControlName="paymentReceiptId"  placeholder="" >\r\n  <app-file-upload (myEvent)="setValue($event)" [parm]="{fileId:\'paymentReceipt\',docId:docId1,show:false,fileType:[\'pdf\']}"></app-file-upload>\r\n  \r\n  \r\n  \r\n  </div>\r\n  </div>\r\n  \r\n  </div>  \r\n  <div class="col-md-12  mt-3 pt-4 pb-4" *ngIf="online">\r\n  \x3c!-- <div class="col-md-12 mb-3">\r\n  <div class="badge bg-danger text-white">This panel show when Online payment</div>\r\n  </div>  --\x3e\r\n  <div class="col-md-4 mb-3 ">\r\n  <label class="control-label font-weight-bold">RERA Token No.</label>\r\n  <input type="text" class="form-control" disabled=[disabled] formControlName="reraTokenNo" placeholder="">\r\n  </div>\r\n  </div>\r\n  </div>\r\n  \r\n  <div class="col-md-12 mb-4">\r\n  <label class="control-label font-weight-bold col-md-4">Remarks</label>\r\n  <div class="col-md-8">\r\n  <textarea rows="2" cols="1" disabled=[disabled] class="form-control"></textarea>\r\n  </div>\r\n  </div>\r\n  \r\n\r\n  </form>\r\n  </div>\r\n  </div>\r\n  </div>\r\n  </div>\r\n</div>'},jUNI:function(t,e,n){"use strict";n.r(e),e.default='\r\n<div class="row">\r\n    <div class="col-md-12 mb-4 ">\r\n        <div class="card ">\r\n            <div class="card-header"><b>Offline Payment</b></div>\r\n            <div class="pl-4">\r\n                <form [formGroup]="searchForm" id="validateFoem">\r\n            <div class="row align-items-center mt-3 mb-3 pl-2">\r\n                <div class="form-group col-md-5">\r\n                    <label class="control-label font-weight-bold">Process<sup>*</sup></label>\r\n                    <select class="form-control" formControlName="searchProcess">\r\n                        <option value="">--Select--</option>\r\n                        <option value="Challan">Challan</option>\r\n                    </select>\r\n                </div>\r\n                <div class="form-group col-md-5">\r\n                    <label class="control-label font-weight-bold">Application Number<sup>*</sup></label>\r\n                        <input type="text" class="form-control" formControlName="appNumber">\r\n                </div>\r\n                <div class="form-group col-md-2">\r\n                    <input type="button" class="btn btn-primary mt-5" [disabled]="this.searchForm.invalid" value="Search" (click)="searchData()">\r\n                    </div>\r\n            </div>\r\n        </form>\r\n<div class="table-responsive pl-4" *ngIf="showRespodentData">\r\n    <table class="table table-bordered">\r\n        <thead>\r\n            <tr>\r\n                <th>Respondent Name</th>\r\n                <th>Respondent Email</th>\r\n                <th>Respondent Mobile</th>\r\n                <th>Outstanding Amount</th>\r\n                <th>Paid Amount</th>\r\n                <th>Total Amount</th>\r\n            </tr>\r\n        </thead>\r\n<tbody>\r\n    <tr>\r\n        <td>{{respodantList.respondantUserName}}</td>\r\n        <td>{{respodantList.respondantEmailId}}</td>\r\n        <td>{{respodantList.respondantMobile}}</td>\r\n        <td>{{challanData.outstandingAmount}}</td>\r\n        <td>{{challanData.paidAmount}}</td>\r\n        <td>{{challanData.chalanAmt}}</td>\r\n    </tr>\r\n</tbody>\r\n    </table>   \r\n\r\n    <table class="table table-bordered mt-4">\r\n        <thead>\r\n            <tr>\r\n                <th>Transaction No</th>\r\n                <th>Paid Amount</th>\r\n                <th>Transaction Date</th>\r\n                <th>Download Receipt</th>\r\n            </tr>\r\n        </thead>\r\n<tbody>\r\n    <tr *ngFor="let data of paymentList">\r\n        <td>{{data.transactionNo}}</td>\r\n        <td>{{data.amount}}</td>\r\n        <td>{{data.submissionDate | date: \'dd-MM-yyyy\'}}</td>\r\n        <td><a href="{{data.downloadReceipt}}" class="btn btn-primary" target="_blank" download>Download</a> </td>\r\n    </tr>\r\n</tbody>\r\n    </table>\r\n\r\n</div>\r\n\r\n            <form [formGroup]="offilePaymentForm" id="validateFoem" *ngIf="challanInvalid">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="challanData.chalanId" formControlName="processId">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="searchValue.searchProcess" formControlName="processType">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="respodantList.respondantUserName" formControlName="userName">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="respodantList.respondantEmailId" formControlName="emailId">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="respodantList.respondantMobile" formControlName="mobileNo">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="totalAmount" formControlName="totalAmount">\r\n                <input type="hidden" readonly class="form-control" [(ngModel)]="challanData.chalanNo" formControlName="appNo">\r\n                <div class="card-body">\r\n                    <div class="row">\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Payment Head<sup>*</sup></label>\r\n                            <input type="text" readonly class="form-control" [(ngModel)]="challanData.paymentHead" formControlName="paymentHead">\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Bank Name<sup>*</sup></label>\r\n                            <input type="hidden" readonly class="form-control" [(ngModel)]="bankName" formControlName="bankName">\r\n                            <select #bankData (click)="selectBank($event, bankData.value)" class="form-control" formControlName="bankCode" [(ngModel)]="bankCode">\r\n                                <option value="">--Select--</option>\r\n                                <option *ngFor="let data of bankMasterData" [value]="data.bankCode">{{data.bankName}}</option>\r\n                            </select>\r\n                            <div class="error-box"><small class="error"> Pay Mode can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Pay Mode<sup>*</sup></label>\r\n                            <select class="form-control" #pay formControlName="payMode" (click)="setPayMode(pay.value)">\r\n                                <option value="">--Select--</option>\r\n                                <option value="Demand Draft">Demand Draft</option>\r\n                                <option value="Cheque">Cheque</option>\r\n                                <option value="NEFT">NEFT</option>\r\n                                <option value="RTGS">RTGS</option>\r\n                            </select>\r\n                            <div class="error-box"><small class="error"> Pay Mode can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Amount<sup>*</sup></label>\r\n                            <input type="number" [readonly]="splitYes" [(ngModel)]="outstandingAmount" (focusout)="checkAmount();" (keyup)="checkAmount();" class="form-control" formControlName="amount">\r\n                            <div class="error-box"><small class="error"> The amount should not exceed the outstanding amount</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Re-Confirm Amount<sup>*</sup></label>\r\n                            <input type="number" [(ngModel)]="confirmAmt" (focusout)="confirmAmount()" (keyup)="confirmAmount()" class="form-control" formControlName="confirmAmount">\r\n                            <div class="error-box"><small class="error"> The Confirm Amount is not matching with Outstanding Amount.</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">{{payMode}} Number<sup>*</sup></label>\r\n                            <input type="text" class="form-control" formControlName="ddChequeNo">\r\n                            <div class="error-box"><small class="error"> {{payMode}} Number can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">{{payMode}} Date<sup>*</sup></label>\r\n                            <input type="date" max="{{currentDate | date:\'yyyy-MM-dd\'}}" class="form-control" formControlName="ddChequeDate">\r\n                            <div class="error-box"><small class="error"> {{payMode}} Date can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">{{payMode}} Received Date<sup>*</sup></label>\r\n                            <input type="date" max="{{currentDate | date:\'yyyy-MM-dd\'}}" class="form-control" formControlName="ddChequeRecievingDate">\r\n                            <div class="error-box"><small class="error"> {{payMode}} Received Date can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">{{payMode}} Credited on Date<sup>*</sup></label>\r\n                            <input type="date" max="{{currentDate | date:\'yyyy-MM-dd\'}}" class="form-control" formControlName="creditedOnDate">\r\n                            <div class="error-box"><small class="error"> {{payMode}} Credited on Date can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Remarks<sup>*</sup></label>\r\n                            <textarea class="form-control" formControlName="remark"></textarea>\r\n                            <div class="error-box"><small class="error"> Remarks can not be blank</small></div>\r\n                        </div>\r\n                        <div class="form-group col-md-4">\r\n                            <label class="control-label font-weight-bold">Scan Document<sup>*</sup></label>\r\n                            <input type="hidden" [(ngModel)]="outputValue.scanDocId" class="form-control" formControlName="docId">\r\n                            <app-file-upload (myEvent)="setValue($event)" [parm]="{fileId:\'scanDocId\',docId:docId1,close:false,show:false,fileType:[\'pdf\',\'jpg\',\'jpeg\',\'png\']}"></app-file-upload>\r\n                        </div>\r\n                    </div>\r\n<div class="row">\r\n    <div class="col-md-12 text-center">\r\n        <input type="Submit" value="Submit" [disabled]="this.offilePaymentForm.invalid" class="btn btn-primary" (click)="formSubmit()">\r\n    </div>\r\n</div>\r\n                </div>\r\n                \r\n            </form>\r\n        </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<app-validation-message [message]="inputJson"></app-validation-message>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>'},o7Gy:function(t,e,n){"use strict";n.r(e),e.default=""},oKNn:function(t,e,n){"use strict";n.r(e);var a=n("mrSG"),l=n("8Y7J"),r=n("SVse"),o=n("s7LF"),s=n("4nBV"),i=n("ybvR"),d=n("T9Jj"),c=n("iInd"),m=n("vTBr"),p=n("FvaC");let u=class{constructor(t,e){this._http=t,this._apiurl=e}searchPaymentDetails(t,e){return"allPayment"==e?this._http.securepost(this._apiurl.payment+"secure/allPaymentDetails-for-dashboard",t):"Withdrawal"==e?this._http.secureget(this._apiurl.projectWithdrawl+"secure/wf-state-code/APPROVED"):"prLand"==e?this._http.secureget(this._apiurl.projectRegAPI+"secure/land-area/status/REFUND"):"enquiry"==e?this._http.secureget(this._apiurl.onlineEnquiry+"/secure/trx/refund-payment-list"):this._http.secureget(this._apiurl.projectAlteration+"secure/land-area/status/REFUND")}refundProcessService(t){return this._http.securepost(this._apiurl.payment+"secure/save-paymentrefund",t)}checkForValidTicket(t){return this._http.secureget(this._apiurl.ticketAPI+"secure/ticket/ticket-no-pending-finance-dep/"+t)}getPaymentRefence(t){return this._http.secureget(this._apiurl.payment+"secure/getPaymentByTrxNo/"+t)}getProjectWorkflowId(t){return this._http.secureget(this._apiurl.projectRegAPI+"secure/project-app/getproject-certdetails/"+t)}getProjectAltDetails(t){return this._http.secureget(this._apiurl.projectAlteration+"secure/"+t)}getWofId(t,e){return"PROJECT_REG"==e?this._http.secureget(this._apiurl.projectRegAPI+"secure/project-app/get-wfo-id-by-prjid/"+t):"PROJECT_ALT"==e?this._http.secureget(this._apiurl.projectAltAPI+"secure/get-wfo-id-by-prjid/"+t):void 0}};u.ctorParameters=()=>[{type:m.a},{type:p.a}],u=a.b([Object(l.B)({providedIn:"root"})],u);var h=n("2Vo4"),b=n("I5r7"),y=n("EUZL");let f=class{constructor(t,e,n,a,l){this.exportAsService=t,this.datepipe=e,this._router=n,this._http=a,this._apiUrl=l,this.refundDataVal={},this.allPaymentDetail=new Array,this.requestAmount=0,this.requestPenalty=0,this.ammount=0,this.ticektInfo={},this.confirmationEventB=new h.a({}),this.date=new Date,this.currentDate=new Date,this.close=!0,this.offline=!1,this.online=!1,this.ischeque=!0,this.paymentReceiptUId="",this.docId1=new h.a({}),this.inputJson=new h.a({}),this.modalPopup=!1,this.ca=1,this.loadingSpinner=!1,this.tableJsonData=new h.a({}),this.paginationCount=10}ngOnInit(){this.downloadReciept=this._apiUrl.paymentDownload+"downloadPatmentReciept/",this.downloadVdms=this._apiUrl.fileDownloadAPI+"download/",this.fileId={},this.outputValue={},this.maxDate=this.datepipe.transform(new Date(this.currentDate.getFullYear()+10,11,31),"yyyy-MM-dd"),this.currentFormatDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.currentToDateFromValue=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.fileId={},this.outputValue={},this.refundForm=new o.d({paymentId:new o.c(null),refundMode:new o.c(null),ammount:new o.c(null,o.h.required),reason:new o.c("",o.h.required),remarks:new o.c(null,o.h.required),transactionNo:new o.c(null),paymentMode:new o.c(null),bankName:new o.c(null),refundedOn:new o.c(null),scanCopyId:new o.c(null),requestId:new o.c(null),ticketNo:new o.c(null),requestAmount:new o.c(null,o.h.required),requestPenalty:new o.c(null,o.h.required),ticketDescription:new o.c(null),ticketAttachmentDocUID:new o.c(null)}),this.paymentDetailForm=new o.d({fromDate:new o.c(null),toDate:new o.c(null),processType:new o.c(""),sbiRefNo:new o.c(null),tokenNo:new o.c(null),mode:new o.c(""),status:new o.c("")}),this.getAllPayment()}setValue(t){this.outputValue[t.fid]=t.docid}search(){this.loadingSpinner=!0,console.log(this.paymentDetailForm.value),this.loader=!0,this._http.searchPaymentDetails(this.paymentDetailForm.value,"allPayment").subscribe(t=>{this.loadingSpinner=!1,console.log(t),this.allPaymentDetail=t.data;let e=[],n=[];this.allPaymentDetail=[],e=t.data,e.length>0&&(e.forEach(t=>{t.transaction.transactionDate&&(n=t.transaction.transactionDate.split("/"),n.length>0&&(t.transaction.transactionDate=n[0]+"-"+n[1]+"-"+n[2])),this.allPaymentDetail.push(t)}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default")),this.loader=!1},t=>{this.loadingSpinner=!1,console.log(t),this.loader=!1,this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""})})}getAllPayment(){let t=window.location.hash;this.headerType=[],"#/refund-recovery/payment-detail"==t?this.setPaymentType="allPayment":"#/refund-recovery/withdraw-detail"==t&&(this.setPaymentType="Withdrawal"),"allPayment"==this.setPaymentType?this._http.searchPaymentDetails(this.paymentDetailForm.value,this.setPaymentType).subscribe(t=>{console.log(t);t.data;this.allPaymentDetail=[],this.headerType=["Head","Token No","Gateway Reference No","INR Amount(a)","INR Additional Amount(b)","INR Total Amount(a+b)","Transaction Date","Credited On"];let e=[];e=t.data,this.allPaymentDetail=e,this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),console.log(this.allPaymentDetail)},t=>{console.log(t)}):(this.headerType=["Process Name","Project Ack No","Project Name","Promoter Name","Promoter Mobile","Total Payment Amount","Approved Amount","Approved On"],this.allPaymentDetail=[],this._http.searchPaymentDetails(this.paymentDetailForm.value,"Withdrawal").subscribe(t=>{console.log(t),t.data.forEach(t=>{this.allPaymentDetail.push({registraionType:t.processName+" - Withdrawal",paymentTokenNo:t.projectAckNo,sbiReferenceNo:t.projectName,reqAmount:t.promotorName,reqPenaltyAmount:t.promotorMobile,reqTotalAmount:t.totalPaymentAmt,transactionDate:t.approvedAmount,createdOn:t.updatedOn,transactionNo:t.transactionNo,withdrawalId:t.withdrawalId,projectId:t.projectId,processName:"Withdrawal"})}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),console.log(this.allPaymentDetail)},t=>{console.log(t)}),this._http.searchPaymentDetails(this.paymentDetailForm.value,"prLand").subscribe(t=>{console.log(t),t.data.forEach(t=>{this.allPaymentDetail.push({registraionType:"Registration - Land Change",paymentTokenNo:t.ackno,sbiReferenceNo:t.projectName,reqAmount:t.promoterName,reqPenaltyAmount:t.promoterMobile,reqTotalAmount:t.oldProjRegFees,transactionDate:t.revicedFee,createdOn:t.activityOn,transactionNo:t.transactionNo,withdrawalId:t.editProjectLandLogId,projectId:t.projectRegId,processName:"Project Land Area Change"})}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),console.log(this.allPaymentDetail)},t=>{console.log(t)}),this._http.searchPaymentDetails(this.paymentDetailForm.value,"enquiry").subscribe(t=>{console.log(t),t.data.forEach(t=>{this._http.getPaymentRefence(t.transactionNo).subscribe(e=>{let n,a=e.data;n="PROJECT_REG_ONLINE"==t.processType?"Registration":"Alteration",this.allPaymentDetail.push({registraionType:n+" - Online Enquiry",paymentTokenNo:t.ackNo,sbiReferenceNo:t.projectName,reqAmount:a.userName,reqPenaltyAmount:a.mobileNo,reqTotalAmount:a.reqTotalAmount.toFixed(2),transactionDate:t.reqAmount,createdOn:a.createdOn,transactionNo:t.transactionNo,withdrawalId:t.enqId,projectId:t.processId,processName:t.processType})})}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),console.log(this.allPaymentDetail)},t=>{console.log(t)}),this._http.searchPaymentDetails(this.paymentDetailForm.value,"paLand").subscribe(t=>{console.log(t),t.data.forEach(t=>{this.allPaymentDetail.push({registraionType:"Alteration - Land Change",paymentTokenNo:t.ackno,sbiReferenceNo:t.projectName,reqAmount:t.promoterName,reqPenaltyAmount:t.promoterMobile,reqTotalAmount:t.oldProjRegFees,transactionDate:t.revicedFee,createdOn:t.activityOn,transactionNo:t.transactionNo,withdrawalId:t.editProjectLandLogId,projectId:t.projectAltId,processName:"Alteration Land Area Change"})}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),console.log(this.allPaymentDetail)},t=>{console.log(t)}))}changeDate(t){this.newDate=new Date(t),this.newDate.setDate(this.newDate.getDate()+1),this.toMinStopage=this.datepipe.transform(this.newDate,"yyyy-MM-dd"),console.log(this.toMinStopage)}viewDetails(t){console.log(t),this._http.getPaymentRefence(t.transactionNo).subscribe(t=>{this.allData=t.data,this.allData.transactionDate=null==t.data.transactionDate?"NA":t.data.transactionDate,this.allData.paymentTokenNo=null==t.data.paymentTokenNo?"NA":t.data.paymentTokenNo},t=>{}),this.modalPopup=!0,this.modalOverlayPopup=!0}closePopup(){this.modalPopup=!1,this.modalOverlayPopup=!1,this.refund_rec=!1}refundProcess(t){console.log(t),"Alteration Land Area Change"==t.processName||"PROJECT_ALT_ONLINE"==t.processName?this._http.getProjectAltDetails(t.projectId).subscribe(e=>{"Approved"==e.data.stateName?this.submitRefundRequest(t):this.inputJson.next({popShow:!0,popMsg:"The application is under process. Please wait for approval",popClass:"alert alert-danger",popRoute:""})},t=>{}):"Project Land Area Change"==t.processName||"PROJECT_REG_ONLINE"==t.processName?this._http.getProjectWorkflowId(t.projectId).subscribe(e=>{null!=e.data.certificateUid?this.submitRefundRequest(t):this.inputJson.next({popShow:!0,popMsg:"The application is under process. Please wait for approval",popClass:"alert alert-danger",popRoute:""})},t=>{}):this.submitRefundRequest(t)}submitRefundRequest(t){this._http.getPaymentRefence(t.transactionNo).subscribe(e=>{this.refundDataVal=e.data,this.refundDataVal.transactionDate=null==e.data.transactionDate?"NA":e.data.transactionDate,this.refundDataVal.paymentTokenNo=null==e.data.paymentTokenNo?"NA":e.data.paymentTokenNo,this.rRequestId=e.data.rRequestId,this.paymentId=e.data.paymentId,this.refundMode=e.data.trxMode,this.beneficiaryName=e.data.userName,this.beneficiaryMobile=e.data.mobileNo,this.beneficiaryEmail=e.data.emailId,this.transactionDate=e.data.transactionDate,this.sbiReference=e.data.sbiReferenceNo,this.amount=e.data.reqTotalAmount,this.totalAmmountSub=e.data.reqTotalAmount,this.modeSub=e.data.payMode,this.transactionNoSub=e.data.transactionNo,this.processId=t.withdrawalId,this.processName=t.processName,"Withdrawal"==this.setPaymentType&&(this.requestAmount=t.transactionDate,this.ammount=t.transactionDate)},t=>{}),this.refund_rec=!0,this.modalOverlayPopup=!0,"OFFLINE"==this.refundMode?this.isOffline=!0:this.isOffline=!1}checkType(t){this.ischeque="CHEQUE"!=t}clickToExport(){const t=y.utils.table_to_sheet(this.tableOpt.nativeElement);console.log(t),t["!cols"]=[],t["!cols"][8]={hidden:!0};const e=y.utils.book_new();y.utils.book_append_sheet(e,t,"Sheet1"),y.writeFile(e,"Payment and Refunds.xlsx")}clicToDownloadReceipt(t){}paymentNotMoreThan(t,e){let n,a;console.log(t,e),n=""==t||null==t?0:t,a=""==e||null==e?0:e,this.ammount=parseInt(n)+parseInt(a),console.log(this.ammount),this.ammount>this.totalAmmountSub&&(this.requestAmount=null,this.inputJson.next({popShow:!0,popMsg:"Refund amount is greater than Paid Amount.",popClass:"alert alert-danger",popRoute:""})),t=t.toString(),e=e.toString(),this.convertFunctionToLocal(t,e)}checkTicketNoIsValidOrNot(t){t&&(this.loadingSpinner=!0,this._http.checkForValidTicket(t).subscribe(t=>{console.log(t),this.loadingSpinner=!1,"200"==t.status?this.ticektInfo=t.data:(this.ticektInfo={},this.ticketNo="",this.inputJson.next({popShow:!0,popMsg:"Unable to search record on this Ticket no.",popClass:"alert alert-danger",popRoute:""}))},t=>{console.log(t),this.loadingSpinner=!1,this.refundForm.get("ticketNo").reset(),this.inputJson.next({popShow:!0,popMsg:"Unable to search record on this Ticket no.",popClass:"alert alert-danger",popRoute:""})}))}refundSubmit(){this.loadingSpinner=!0;let t={paymentId:this.refundForm.value.paymentId,reason:this.refundForm.value.reason,remarks:this.refundForm.value.remarks,paymentMode:this.modeSub,ticketNo:this.refundForm.value.ticketNo,ticketDescription:this.refundForm.value.ticketDescription,ticketAttachment:this.refundForm.value.ticketAttachmentDocUID,totalAmount:this.refundForm.value.ammount,amount:this.refundForm.value.requestAmount,penaltyAmount:this.refundForm.value.requestPenalty,transactionNo:this.refundDataVal.transactionNo,paymentTokenNo:this.refundDataVal.paymentTokenNo,processId:this.processId,processName:this.processName};console.log(this.refundForm.value),console.log(t),this._http.refundProcessService(t).subscribe(t=>{this.loadingSpinner=!1,console.log(t),this.refund_rec=!1,this.modalOverlayPopup=!1,this.refundForm.reset(),this.getAllPayment(),this.inputJson.next({popShow:!0,popMsg:"Refund request created successfully",popClass:"alert alert-success",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""}),console.log(t)})}showConfirmation(){this.refundForm.valid&&this.confirmationEventB.next({flag:!0,messageV:"Are you sure want to proceed INR "+this.transformAmount(this.refundForm.value.ammount)+" for refund?"})}confirmationEvent(t){"OK"==t&&this.refundSubmit()}transformAmount(t){return Number(t).toLocaleString("en-IN")}convertFunctionToLocal(t,e){this.requestAmount=t,this.requestPenalty=e}removeCommas(t,e){""!=t&&null!=t&&(t=t.toString(),this.requestAmount=Number(t.replace(/,/g,""))),""!=e&&null!=e&&(e=e.toString(),this.requestPenalty=Number(e.replace(/,/g,"")))}allowNumericOnly(t){var e;let n;return console.log(t.which),n=t.target.value,!(!t.metaKey&&!t.ctrlKey&&37!==t.which&&39!==t.which)||32!==t.which&&(0===t.which||(t.which<33||(e=String.fromCharCode(t.which),!!/[\d\s]/.test(e))))}tableSortFilter(t,e,n,a){this.sortData="default"==a?{sortType:"DESC",key:"createdOn",typ:"date",sort:a}:{sortType:t,key:e,typ:n,sort:a};let l={headers:[{key:"registraionType",label:this.headerType[0],type:"string"},{key:"paymentTokenNo",label:this.headerType[1],type:"string"},{key:"sbiReferenceNo",label:this.headerType[2],type:"string"},{key:"reqAmount",label:this.headerType[3],type:"number"},{key:"reqPenaltyAmount",label:this.headerType[4],type:"number"},{key:"reqTotalAmount",label:this.headerType[5],type:"number"},{key:"transactionDate",label:this.headerType[6],type:"date"},{key:"createdOn",label:this.headerType[7],type:"date"}],actualArray:this.allPaymentDetail,sortData:this.sortData};this.tableHeader=l.headers,this.tableJsonData.next({exportJson:l}),console.log(l)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}openProjectDetails(t,e){let n;console.log(t,e),"Registration - Withdrawal"==e||"Registration - Land Change"==e||"Registration - Online Enquiry"==e?n="PROJECT_REG":"Alteration - Withdrawal"!=e&&"Alteration - Land Change"!=e&&"Alteration - Online Enquiry"!=e||(n="PROJECT_ALT"),this._http.getWofId(t,n).subscribe(t=>{sessionStorage.setItem("outSideAccess","outSideAccess"),sessionStorage.setItem("wfoId",t.data),"PROJECT_REG"==n?this._router.navigate(["workflow"]):"PROJECT_ALT"==n&&this._router.navigate(["workflow/altration"])})}};f.ctorParameters=()=>[{type:b.b},{type:r.e},{type:c.e},{type:u},{type:p.a}],a.b([Object(l.kb)("tableOpt",{static:!1})],f.prototype,"tableOpt",void 0),f=a.b([Object(l.n)({selector:"app-payment-detail",template:a.c(n("+DlQ")).default,styles:[a.c(n("560Y")).default]})],f);let v=class{constructor(t,e){this._http=t,this._apiurl=e}searchPaymentDetails(t){return this._http.secureget(this._apiurl.payment+"secure/apply-paymentrefund")}getPaymentRefence(t){return this._http.secureget(this._apiurl.payment+"secure/getPaymentByTrxNo/"+t)}};v.ctorParameters=()=>[{type:m.a},{type:p.a}],v=a.b([Object(l.B)({providedIn:"root"})],v);var g=n("p87Y");let w=class{constructor(t,e,n,a,l){this.datepipe=t,this._router=e,this._http=n,this._apiUrl=a,this._validation=l,this.allPaymentDetail=new Array,this.mainResponse={},this.modalPopup=!1,this.allData={},this.date=new Date,this.currentDate=new Date,this.inputJson=new h.a({}),this.tableJsonData=new h.a({}),this.paginationCount=10}ngOnInit(){this.currentFormatDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.currentToDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.downloadReciept=this._apiUrl.paymentDownload+"downloadPatmentReciept/",this.userType=sessionStorage.getItem("userType"),this.approvalForm=new o.d({fromDate:new o.c(null,o.h.required),toDate:new o.c(null,o.h.required),processType:new o.c(""),sbiRefNo:new o.c(null),tokenNo:new o.c(null),mode:new o.c("")}),this.approveReject=new o.d({refundId:new o.c(null,o.h.required),authRemarks:new o.c(null,o.h.required),checkUserAction:new o.c(null,o.h.required),amount:new o.c(null,[o.h.required,o.h.pattern(this._validation.numRegex)]),penaltyAmount:new o.c(null,[o.h.required,o.h.pattern(this._validation.numRegex)]),totalAmount:new o.c(null,[o.h.required,o.h.pattern(this._validation.numRegex)])}),this.getAllPayment()}closePopup(){this.modalPopup=!1}search(){console.log(this.approvalForm.value),this.loader=!0,this._http.searchPaymentDetails(this.approvalForm.value).subscribe(t=>{console.log(t),this.allPaymentDetail=[];let e=[];e=t.data,e.length>0&&e.forEach(t=>{isNaN(parseInt(t.refundedAmount))?t.refundedAmount=0:t.refundedAmount=parseInt(t.refundedAmount),isNaN(parseInt(t.penaltyAmount))?t.penaltyAmount=0:t.penaltyAmount=parseInt(t.penaltyAmount),t.totalAmount=t.penaltyAmount+t.refundedAmount,this.allPaymentDetail.push(t)}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),this.loader=!1},t=>{console.log(t),this.loader=!1,this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""})})}getAllPayment(){this._http.searchPaymentDetails({fromDate:this.currentFormatDate,toDate:this.currentFormatDate}).subscribe(t=>{console.log(t.data),this.allPaymentDetail=[];let e=[];e=t.data,e.length>0&&e.forEach(t=>{isNaN(parseInt(t.refundedAmount))?t.refundedAmount=0:t.refundedAmount=parseInt(t.refundedAmount),isNaN(parseInt(t.penaltyAmount))?t.penaltyAmount=0:t.penaltyAmount=parseInt(t.penaltyAmount),t.totalAmount=t.penaltyAmount+t.refundedAmount,this.allPaymentDetail.push(t)}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default")},t=>{console.log(t)})}changeDate(t){this.newDate=new Date(t),this.newDate.setDate(this.newDate.getDate()+1),this.toMinStopage=this.datepipe.transform(this.newDate,"yyyy-MM-dd"),console.log(this.toMinStopage)}takeActionOnData(t={}){console.log(t),this.mainResponse=t,this._http.getPaymentRefence(t.transactionNo).subscribe(t=>{this.modalPopup=!0,null!=t.data&&(this.allData=t.data)},t=>{console.log(t)})}transformAmount(t){return Number(t).toLocaleString("en-IN")}tableSortFilter(t,e,n,a){this.sortData="default"==a?{sortType:"DESC",key:"refundInitDate",typ:"date",sort:a}:{sortType:t,key:e,typ:n,sort:a};let l={headers:[{key:"paymentType",label:"Payment Type",type:"string"},{key:"paymentTokenNo",label:"Token No",type:"string"},{key:"transactionNo",label:"Transaction No",type:"string"},{key:"transactionRefNo",label:"Gateway Reference No",type:"string"},{key:"paymentGateway",label:"Payment Gateway",type:"string"},{key:"ticketNo",label:"Ticket No",type:"string"},{key:"paymentAmount",label:"INR Total Paid Amount",type:"string"},{key:"refundedAmount",label:"INR Refund Amount(a)",type:"string"},{key:"penaltyAmount",label:"INR Additional Refund Amount(b)",type:"string"},{key:"totalAmount",label:"INR Total Refund Amount(a+b)",type:"string"},{key:"refundInitDate",label:"Initiated On",type:"date"}],actualArray:this.allPaymentDetail,sortData:this.sortData};this.tableHeader=l.headers,this.tableJsonData.next({exportJson:l}),console.log(l)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}};w.ctorParameters=()=>[{type:r.e},{type:c.e},{type:v},{type:p.a},{type:g.a}],w=a.b([Object(l.n)({selector:"app-approval-payment",template:a.c(n("qeaw")).default,styles:[a.c(n("oUdY")).default]})],w);let D=class{constructor(t,e){this._http=t,this._apiurl=e}searchPaymentDetails(t){return this._http.securepost(this._apiurl.payment+"secure/paymentrefunded-list",t)}refundProcessService(t){return this._http.securepost(this._apiurl.payment+"secure/save-paymentrefund",t)}getPaymentRefence(t){return this._http.secureget(this._apiurl.payment+"secure/getPaymentByTrxNo/"+t)}};D.ctorParameters=()=>[{type:m.a},{type:p.a}],D=a.b([Object(l.B)({providedIn:"root"})],D);let A=class{constructor(t,e,n,a,l){this.exportAsService=t,this.datepipe=e,this._router=n,this._http=a,this._apiUrl=l,this.confirmationEventB=new h.a({}),this.inputJson=new h.a({}),this.allPaymentDetail=new Array,this.allData={},this.modalPopup=!1,this.modalOverlayPopup=!1,this.loadingSpinner=!1,this.refundDataVal={},this.refundListOfData=new Array,this.ca=1,this.date=new Date,this.currentDate=new Date,this.messageToFilter=!1,this.tableJsonData=new h.a({}),this.paginationCount=10}ngOnInit(){this.currentFormatDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.currentToDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.downloadReciept=this._apiUrl.paymentDownload+"downloadPatmentReciept/",this.downloadVdms=this._apiUrl.fileDownloadAPI+"download/",this.refundForm=new o.d({paymentId:new o.c(null),refundMode:new o.c(null),ammount:new o.c(null,o.h.required),reason:new o.c("",o.h.required),remarks:new o.c(null,o.h.required),transactionNo:new o.c(null),paymentMode:new o.c(null),bankName:new o.c(null),refundedOn:new o.c(null),scanCopyId:new o.c(null),requestId:new o.c(null),checkbox:new o.c(null,o.h.requiredTrue),ticketNo:new o.c(null),requestAmount:new o.c(null,o.h.required),requestPenalty:new o.c(null,o.h.required),ticketDescription:new o.c(null)}),this.refundedForm=new o.d({fromDate:new o.c(null),toDate:new o.c(null,o.h.required),processType:new o.c(""),sbiRefNo:new o.c(null),tokenNo:new o.c(null),mode:new o.c("")}),this.getAllPayment()}clickToExport(){const t=y.utils.table_to_sheet(this.tableOpt.nativeElement);console.log(t),t["!cols"]=[],t["!cols"][7]={hidden:!0};const e=y.utils.book_new();y.utils.book_append_sheet(e,t,"Sheet1"),y.writeFile(e,"Payment and Refunds.xlsx")}search(){this.messageToFilter=!0,this.loadingSpinner=!0,console.log(this.refundedForm.value),this.loader=!0,this._http.searchPaymentDetails(this.refundedForm.value).subscribe(t=>{this.loadingSpinner=!1,console.log(t);let e=[],n=[];this.allPaymentDetail=[],e=t.data,e.length>0&&(e.forEach(t=>{t.hasOwnProperty("transaction")&&t.transaction.hasOwnProperty("transactionDate")&&(n=t.transaction.transactionDate.split("/"),n.length>0&&(t.transaction.transactionDate=n[0]+"-"+n[1]+"-"+n[2])),isNaN(parseInt(t.refundedAmount))?t.refundedAmount=0:t.refundedAmount=parseInt(t.refundedAmount),isNaN(parseInt(t.penaltyAmount))?t.penaltyAmount=0:t.penaltyAmount=parseInt(t.penaltyAmount),t.totalAmount=t.penaltyAmount+t.refundedAmount,this.allPaymentDetail.push(t)}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default")),this.loader=!1},t=>{this.loadingSpinner=!1,console.log(t),this.loader=!1,this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""})})}getAllPayment(){this._http.searchPaymentDetails(this.refundedForm.value).subscribe(t=>{console.log(t.data);let e=[],n=[];this.allPaymentDetail=[],e=t.data,e.length>0&&(e.forEach(t=>{t.hasOwnProperty("transaction")&&t.transaction.hasOwnProperty("transactionDate")&&(n=t.transaction.transactionDate.split("/"),n.length>0&&(t.transaction.transactionDate=n[0]+"-"+n[1]+"-"+n[2])),isNaN(parseInt(t.refundedAmount))?t.refundedAmount=0:t.refundedAmount=parseInt(t.refundedAmount),isNaN(parseInt(t.penaltyAmount))?t.penaltyAmount=0:t.penaltyAmount=parseInt(t.penaltyAmount),t.totalAmount=t.penaltyAmount+t.refundedAmount,this.allPaymentDetail.push(t)}),this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"))},t=>{console.log(t)})}changeDate(t){this.newDate=new Date(t),this.newDate.setDate(this.newDate.getDate()+1),this.toMinStopage=this.datepipe.transform(this.newDate,"yyyy-MM-dd"),console.log(this.toMinStopage)}transformAmount(t){return Number(t).toLocaleString("en-IN")}viewDetails(t){console.log(t),this._http.getPaymentRefence(t.transactionNo).subscribe(t=>{this.allData=t.data,this.mainResponse=t.data,this.modalPopup=!0,this.modalOverlayPopup=!0},t=>{})}refundProcess(t){console.log(t),this.refundDataVal=t.transaction,this.rRequestId=t.rRequestId,this.paymentId=t.payId,this.refundMode=t.transaction.trxMode,this.beneficiaryName=t.transaction.userName,this.beneficiaryMobile=t.transaction.mobileNo,this.beneficiaryEmail=t.transaction.emailId,this.transactionDate=t.transaction.transactionDate,this.sbiReference=t.transaction.sbiReferenceNo,this.amount=t.transaction.reqTotalAmount,this.totalAmmountSub=t.totalAmmount,this.modeSub=t.trxMode,this.transactionNoSub=t.transaction.transactionNo,this.refund_rec=!0,this.modalOverlayPopup=!0,"OFFLINE"==t.transaction.trxMode?this.isOffline=!0:this.isOffline=!1}closePopup(){this.modalPopup=!1,this.modalOverlayPopup=!1,this.refund_rec=!1}confirmationEvent(t){console.log(t)}tableSortFilter(t,e,n,a){this.sortData="default"==a?{sortType:"DESC",key:"createdOn",typ:"date",sort:a}:{sortType:t,key:e,typ:n,sort:a};let l={headers:[{key:"paymentType",label:"Head",type:"string"},{key:"paymentTokenNo",label:"Token No",type:"string"},{key:"transactionNo",label:"Transaction No",type:"string"},{key:"transactionRefNo",label:"Gateway Reference No",type:"string"},{key:"paymentGateway",label:"Payment Gateway",type:"string"},{key:"paymentAmount",label:"INR Total Paid Amount",type:"number"},{key:"refundedAmount",label:"INR Refund Amount(a)",type:"number"},{key:"penaltyAmount",label:"INR Additional Refund Amount(b)",type:"number"},{key:"totalAmount",label:"INR Total Refund Amount(a+b)",type:"number"},{key:"refundInitDate",label:"Initiated On",type:"date"}],actualArray:this.allPaymentDetail,sortData:this.sortData};this.tableHeader=l.headers,this.tableJsonData.next({exportJson:l}),console.log(l)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}};A.ctorParameters=()=>[{type:b.b},{type:r.e},{type:c.e},{type:D},{type:p.a}],a.b([Object(l.kb)("tableOpt",{static:!1})],A.prototype,"tableOpt",void 0),A=a.b([Object(l.n)({selector:"app-refunded",template:a.c(n("dbMI")).default,styles:[a.c(n("ICAx")).default]})],A);let N=class{constructor(t){this._router=t,this.offline=!1,this.online=!1,this.ischeque=!0,this.paymentReceiptUId="",this.docId1=new h.a({})}ngOnInit(){this.fileId={},this.outputValue={},this.refundForm=new o.d({refundIdFlag:new o.c(null),reraTokenNo:new o.c(null),transactionRefNo:new o.c(null),dateRefund:new o.c(null),paymentReceiptId:new o.c(null),paymentReceiptUId:new o.c(null),paymentMode:new o.c("")})}setValue(t){this.outputValue[t.fid]=t.docid}checkRadio(t){const e=this.refundForm.get("transactionRefNo"),n=this.refundForm.get("dateRefund"),a=this.refundForm.get("paymentReceipt"),l=this.refundForm.get("paymentMode");"Offline"==t.target.value?(this.online=!1,e.setValidators([o.h.nullValidator]),n.setValidators([o.h.nullValidator]),a.setValidators([o.h.nullValidator]),l.setValidators([o.h.nullValidator])):(this.online=!0,e.setValidators([o.h.nullValidator]),n.setValidators([o.h.nullValidator]),a.setValidators([o.h.nullValidator]),l.setValidators([o.h.nullValidator])),e.updateValueAndValidity(),n.updateValueAndValidity(),a.updateValueAndValidity(),l.updateValueAndValidity()}checkType(t){this.ischeque="CHEQUE"!=t}};N.ctorParameters=()=>[{type:c.e}],N=a.b([Object(l.n)({selector:"app-payment-receipt",template:a.c(n("fuKm")).default,styles:[a.c(n("o7Gy")).default]})],N);let x=class{constructor(t,e){this._http=t,this._apiurl=e}searchPaymentDetails(t){return this._http.securepost(this._apiurl.payment+"secure/allPaymentDetails",t)}refundProcessService(t){return this._http.securepost(this._apiurl.payment+"secure/save-paymentrefund",t)}};x.ctorParameters=()=>[{type:m.a},{type:p.a}],x=a.b([Object(l.B)({providedIn:"root"})],x);let P=class{constructor(t,e,n,a){this.exportAsService=t,this.datepipe=e,this._router=n,this._http=a,this.date=new Date,this.currentDate=new Date,this.close=!0,this.offline=!1,this.online=!1,this.ischeque=!0,this.paymentReceiptUId="",this.docId1=new h.a({}),this.inputJson=new h.a({}),this.modalPopup=!1,this.ca=1}ngOnInit(){this.fileId={},this.outputValue={},this.maxDate=this.datepipe.transform(new Date(this.currentDate.getFullYear()+10,11,31),"yyyy-MM-dd"),this.currentFormatDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.currentToDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.fileId={},this.outputValue={},this.refundForm=new o.d({paymentId:new o.c(null),refundMode:new o.c(null),ammount:new o.c(null,o.h.required),reason:new o.c(null,o.h.required),remarks:new o.c(null,o.h.required),transactionNo:new o.c(null),paymentMode:new o.c(null),bankName:new o.c(null),refundedOn:new o.c(null),scanCopyId:new o.c(null),requestId:new o.c(null)}),this.paymentDetailForm=new o.d({fromDate:new o.c(null),toDate:new o.c(null),processType:new o.c(""),sbiRefNo:new o.c(null),tokenNo:new o.c(null),mode:new o.c(""),status:new o.c("PENDING")}),this.getAllPayment()}setValue(t){this.outputValue[t.fid]=t.docid}search(){console.log(this.paymentDetailForm.value),this.loader=!0,this._http.searchPaymentDetails(this.paymentDetailForm.value).subscribe(t=>{console.log(t),this.allPaymentDetail=t.data,this.loader=!1},t=>{console.log(t),this.loader=!1,this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""})})}getAllPayment(){this._http.searchPaymentDetails({fromDate:this.currentFormatDate,toDate:this.currentFormatDate}).subscribe(t=>{console.log(t.data),this.allPaymentDetail=t.data},t=>{console.log(t)})}changeDate(t){this.newDate=new Date(t),this.newDate.setDate(this.newDate.getDate()+1),this.toMinStopage=this.datepipe.transform(this.newDate,"yyyy-MM-dd"),console.log(this.toMinStopage)}viewDetails(t){this.allData=t.transaction,this.modalPopup=!0,this.modalOverlayPopup=!0}closePopup(){this.modalPopup=!1,this.modalOverlayPopup=!1,this.refund_rec=!1}refundProcess(t){console.log(t),this.rRequestId=t.rRequestId,this.paymentId=t.payId,this.refundMode=t.transaction.trxMode,this.beneficiaryName=t.transaction.userName,this.beneficiaryMobile=t.transaction.mobileNo,this.beneficiaryEmail=t.transaction.emailId,this.transactionDate=t.transaction.transactionDate,this.sbiReference=t.transaction.sbiReferenceNo,this.amount=t.transaction.reqTotalAmount,this.refund_rec=!0,this.modalOverlayPopup=!0,"OFFLINE"==t.transaction.trxMode?this.isOffline=!0:this.isOffline=!1}refundSubmit(){console.log(this.refundForm.value),this._http.refundProcessService(this.refundForm.value).subscribe(t=>{console.log(t),this.refund_rec=!1,this.refundForm.reset(),this.inputJson.next({popShow:!0,popMsg:"Refund request created successfully",popClass:"alert alert-success",popRoute:""})},t=>{this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""}),console.log(t)})}checkType(t){this.ischeque="CHEQUE"!=t}clickToExport(){const t=y.utils.table_to_sheet(this.tableOpt.nativeElement);console.log(t),t["!cols"]=[],t["!cols"][7]={hidden:!0};const e=y.utils.book_new();y.utils.book_append_sheet(e,t,"Sheet1"),y.writeFile(e,"Payment and Refunds.xlsx")}};P.ctorParameters=()=>[{type:b.b},{type:r.e},{type:c.e},{type:x}],a.b([Object(l.kb)("tableOpt",{static:!1})],P.prototype,"tableOpt",void 0),P=a.b([Object(l.n)({selector:"app-refund-request",template:a.c(n("sF7i")).default,styles:[a.c(n("sG7q")).default]})],P);let R=class{constructor(t,e){this._http=t,this._apiurl=e}searchPaymentDetails(t){return this._http.secureget(this._apiurl.payment+"secure/init-refund-list")}approvePaymentDetails(t,e){return"APPROVE"==e?this._http.securepost(this._apiurl.payment+"secure/approve-paymentrefund",t):this._http.securepost(this._apiurl.payment+"secure/reject-paymentrefund",t)}rejectPaymentDetails(t){return this._http.securepost(this._apiurl.payment+"secure/reject-paymentrefund",t)}getPaymentRefence(t){return this._http.secureget(this._apiurl.payment+"secure/getPaymentByTrxNo/"+t)}};R.ctorParameters=()=>[{type:m.a},{type:p.a}],R=a.b([Object(l.B)({providedIn:"root"})],R);let k=class{constructor(t,e,n,a,l){this.datepipe=t,this._router=e,this._http=n,this._apiUrl=a,this._validation=l,this.confirmationEventB=new h.a({}),this.allPaymentDetail=new Array,this.showRejectedResponse={},this.showApprovedResponse={},this.mainResponse={},this.loadingSpinner=!1,this.fileId={},this.outputValue={},this.date=new Date,this.currentDate=new Date,this.inputJson=new h.a({}),this.allData={},this.requestAmount="",this.requestPenalty="",this.ammount=0,this.amount=0,this.penaltyAmount=0,this.checkUserAction="APPROVE",this.tableJsonData=new h.a({}),this.paginationCount=10,this.docId4=new h.a({})}ngOnInit(){this.downloadReciept=this._apiUrl.paymentDownload+"downloadPatmentReciept/",this.downloadVdms=this._apiUrl.fileDownloadAPI+"download/",this.currentFormatDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.currentToDate=this.datepipe.transform(new Date,"yyyy-MM-dd"),this.approveReject=new o.d({refundId:new o.c(null,o.h.required),authRemarks:new o.c(null,o.h.required),checkUserAction:new o.c(null,o.h.required),amount:new o.c(null,[o.h.required]),penaltyAmount:new o.c(null,[o.h.required]),totalAmount:new o.c(null,[o.h.required,o.h.pattern(this._validation.numRegex)]),supportingDocId:new o.c(null),supportingDocUid:new o.c(null)}),this.approvalForm=new o.d({fromDate:new o.c(null,o.h.required),toDate:new o.c(null,o.h.required),processType:new o.c(""),sbiRefNo:new o.c(null),tokenNo:new o.c(null),mode:new o.c("")}),this.getAllPayment()}search(){console.log(this.approvalForm.value),this.loader=!0,this._http.searchPaymentDetails(this.approvalForm.value).subscribe(t=>{console.log(t),this.allPaymentDetail=t.data,this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default"),this.loader=!1},t=>{console.log(t),this.loader=!1,this.inputJson.next({popShow:!0,popMsg:t.error.message,popClass:"alert alert-danger",popRoute:""})})}getAllPayment(){this._http.searchPaymentDetails({}).subscribe(t=>{console.log(t.data),this.allPaymentDetail=t.data,this.filterDataArray=this.allPaymentDetail,this.dataArray=this.allPaymentDetail,this.tableSortFilter(null,null,null,"default")},t=>{console.log(t)})}changeDate(t){this.newDate=new Date(t),this.newDate.setDate(this.newDate.getDate()+1),this.toMinStopage=this.datepipe.transform(this.newDate,"yyyy-MM-dd"),console.log(this.toMinStopage)}ApproveRequestPopUp(t){this.modalPopup=!0,this.showApprovedResponse=t}closePopup(){this.modalPopup=!1}RejectRequestPopUp(t){this.showRejectedResponse=t,this.rejectPopUp=!0}closePopupReject(){this.rejectPopUp=!1}showConfirmation(){this.approveReject.valid&&this.ammount!=this.mainResponse.totalAmount&&"APPROVE"==this.approveReject.value.checkUserAction?this.confirmationEventB.next({flag:!0,messageV:"Amount is different than proposed by Maker. Do you still want to continue?"}):this.submitFunction()}confirmationEvent(t){"OK"==t&&this.submitFunction()}submitFunction(){this.loadingSpinner=!0,this.approveReject.valid?(console.log(this.approveReject.value),this.modalPopup=!1,this.approveReject.value.amount=this.approveReject.value.amount.replace(/,/g,""),this.approveReject.value.penaltyAmount=this.approveReject.value.penaltyAmount.replace(/,/g,""),this._http.approvePaymentDetails(this.approveReject.value,this.approveReject.value.checkUserAction).subscribe(t=>{let e;this.loadingSpinner=!1,this.getAllPayment(),e="APPLY_REFUND"==t.data.status?"Refund of "+t.data.refundedAmount+" is approved and it is posted to payment gateway":"Refund of "+t.data.refundedAmount+" is rejected",this.inputJson.next({popShow:!0,popMsg:e,popClass:"alert alert-success",popRoute:""}),console.log(t)},t=>{this.loadingSpinner=!1,console.log(t),this.inputJson.next({popShow:!0,popMsg:"Something went wrong.",popClass:"alert alert-danger",popRoute:""})})):(this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong.",popClass:"alert alert-danger",popRoute:""}))}transformAmount(t){return Number(t).toLocaleString("en-IN")}actionOfRadio(t){let e,n,a;e=this.approveReject.get("amount"),n=this.approveReject.get("penaltyAmount"),a=this.approveReject.get("totalAmount"),"REJECTE"==t.target.value?(e.setValidators([o.h.nullValidator]),n.setValidators([o.h.nullValidator]),a.setValidators([o.h.nullValidator])):"APPROVE"==t.target.value&&(e.setValidators([o.h.required]),n.setValidators([o.h.required]),a.setValidators([o.h.required,o.h.pattern(this._validation.numRegex)])),e.updateValueAndValidity(),n.updateValueAndValidity(),a.updateValueAndValidity()}takeActionOnData(t={}){console.log(t),this.mainResponse=t,this.paymentNotMoreThan(t.refundedAmount,t.penaltyAmount),this.amount=this.transformAmount(t.refundedAmount),this.penaltyAmount=this.transformAmount(null!=t.penaltyAmount?t.penaltyAmount:0),this._http.getPaymentRefence(t.transactionNo).subscribe(t=>{this.modalPopup=!0,null!=t.data&&(this.allData=t.data)},t=>{console.log(t)})}paymentNotMoreThan(t,e){let n,a;console.log(t,e),n=""==t||null==t?0:t,a=""==e||null==e?0:e,this.ammount=parseInt(n)+parseInt(a),console.log(this.ammount),this.ammount>this.allData.reqTotalAmount&&this.inputJson.next({popShow:!0,popMsg:"Refund amount is greater than Paid Amount.",popClass:"alert alert-danger",popRoute:""}),t=t.toString(),e=e.toString(),this.convertFunctionToLocal(t,e)}convertFunctionToLocal(t,e){this.amount=Number(t.replace(/,/g,"")).toLocaleString("en-IN"),this.penaltyAmount=Number(e.replace(/,/g,"")).toLocaleString("en-IN")}removeCommas(t,e){t=t.toString(),e=e.toString(),this.amount=Number(t.replace(/,/g,"")),this.penaltyAmount=Number(e.replace(/,/g,""))}allowNumericOnly(t){var e;let n;return console.log(t.which),n=t.target.value,!(!t.metaKey&&!t.ctrlKey&&37!==t.which&&39!==t.which)||32!==t.which&&(0===t.which||(t.which<33||(e=String.fromCharCode(t.which),!!/[\d\s]/.test(e))))}tableSortFilter(t,e,n,a){this.sortData="default"==a?{sortType:"DESC",key:"refundInitDate",typ:"date",sort:a}:{sortType:t,key:e,typ:n,sort:a};let l={headers:[{key:"paymentType",label:"Payment Type",type:"string"},{key:"paymentTokenNo",label:"Token No",type:"string"},{key:"transactionRefNo",label:"Gateway Reference No",type:"string"},{key:"paymentGateway",label:"Payment Gateway",type:"string"},{key:"ticketNo",label:"Ticket No",type:"string"},{key:"paymentAmount",label:"INR Total Paid Amount",type:"string"},{key:"refundedAmount",label:"INR Refund Amount(a)",type:"string"},{key:"penaltyAmount",label:"INR Additional Refund Amount(b)",type:"string"},{key:"totalAmount",label:"INR Total Refund Amount(a+b)",type:"string"},{key:"refundInitDate",label:"Initiated On",type:"date"}],actualArray:this.allPaymentDetail,sortData:this.sortData};this.tableHeader=l.headers,this.tableJsonData.next({exportJson:l}),console.log(l)}filterValue(t){console.log(t),this.filterDataArray=t.filterArray,this.sortData=t.sort,this.getPageNo(1)}getPageNo(t){this.currentPageNo=t,this.filterDataArray.length>9&&(this.paginationCount=10*t),0==this.filterDataArray.length&&(this.paginationCount=0),setTimeout(()=>{document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(this.paginationCount=this.filterDataArray.length)},100)}setValue(t){this.outputValue[t.fid]=t.docid}};k.ctorParameters=()=>[{type:r.e},{type:c.e},{type:R},{type:p.a},{type:g.a}],k=a.b([Object(l.n)({selector:"app-initiate-payment",template:a.c(n("5odX")).default,styles:[a.c(n("RvKy")).default]})],k);let T=class{constructor(t,e){this._http=t,this._apiUrl=e}postOffilinePayment(t){return this._http.securepost(this._apiUrl.payment+"secure/saveOfflinePaymentDetails",t)}searchDetails(t,e){if("Challan"==e)return this._http.secureget(this._apiUrl.recoverychallanAPI+"/secure/detailsby-challanNo/"+t)}getAllBank(){return this._http.secureget(this._apiUrl.reraMasterAPI+"bank/getAllBank")}};T.ctorParameters=()=>[{type:m.a},{type:p.a}],T=a.b([Object(l.B)({providedIn:"root"})],T);let I=class{constructor(t,e,n,a){this._regex=t,this._service=e,this._reraService=n,this._apiUrl=a,this.challanData={},this.loadingSpinner=!1,this.searchValue={},this.respodantList={},this.paymentList=new Array,this.challanInvalid=!0,this.docId1=new h.a({}),this.inputJson=new h.a({}),this.outputValue={},this.currentDate=new Date}ngOnInit(){this.downloadUrl=this._apiUrl.paymentDownload+"downloadPatmentRecieptEcourt/",this.getAllBankDetails(),this.offilePaymentForm=new o.d({paymentHead:new o.c(null,[o.h.required]),payMode:new o.c(null,[o.h.required]),ddChequeNo:new o.c(null,[o.h.required]),ddChequeDate:new o.c(null,[o.h.required,this._regex.futureDateValidator]),ddChequeRecievingDate:new o.c(null,[o.h.required,this._regex.futureDateValidator]),creditedOnDate:new o.c(null,[o.h.required,this._regex.futureDateValidator]),processId:new o.c(null,[o.h.required]),processType:new o.c(null,[o.h.required]),docUid:new o.c(null),docId:new o.c(null,[o.h.required]),appNo:new o.c(null,[o.h.required]),emailId:new o.c(null,[o.h.required]),mobileNo:new o.c(null,[o.h.required]),userName:new o.c(null,[o.h.required]),amount:new o.c(null,[o.h.required]),totalAmount:new o.c(null,[o.h.required]),confirmAmount:new o.c(null,[o.h.required]),remark:new o.c(null,[o.h.required]),bankName:new o.c(null,[o.h.required]),bankCode:new o.c(null,[o.h.required])}),this.searchForm=new o.d({appNumber:new o.c(null,[o.h.required]),searchProcess:new o.c(null,[o.h.required])})}searchData(){this.loadingSpinner=!0,this.searchValue=this.searchForm.value,this._service.searchDetails(this.searchValue.appNumber,this.searchValue.searchProcess).subscribe(t=>{if(this.loadingSpinner=!1,200==t.status){let e;this.showRespodentData=!0,this.challanData=t.data,this.respodantList=this.challanData.respodantList[0],this.outstandingAmount=this.challanData.outstandingAmount,this.paymentList=[],this.splitChallanCount=this.challanData.splitCount,this.penalityAmt=null==this.challanData.penaltyAmt?0:this.challanData.penaltyAmt,"YES"==t.data.splitFlag?this.splitYes=!1:this.splitYes=!0,this.challanData.paymentList.forEach(t=>{"SUCCESS"==t.status&&this.paymentList.push(t)}),this.paymentList=this.paymentList.map(t=>(Object.assign(t,{downloadReceipt:this.downloadUrl+t.transactionNo}),t)),console.log("payment length",this.paymentList.length),3==this.paymentList.length&&(this.splitYes=!0),4==this.paymentList.length&&(this.challanInvalid=!1),e=this.challanData,"SOUMOTO"==e.compType?"NCQR"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - NCQR":"NCQER"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - NCQER":"NCAR"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - NCAR":"NCPA"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - NCPA":"SELL"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - SELL":"AFS"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - AFS":"ADVERTISEMENT"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - ADVERTISEMENT":"AGREEMENTSALE"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - AGREEMENTSALE":"QPR"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - On Submitted QPR":"FORM5"==e.soumotucase?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - On Submitted Form 5":(e.soumotucase,this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Others"):"GENERAL COMPLAINT"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Complaint":"OFFLINE COMPLAINT"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Offline Complaint":"CONCILIATION_FORUM"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Conciliation":"OFF_REVIEW"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Review Offline":"DEFECT"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Defect Liability":"OFF_CONCILIATION_FORUM"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Offline Conciliation":"APPELLATE"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Appeal":"OFF_APPELLATE"==e.compType?this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Appeal Offline":this.challanData.paymentHead="Exclusive Penalty for Non Compliance - Complaint",3==this.challanData.paymentList.length&&(this.confirmAmt=this.challanData.outstandingAmount,this.confirmAmount())}else this.inputJson.next({popShow:!0,popMsg:"No Data found",popClass:"alert alert-danger",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"No Data found",popClass:"alert alert-danger",popRoute:""})})}formSubmit(){this.loadingSpinner=!0,this.offilePaymentForm.valid?this._service.postOffilinePayment(this.offilePaymentForm.value).subscribe(t=>{this.loadingSpinner=!1,this.showRespodentData=!1,200==t.status?(this.offilePaymentForm.reset(),this.searchForm.reset(),this.docId1.next({show:!1}),this.challanData={},this.respodantList={},this.inputJson.next({popShow:!0,popMsg:"Request submitted successfully",popClass:"alert alert-success",popRoute:""})):this.inputJson.next({popShow:!0,popMsg:"Something went wrong !",popClass:"alert alert-danger",popRoute:""})},t=>{this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong !",popClass:"alert alert-danger",popRoute:""})}):(this.loadingSpinner=!1,this.inputJson.next({popShow:!0,popMsg:"Something went wrong !",popClass:"alert alert-danger",popRoute:""}))}setValue(t){this.outputValue[t.fid]=t.docid}checkAmount(){let t=this.offilePaymentForm.get("amount");console.log(t.value,this.challanData.outstandingAmount),t.value>=this.challanData.outstandingAmount?t.setErrors({incorrect:!0}):(t.setErrors(null),t.setValidators([o.h.required]))}confirmAmount(){this.totalAmount=this.penalityAmt+this.outstandingAmount;const t=this.offilePaymentForm.get("amount"),e=this.offilePaymentForm.get("confirmAmount");console.log(e.value,t.value),e.value==t.value&&t.value<=this.challanData.outstandingAmount?(t.setValidators([o.h.required]),e.setValidators([o.h.required]),e.updateValueAndValidity(),t.updateValueAndValidity(),e.setErrors(null),t.setErrors(null)):(t.setErrors({incorrect:!0}),e.setErrors({incorrect:!0}))}getAllBankDetails(){this._service.getAllBank().subscribe(t=>{this.bankMasterData=t})}selectBank(t,e){console.log(t.target.options[t.target.selectedIndex].text),this.bankCode=e,this.bankName=t.target.options[t.target.selectedIndex].text}setPayMode(t){console.log(t),this.payMode=t}};I.ctorParameters=()=>[{type:g.a},{type:T},{type:m.a},{type:p.a}],I=a.b([Object(l.n)({selector:"app-offline-payment",template:a.c(n("jUNI")).default,styles:[a.c(n("vxQW")).default]})],I);const C=[{path:"initiate-refund",component:k},{path:"approval-payment",component:w},{path:"payment-detail",component:f},{path:"withdraw-detail",component:f},{path:"land-detail",component:f},{path:"refunded",component:A},{path:"payment-receipt",component:N},{path:"refund-recovery/refund-request",component:P},{path:"payment/offline",component:I}];let M=class{};M=a.b([Object(l.J)({imports:[c.f.forChild(C)],exports:[c.f]})],M);var O=n("xkgV"),S=n("UPf0"),F=n("C75N"),E=n("5c4+"),q=n("kdZ/");n.d(e,"recoveryModule",(function(){return _}));let _=class{};_=a.b([Object(l.J)({declarations:[f,w,A,N,P,k,I],imports:[r.b,M,o.g,s.a,i.a,o.e,d.a,O.a,S.a,F.a,q.a,E.a],providers:[r.e,b.b]})],_)},oUdY:function(t,e,n){"use strict";n.r(e),e.default=""},qeaw:function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n\r\n    <div class="col-md-12 mb-4">\r\n  <div class="card ">\r\n \r\n  </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n<div class="row">\r\n\r\n  <div class="col-md-12 mb-4">\r\n    <div class="d-flex justify-content-between align-items-center">\r\n      \x3c!-- <h2>{{dealyedPageTitle}} </h2> --\x3e\r\n      <div class="tableTotalCount">Total Result - {{paginationCount}}/{{filterDataArray?.length}}</div>\r\n      </div>\r\n      <div class="row">\r\n\r\n        <div class=" col-md-12">\r\n          <div class="table-responsive">\r\n        \r\n            <app-filter-table [filterTableData]="{\'tableJson\':tableJsonData}" (myEvent)="filterValue($event)"></app-filter-table>\r\n          <table class="table table-bordered text-center">\r\n                  \r\n    <thead>\r\n      <tr class="bg-light  text-size-small text-center">\r\n          <th *ngFor="let th of tableHeader">{{th.label}} <div class="sortTable">\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'ASC\' && sortData.key==th.key}" (click)="tableSortFilter(\'ASC\', th.key, th.type,\'sort\')" class="upArrow"><i class="fas fa-arrow-up"></i></a>\r\n            <a href="javascript:void(0)" [ngClass]="{\'active\':sortData.sortType==\'DESC\' && sortData.key==th.key}" (click)="tableSortFilter(\'DESC\', th.key, th.type,\'sort\')" class="downArrow"><i class="fas fa-arrow-down"></i></a>\r\n          </div>\r\n        </th> \r\n        <th>Action</th>\r\n      </tr>\r\n  </thead>\r\n            \x3c!-- <thead class="bg-light font-weight-bold">\r\n              <tr class="text-center bg-light  text-size-small">\r\n                <th>Head</th>\r\n                <th>Token No</th>\r\n                <th>Transaction No</th>\r\n                <th>Ticket No</th>\r\n                <th>INR Amount(a)</th>\r\n                <th>INR Additional Amount(b)</th>\r\n                <th>INR Refund Applied(a+b)</th>\r\n                <th>INR Paid Amount</th>\r\n                <th>Initiated On</th>\r\n                <th>Action</th>\r\n\r\n              </tr>\r\n            </thead> --\x3e\r\n            <tbody *ngIf="filterDataArray?.length > 0; else no_allPaymentDetail">\r\n              <tr *ngFor="let data of filterDataArray| paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: currentPageNo}">\r\n                <td>{{data.paymentType}}</td>\r\n                <td>{{data.paymentTokenNo}}</td>\r\n                <td>{{data.transactionNo}}</td>\r\n                <td>{{data.transactionRefNo}}</td>\r\n                <td>{{data.paymentGateway}}</td>\r\n                <td>{{data.ticketNo}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.paymentAmount)}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.refundedAmount)}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.penaltyAmount)}}</td>\r\n                <td class="tabel-text-right">{{transformAmount(data.totalAmount)}}</td>\r\n                <td class=" text-nowrap">{{data.refundInitDate | date : \'dd-MM-yyyy, h:mm a\'}}</td>\r\n                <td style="white-space: nowrap" class="d-flex">\r\n                   <u>\r\n                    <a href="{{downloadReciept}}{{data.transactionNo}}" class="cursor-pointer mr-4" title="Download Payment Receipt"><i class="icon icon-download green" aria-hidden="true"></i></a>\r\n                  </u>\r\n&nbsp;\r\n                  <a href="javascript:void(0)" (click)="takeActionOnData(data)" class="cursor-pointer" title="View Transaction" class="cursor-pointer">\r\n                    <i class="fa icon-eye" aria-hidden="true"></i>\r\n                   </a>\r\n                </td>\r\n              </tr>\r\n\r\n            </tbody>\r\n\r\n            <ng-template #no_allPaymentDetail>\r\n              <tbody>\r\n                <tr>\r\n                  <td colspan="10">\r\n                    <span class="red">Please wait...</span>\r\n                  </td>\r\n                </tr>\r\n\r\n              </tbody>\r\n            </ng-template>\r\n          </table>\r\n          <div class="col-md-12 text-right" *ngIf="filterDataArray?.length > 0">\r\n            <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<div class="modal show" *ngIf="modalPopup">\r\n  <div class="modal-dialog modal-xl">\r\n    <div class="modal-content">\r\n\r\n      <div class="modal-header">\r\n        <h4 class="modal-title"><b>Transection Details</b> </h4>\r\n        <button type="button" class="close" (click)="closePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n\r\n        <div class="row">\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.userName}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Email Id</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.emailId}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Mobile No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.mobileNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.transactionNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Token No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.paymentTokenNo}}">\r\n          </div>\r\n          \x3c!-- <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Registraion Type</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.registraionType}}">\r\n          </div> --\x3e\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Gateway Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.sbiReferenceNo}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.payMode}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Payment Gateway</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.paymentGateway}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited on</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.creditedOn | date : \'dd-MM-yyyy, h:mm a \'}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Credited Flag</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.creditFlag}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Bank Reference No</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.bankReferenceNo}}">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Date</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.transactionDate}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Heads Name</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.registraionType}}">\r\n          </div>\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Transaction Mode</label>\r\n            <input type="text" readonly class="form-control" value="{{allData.trxMode}}">\r\n          </div>\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData.reqAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData.reqAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Additional Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData.reqPenaltyAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData.reqPenaltyAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Total Amount</label>\r\n            \x3c!-- <input type="text" readonly class="form-control" value="{{allData.reqTotalAmount}}"> --\x3e\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(allData.reqTotalAmount)">\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <h3 class="text center"><b>Refund Details</b></h3>\r\n        <div class="row">\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Amount</label>\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(mainResponse.refundedAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Additional Amount</label>\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(mainResponse.penaltyAmount)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Total Amount </label>\r\n            <input type="text" readonly class="form-control text-right" [value]="transformAmount(mainResponse.totalAmount)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Refund Mode</label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.modeOfRefund)">\r\n          </div>\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Ticket No. </label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.ticketNo)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold"> Ticket Query\r\n              <a *ngIf="mainResponse.ticketAttachmentDocUID!=null" href="{{downloadReciept}}{{mainResponse.ticketAttachmentDocUID}}" title="Download Ticket Attachment">\r\n                <i class="icon icon-download green"></i>\r\n              </a>\r\n            </label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.ticketDescription)">\r\n          </div>\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Reason</label>\r\n            <input type="text" readonly class="form-control" [value]="(mainResponse.reasonOfRefund)">\r\n          </div>\r\n\r\n\r\n\r\n\r\n\r\n          <div class="col-md-4 mb-4">\r\n            <label class="control-label font-weight-bold">Remark</label>\r\n            <input type="text" *ngIf="userType==\'ACCOUNT_OFFICER\'" readonly class="form-control" [value]="(mainResponse.remarks)">\r\n            <input type="text" *ngIf="userType==\'FINCONTROLLER\'" readonly class="form-control" [value]="(mainResponse.authRemarks)">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4 mb-4" *ngIf="mainResponse.reasonOfRefund">\r\n          <label class="control-label font-weight-bold">Any Supporting Document</label>\r\n          <app-multi-file-view [Uid]="mainResponse.supportingDocUid"></app-multi-file-view>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n  <app-validation-message [message]="inputJson"></app-validation-message>\r\n'},sF7i:function(t,e,n){"use strict";n.r(e),e.default='<div class="row">\r\n    <div class="col-md-12 mb-4 ">\r\n    <div class="card ">\r\n    <div class="card-header"><b>Refund Detail</b></div>\r\n    <form [formGroup]="paymentDetailForm" id="validateFoem">\r\n      <div class="card-body">\r\n        <div class="row">\r\n        <div class="form-group col-md-4">\r\n        <label class="control-label font-weight-bold">From Date<sup>*</sup></label>\r\n\r\n        <input type="date" [(ngModel)]="currentFormatDate" max="{{currentToDate}}"  #enrd (change)="changeDate(enrd.value)" class="form-control"  placeholder="" formControlName="fromDate">\r\n\r\n\r\n        <div class="error-box"><small class="error"> Date can not be blank</small></div>\r\n        </div>\r\n\r\n        <div class="form-group col-md-4">\r\n        <label class="control-label font-weight-bold">To Date<sup>*</sup></label>\r\n        <input type="date" [(ngModel)]="currentToDate"  min="{{ toMinStopage }}" max="{{currentToDate}}" class="form-control"  placeholder="" formControlName="toDate">\r\n        <div class="error-box"><small class="error"> Date can not be blank</small></div>\r\n        </div>\r\n\r\n        <div class="form-group col-md-4">\r\n        <label class="control-label font-weight-bold">Fee Type</label>\r\n        <select class="form-control" formControlName="processType" >\r\n        <option value="">--Select Fee Type--</option>\r\n        <option value="Complaint Registration Fees">Complaint Registration Fees</option>\r\n        <option value="Miscellaneous Payment/Exclusive Penalty for Non Compliance - Complaint">Miscellaneous Payment/Exclusive Penalty for Non Compliance - Complaint</option>\r\n        <option value="Miscellaneous Payment/Authority Documents Access Fees">Miscellaneous Payment/Authority Documents Access Fees</option>\r\n        <option value="Profile Change Fees">Profile Change Fees</option>\r\n        <option value="Project Registration Fees">Project Registration Fees</option>\r\n        <option value="Project Alteration Fees">Project Alteration Fees</option>\r\n        <option value="Project Data Correction Fees">Project Data Correction Fees</option>\r\n        <option value="Section 15 application fees">Section 15 application fees</option>\r\n        <option value="Section 15 application fees - Stage2">Section 15 application fees - Stage2</option>\r\n        <option value="Project Extension Fees">Project Extension Fees</option>\r\n        <option value="Bank Account Change Fees">Bank Account Change Fees</option>\r\n        <option value="Project Quarter Fees">Project Quarter Fees</option>\r\n        <option value="Agent Registration Fees">Agent Registration Fees</option>\r\n        <option value="Project Land Area/Status/Property Type Changing Fees">Project Land Area/Status/Property Type Changing Fees</option>\r\n        <option value="Agent Yearly Fees">Agent Yearly Fees</option>\r\n      </select>\r\n        <div class="error-box"><small class="error">Please Select Fee Type</small></div>\r\n        </div>\r\n\r\n        <div class="form-group col-md-4">\r\n        <label class="control-label font-weight-bold">Mode</label>\r\n        <select class="form-control" formControlName="mode" >\r\n        <option value="">--Select Mode--</option>\r\n        <option value="OFFLINE">Offline</option>\r\n        <option value="ONLINE" >Online</option>\r\n        </select>\r\n        <div class="error-box"><small class="error">Please Select Mode</small></div>\r\n        </div>\r\n\r\n        <div class="form-group col-md-4">\r\n          <label class="control-label font-weight-bold">Gateway Reference No</label>\r\n          <input type="text"  class="form-control"  placeholder="" formControlName="sbiRefNo">\r\n          <div class="error-box"><small class="error">Gateway Reference No can not be blank</small></div>\r\n          </div>\r\n          \x3c!-- <div class="form-group col-md-4">\r\n            <label class="control-label font-weight-bold">Token No</label>\r\n            <input type="text"  class="form-control"  placeholder="" formControlName="tokenNo">\r\n            <div class="error-box"><small class="error">Token No can not be blank</small></div>\r\n            </div> --\x3e\r\n\r\n\r\n        </div>\r\n        <div class="row">\r\n          <div class="col-md-12 text-center mb-2">\r\n            <button  [disabled]="this.paymentDetailForm.invalid" class="btn btn-primary" (click)="search()"><i class="fa fa-spinner fa-spin text-white" *ngIf="loader" aria-hidden="true"></i> SEARCH </button>\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n    </form>\r\n\r\n    <div class="row">\r\n    <div class="col-md-12 text-right mb-1"><input type="button" class="btn btn-primary" (click)="clickToExport()" value="Export Excel"></div>\r\n      <div class=" col-md-12 table-responsive">\r\n        <table class="table table-bordered text-center" #tableOpt id="myTableElementId">\r\n\r\n          <thead class="bg-light font-weight-bold">\r\n      <tr class="text-center bg-light  text-size-small">\r\n        <th>Head</th>\r\n        <th>Transaction No</th>\r\n        <th>SBI/Cheque/DD No.</th>\r\n        <th>Amount</th>\r\n        <th>Mode</th>\r\n        <th>Transaction Date</th>\r\n        <th>Credit in RERA A/c On</th>\r\n        <th>Action</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n\r\n\r\n\r\n      <tr *ngFor="let data of allPaymentDetail | paginate: { id: \'foo1\', itemsPerPage: 10, currentPage: ca}">\r\n\r\n\r\n        <td>{{data.transaction.registraionType}}</td>\r\n        <td>{{data.transaction.transactionNo}}</td>\r\n        <td>{{data.transaction.sbiReferenceNo}}</td>\r\n        <td>{{data.transaction.reqTotalAmount}}</td>\r\n        <td>{{data.transaction.trxMode}}</td>\r\n        <td>{{data.transaction.transactionDate}}</td>\r\n        <td>{{data.transaction.transactionDate}}</td>\r\n\r\n          <td><i (click)="viewDetails(data)" class="fa icon-eye"aria-hidden="true"></i> <a href="javascript:void(0)"  (click)="refundProcess(data)" ><span class="spriteImage rupees-icon"></span>  </a> </td>\r\n\r\n      </tr>\r\n\r\n    </tbody>\r\n      </table>\r\n      </div>\r\n      <div class="col-md-12 text-right"><pagination-controls  id="foo1" (pageChange)="ca = $event"></pagination-controls></div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n    </div>\r\n\r\n    <div class="modal show" *ngIf="refund_rec">\r\n      <div class="modal-dialog modal-xl">\r\n      <div class="modal-content">\r\n\r\n      \x3c!-- Modal Header --\x3e\r\n      <div class="modal-header">\r\n      <h4 class="modal-title"><b>Create Refund Request</b>  </h4>\r\n      <button type="button" (click)="closePopup()" class="close" data-dismiss="modal">&times;</button>\r\n      </div>\r\n\r\n\r\n      \x3c!-- Modal body --\x3e\r\n      <div class="modal-body">\r\n        <h3 class=""><b>Beneficiary Detail</b></h3>\r\n\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Beneficiary Name</label>\r\n              <input type="text" readonly class="form-control" value="{{beneficiaryName}}">\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Beneficiary Email Id</label>\r\n              <input type="text" readonly class="form-control" value="{{beneficiaryEmail}}">\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Beneficiary Mobile</label>\r\n              <input type="text" readonly class="form-control" value="{{beneficiaryMobile}}">\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Transaction Date</label>\r\n              <input type="text" readonly class="form-control" value="{{transactionDate}}">\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">SBI/Cheque/DD No.</label>\r\n              <input type="text" readonly class="form-control" value="{{sbiReference}}">\r\n            </div>\r\n            <div class="col-md-4 mb-4">\r\n              <label class="control-label font-weight-bold">Amount</label>\r\n              <input type="text" readonly class="form-control" value="{{amount}}">\r\n            </div>\r\n\r\n\r\n            <h3 class=""><b>Refund Form</b></h3>\r\n        <form [formGroup]="refundForm" id="validateFoem">\r\n          <input type="hidden" class="form-control" formControlName="paymentId" [(ngModel)]="paymentId">\r\n          <input type="hidden" class="form-control" formControlName="requestId" [(ngModel)]="rRequestId">\r\n      <div class="col-md-12">\r\n      <div class="col-md-4 mb-4">\r\n      <label class="control-label font-weight-bold">Refund Mode</label>\r\n      <input type="text"  readonly class="form-control" formControlName="refundMode"  [(ngModel)]="refundMode">\r\n\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n      <label class="control-label font-weight-bold ">Amount<sup>*</sup></label>\r\n      <input type="number" class="form-control" formControlName="ammount">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n      <label class="control-label font-weight-bold ">Reason<sup>*</sup></label>\r\n      <select class="form-control" formControlName="reason">\r\n        <option value="">--Select--</option>\r\n        <option value="Duplicate Payment">Duplicate Payment</option>\r\n        <option value="Project Outside Planning area">Project Outside Planning area</option>\r\n        <option value="Excess Payment">Excess Payment</option>\r\n      </select>\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n      <label class="control-label font-weight-bold ">Remarks<sup>*</sup></label>\r\n      <input type="text" class="form-control" formControlName="remarks">\r\n      </div>\r\n      <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n        <label class="control-label font-weight-bold ">Payment Mode<sup>*</sup></label>\r\n        <input type="text" class="form-control" formControlName="paymentMode">\r\n        <select class="form-control">\r\n          <option value="">--Select--</option>\r\n          <option value="NEFT">NEFT</option>\r\n          <option value="RTGS">RTGS</option>\r\n          <option value="CHEQUE">Cheque</option>\r\n          <option value="NETBANKING">Net Banking</option>\r\n          <option value="DD">Demad Draft</option>\r\n        </select>\r\n        </div>\r\n      <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n        <label class="control-label font-weight-bold ">Transaction No<sup>*</sup></label>\r\n        <input type="text" class="form-control" formControlName="transactionNo">\r\n        </div>\r\n\r\n      <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n      <label class="control-label font-weight-bold ">Bank Name<sup>*</sup></label>\r\n      <input type="text" class="form-control" formControlName="bankName">\r\n      </div>\r\n      <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n      <label class="control-label font-weight-bold ">Refunded On<sup>*</sup></label>\r\n      <input type="date"  max="{{date | date:\'yyyy-MM-dd\'}}"  class="form-control"  placeholder="" formControlName="refundedOn">\r\n      </div>\r\n      <div class="col-md-4 mb-4" *ngIf="isOffline">\r\n      <label class="control-label font-weight-bold ">Scan Copy<sup>*</sup></label>\r\n      <input type="hidden" [ngModel]="outputValue.scanCopyId" formControlName="scanCopyId">\r\n    <app-file-upload (myEvent)="setValue($event)" [parm]="{fileId:\'scanCopyId\',docId:docId1,show:false,fileType:[\'pdf\',\'jpg\',\'jpeg\',\'png\']}"></app-file-upload>\r\n    <div class="error-box"><small class="error">Please upload file</small></div>\r\n      </div>\r\n\r\n      </div>\r\n\r\n\r\n\r\n\r\n      <div class="col-md-12">\r\n\r\n\r\n\r\n      <div class=" col-md-12 mt-4 d-none">\r\n      <div class="form-check">\r\n      <label class="form-check-label">\r\n      <input type="checkbox" class="form-check-input" value="">I declare that the information provided by me is True & Correct.\r\n      </label>\r\n\r\n      </div>\r\n      </div>\r\n      <div class=" col-md-12 mt-4 text-center">\r\n\r\n        <button  class="btn btn-small btn-primary" [disabled]="this.refundForm.invalid"  (click)="refundSubmit()"><i class="fa fa-spinner fa-spin text-white" *ngIf="refundLoader" aria-hidden="true"></i> Submit </button>\r\n      </div>\r\n\r\n      </div>\r\n      </form>\r\n      </div>\r\n      </div>\r\n\r\n      </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n\r\n    <div class="modal show" *ngIf="modalPopup">\r\n      <div class="modal-dialog modal-xl">\r\n      <div class="modal-content">\r\n\r\n      \x3c!-- Modal Header --\x3e\r\n      <div class="modal-header">\r\n      <h4 class="modal-title"><b>Transection Details</b>  </h4>\r\n      <button type="button" class="close" (click)="closePopup()">&times;</button>\r\n      </div>\r\n      <div class="modal-body">\r\n\r\n    <div class="row">\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold">Name</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.userName}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold">Email Id</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.emailId}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Mobile No</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.mobileNo}}">\r\n      </div>\r\n\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Transaction No</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.transactionNo}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Registraion Type</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.registraionType}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Total Amount</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.reqTotalAmount}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Gateway Reference No</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.sbiReferenceNo}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Payment Mode</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.payMode}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Payment Gateway</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.paymentGateway}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Bank Code</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.bankCode}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Bank Reference No</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.bankReferenceNo}}">\r\n      </div>\r\n\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Transaction Date</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.transactionDate}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Process Name</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.processName}}">\r\n      </div>\r\n      <div class="col-md-4 mb-4">\r\n        <label class="control-label font-weight-bold"> Transaction Mode</label>\r\n        <input type="text" readonly class="form-control" value="{{allData.trxMode}}">\r\n      </div>\r\n\r\n\r\n    </div>\r\n\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n    </div>\r\n    </div>\r\n\r\n\r\n    <div class="popup-overlay" *ngIf="modalOverlayPopup"></div>\r\n\r\n\r\n    <app-validation-message [message]="inputJson"></app-validation-message>'},sG7q:function(t,e,n){"use strict";n.r(e),e.default=""},vxQW:function(t,e,n){"use strict";n.r(e),e.default=""}}]);
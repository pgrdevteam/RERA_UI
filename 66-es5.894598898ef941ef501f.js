function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"6HN7":function(t,e,a){"use strict";a.r(e),e.default=".scrollme {\n  overflow-x: auto;\n}\n\n.activeClassForQPR {\n  color: #008a00;\n}\n\n.submittedClassForQPR {\n  color: #6f42c1;\n}\n\n.inactiveClassForQPR {\n  color: #6c757d;\n}\n\n.defaultClassForQPR {\n  color: #db3700;\n}\n\n.default_activeClassForQPR {\n  color: #fd7e14;\n}"},Cj44:function(t,e,a){"use strict";a.r(e);var r=a("mrSG"),n=a("8Y7J"),s=a("SVse"),i=a("iInd"),o=a("s7LF"),l=a("FvaC"),c=a("vTBr"),d=function(){function t(e,a){_classCallCheck(this,t),this._http=e,this._apiURL=a,this.getAgentId=1}return _createClass(t,[{key:"postData",value:function(t){return this._http.post(this._apiURL.registrationAPI+"agent/save-agent-details",t)}},{key:"getData",value:function(){return this._http.get(this._apiURL.registrationAPI+"agent/getAllAgentDetails")}},{key:"getAgentIndividualService",value:function(){return this._http.get(this._apiURL.registrationAPI+"agent/agent"+this.getAgentId)}},{key:"getDataofDistrict",value:function(t){return this._http.secureget(this._apiURL.reraMasterAPI+"district/getDistrictByStateUtCode"+t)}},{key:"getallDistrict",value:function(){return this._http.secureget(this._apiURL.reraMasterAPI+"district/getDistrictByStateUtCode")}},{key:"getDataofState",value:function(){return this._http.secureget(this._apiURL.reraMasterAPI+"state/getActiveState")}},{key:"getDataofTaluka",value:function(t){return this._http.get(this._apiURL.reraMasterAPI+"subDistrict/getSubDistrictByDistrictCode"+t)}},{key:"saveAgentData",value:function(t){return this._http.post(this._apiURL.agentApI+"save-agent-details",t)}},{key:"getAgentDetail",value:function(t){return this._http.get(this._apiURL.agentApI+"/get-agent-details/"+t)}}]),t}();d.ctorParameters=function(){return[{type:c.a},{type:l.a}]},d=r.b([Object(n.B)({providedIn:"root"})],d);var u=a("N6Kn"),p=function(){function t(e,a){_classCallCheck(this,t),this._http=e,this._apiURL=a}return _createClass(t,[{key:"getTPDetails",value:function(t){return this._http.secureget(this._apiURL.rera_tp+"secure/town-plan/district-code/"+t)}},{key:"getData",value:function(t,e){var a=e?e[0].districtName:"",r="project_name=".concat(t.project_name,"&project_reg_no=").concat(t.project_reg_no,"&approved_authority=").concat(t.approved_authority,"&dist=").concat(a,"&subDist=").concat(t.subDist,"&status=").concat(t.status,"&complationStartdate=").concat(t.complationStartdate,"&complationenddate=").concat(t.complationenddate,"&approvalStartdate=").concat(t.approvalStartdate,"&approvalenddate=").concat(t.approvalenddate,"&mincost=").concat(t.mincost,"&maxcost=").concat(t.maxcost);return this._http.secureget(this._apiURL.projectRegAPI+"secure/project-dtls?"+r)}}]),t}();p.ctorParameters=function(){return[{type:c.a},{type:l.a}]},p=r.b([Object(n.B)({providedIn:"root"})],p);var m=a("EUZL"),v=function(){function t(e,a,r,n,s,i){_classCallCheck(this,t),this._httpService=e,this._httpStateMasterServce=a,this.datepipe=r,this.searchService=n,this.fb=s,this._router=i,this.headersKey=["dinesh","kasale"],this.showFilters=!0,this.districtList=[],this.paginationCount=5,this.date=new Date,this.currentDate=new Date,this.talukaList=[],this.approvingAuthority=["AUDA/AMC","SUDA/sMC","Others"],this.quarterStatus=["Active","Default Active","Submitted","Defaulted","Inactive","Exempted"],this.quarterStatusShort={ACTIVE:"ACT",EXEMPT:"EXP",SUBMITTED:"SS",DEFAULT:"DF",INACTIVE:"INACT"},this.TPResult=[],this.loadingSpinner=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.myForm=new o.d({dist:new o.c(""),subDist:new o.c(""),approved_authority:new o.c(""),mincost:new o.c(""),maxcost:new o.c(""),approvalStartdate:new o.c(""),approvalenddate:new o.c(""),complationStartdate:new o.c(""),complationenddate:new o.c(""),status:new o.c(""),project_reg_no:new o.c(""),project_name:new o.c("")}),this.getGujDistricts(),this.maxDate=this.datepipe.transform(new Date(this.currentDate.getFullYear()+10,11,31),"yyyy-MM-dd"),this.getProjectListData()}},{key:"onSubmit",value:function(t){null==this.myForm.controls.mincost.value&&this.myForm.patchValue({mincost:""}),null==this.myForm.controls.maxcost.value&&this.myForm.patchValue({maxcost:""}),this.getProjectListData()}},{key:"getGujDistricts",value:function(){var t=this;this._httpService.getDataofDistrict("GJ").subscribe((function(e){t.districtList=e}),(function(e){t.districtList=[]}))}},{key:"getTalukaList",value:function(t){var e=this,a=this.myForm.controls.dist.value;this.selectedDist=this.districtList.filter((function(t){return t.districtCode===a})),this._httpService.getDataofTaluka(a).subscribe((function(t){e.talukaList=t,e.getApprovingAuthority(a)}),(function(t){e.talukaList=[]}))}},{key:"getPageNo",value:function(t){var e=this;this.currentPageNo=t,this.projectListData.length>5&&(this.paginationCount=5*t),0==this.projectListData.length&&(this.paginationCount=0),setTimeout((function(){document.querySelector("#foo1").querySelector(".pagination-next").classList.contains("disabled")&&(e.paginationCount=e.projectListData.length)}),100)}},{key:"getApprovingAuthority",value:function(t){var e=this;this.searchService.getTPDetails(t).subscribe((function(t){"200"==t.status&&(e.TPResult=t.data)}))}},{key:"getProjectListData",value:function(){var t=this;this.loadingSpinner=!0,this.searchService.getData(this.myForm.value,this.selectedDist).subscribe((function(e){e.data?(t.projectListData=e.data,console.log("this.projectListData :",t.projectListData),t.loadingSpinner=!1,t.getPageNo(1)):(t.projectListData=[],t.loadingSpinner=!1)}),(function(e){t.projectListData=[],t.loadingSpinner=!1}))}},{key:"getStatusDates",value:function(t,e){var a=", Submited Date :  "+this.datepipe.transform(t.qtr_detail[e].qtr_submitted_date,"dd-MM-yyyy");t.showStatus="StartDate : ".concat(this.datepipe.transform(t.qtr_detail[e].qtr_start_date,"dd-MM-yyyy")," , EndDate : ").concat(this.datepipe.transform(t.qtr_detail[e].qtr_end_date,"dd-MM-yyyy")," ").concat(t.qtr_detail[e].qtr_submitted_date?a:"")}},{key:"getLastStatusDates",value:function(t){var e=", Submited Date :  "+this.datepipe.transform(t.qtr_submitted_date,"dd-MM-yyyy");t.showStatus="StartDate : ".concat(this.datepipe.transform(t.qtr_start_date,"dd-MM-yyyy")," , EndDate : ").concat(this.datepipe.transform(t.qtr_end_date,"dd-MM-yyyy")," ").concat(t.qtr_submitted_date?e:"")}},{key:"clickToExport",value:function(){var t=this,e=this.projectListData.map((function(e){return{"REGISTRATION NO.":e.project_reg_no,"PROJECT NAME":e.project_name,"PROMOTER NAME":e.promoter_name,QUARTERS__STATUS:t.getStatusNames(e.qtr_detail),"DEFAULT QUARTER":t.getDefaultQtr(e.qtr_detail),"PROMOTER MO NUMBER":e.promoter_mobile,"PROMOTER EMAILID":e.promoter_email,"PROMOTER ADDRESS":e.promoter_address,"PROJECT TYPE":e.project_type,"PROJECT STATUS":e.project_status,"PROJECT ADDRESS":e.project_address,"APPROVED DATE":t.datepipe.transform(e.approved_date,"dd-MM-yyyy"),"END DATE":t.datepipe.transform(e.end_date,"dd-MM-yyyy"),"LAND DOCUMENT":e.land_doc_uid,"ENCUMBRANCE CERTIFICATE":e.encumbrance_doc_id,"TOTAL PROJECT COST":e.project_cost,"NUMBER OF UNITS":e.no_of_unit,"LAND AREA":e.land_area,"ACK No.":e.ack_no,"AUTHORISED SIGN NAME":e.authorised_sign_name}}));this.exportAsExcelFile(e)}},{key:"exportAsExcelFile",value:function(t){var e={Sheets:{data:m.utils.json_to_sheet(t)},SheetNames:["data"]},a=m.write(e,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(a)}},{key:"saveAsExcelFile",value:function(t){var e=a("Iab2"),r=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});e.saveAs(r,"ProjectComplianceList.xlsx")}},{key:"getStatusNames",value:function(t){return t.map((function(t){return t.qtr_name})).toString()}},{key:"viewData",value:function(t){sessionStorage.setItem("wfoId",t),this._router.navigate(["workflow"])}},{key:"getDefaultQtr",value:function(t){var e=t.filter((function(t){return"DEFAULT"===t.qtr_status}));if(e.length){var a=e.length;return e.shift().qtr_name+" / D-"+a}}}]),t}();v.ctorParameters=function(){return[{type:d},{type:u.a},{type:s.e},{type:p},{type:o.b},{type:i.e}]},r.b([Object(n.kb)("tableOpt",{static:!1})],v.prototype,"tableOpt",void 0);var h=[{path:"",component:v=r.b([Object(n.n)({selector:"app-quarter-search",template:r.c(a("WuAw")).default,styles:[r.c(a("6HN7")).default]})],v)}],f=function t(){_classCallCheck(this,t)};f=r.b([Object(n.J)({imports:[i.f.forChild(h)],exports:[i.f]})],f);var _=a("xkgV"),g=a("dTlI"),y=a("5c4+"),b=a("UPf0");a.d(e,"QuarterSearchModule",(function(){return D}));var D=function t(){_classCallCheck(this,t)};D=r.b([Object(n.J)({declarations:[v],imports:[s.b,f,o.g,_.a,g.a,y.a,b.a]})],D)},WuAw:function(t,e,a){"use strict";a.r(e),e.default='<div>\r\n    <div class="col-sm-12">\r\n        <button type="submit" class="btn btn-warning pull-right mb-4" (click)="showFilters = !showFilters">Show / Hide\r\n            Filters</button>\r\n    </div>\r\n\r\n    <form [formGroup]="myForm" (ngSubmit)="onSubmit(myForm)">\r\n        <div id="labels" class="card shadow mb-3" *ngIf="showFilters">\r\n            <div class="card-body asd">\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>District </label>\r\n                    </div>\r\n                    <div class="col-md-3">\r\n                        <select class="form-control" formControlName="dist" (change)="getTalukaList()">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let dist of districtList" [attr.data-type]="dist"\r\n                                value="{{dist.districtCode}}">{{dist.districtName}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>Taluka </label>\r\n                    </div>\r\n                    <div class="col-md-3">\r\n                        <select class="form-control" formControlName="subDist">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let tal of talukaList" [attr.data-type]="data"\r\n                                value="{{tal.subDistrictName}}">{{tal.subDistrictName}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Plan Approving Authority </label>\r\n                    </div>\r\n                    <div class="col-md-3">\r\n                        <select class="form-control" formControlName="approved_authority">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let authority of TPResult" [attr.data-type]="authority.tpName"\r\n                                value="{{authority.tpName}}">{{authority.tpName}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class="col-sm-2">\r\n                        <label>Quarter Status </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select class="form-control" formControlName="status">\r\n                            <option value="">--Select--</option>\r\n                            <option *ngFor="let qS of quarterStatus" [attr.data-type]="qS" value="{{qS}}">{{qS}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Min Project Cost </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="number" class="form-control" formControlName="mincost">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>Max Project Cost </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="number" class="form-control" formControlName="maxcost">\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Approved-From Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="approvalStartdate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>To Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="approvalenddate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>End-From Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="complationStartdate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>To Date </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="date" class="form-control" formControlName="complationenddate"\r\n                            data-date-format="DD-MMMM-YYYY">\r\n                    </div>\r\n                </div>\r\n                <div class="row mb-4">\r\n                    <div class="col-sm-2">\r\n                        <label>Project Registeration Number </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="text" class="form-control" formControlName="project_reg_no">\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <label>Project Name </label>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <input type="text" class="form-control" formControlName="project_name">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="col-sm-12">\r\n                    <button type="submit" class="btn btn-warning pull-right mb-4">Filter</button>\r\n                    <button type="button" (click)="clickToExport()"\r\n                        class="btn btn-warning pull-right mb-4 mr-2">Export</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <hr />\r\n    <h4 class="mb-4">Project List</h4>\r\n\r\n    <div class="scrollme">\r\n        <table class="table table-bordered table-responsive" #tableOpt id="myTableElementId">\r\n            <thead class="bg-light">\r\n                <tr>\r\n                    <td>SL. No</td>\r\n                    <td>REGISTRATION NO.</td>\r\n                    <td>PROJECT NAME</td>\r\n                    <td>PROMOTER NAME</td>\r\n                    <td>QUARTERS__STATUS</td>\r\n                    <td>LAST QUARTER</td>\r\n                    <td>APPROVED DATE</td>\r\n                    <td>END DATE</td>\r\n                    <td>LAND DOCUMENT</td>\r\n                    <td>ENCUMBRANCE CERTIFICATE</td>\r\n                    <td>TOTAL PROJECT COST</td>\r\n                    <td>NUMBER OF UNITS</td>\r\n                    <td>LAND AREA</td>\r\n                    <td>ACK No.</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr\r\n                    *ngFor="let item of projectListData | paginate: { id: \'foo1\', itemsPerPage: 5, currentPage: currentPageNo }; let i = index">\r\n                    <td>{{((currentPageNo-1)*5)+(i+1) }}</td>\r\n                    <td>{{item.project_reg_no}}</td>\r\n                    <td>\r\n                        <a href="javascript:void(0)" class="link-color"\r\n                            (click)="viewData(item.wfoId)">{{item.project_name}}</a>\r\n                    </td>\r\n                    <td>{{item.promoter_name}}</td>\r\n                    <td>\r\n                        <span *ngFor="let it of item.qtr_detail; let in = index" [title]="item?.showStatus"\r\n                            (mouseenter)="getStatusDates(item,in)"\r\n                            [ngClass]="[it.qtr_status === \'SUBMITTED\' ? \'submittedClassForQPR\' : \'\', it.qtr_status === \'INACTIVE\' ? \'inactiveClassForQPR\' : \'\', it.qtr_status === \'ACTIVE\' ? \'activeClassForQPR\' : \'\' , it.qtr_status === \'EXEMPT\' ? \'text-org\' : \'\' , it.qtr_status === \'DEFAULT\' ? \'defaultClassForQPR\' : \'\']">{{it.qtr_name}}\r\n                            ({{quarterStatusShort[it.qtr_status]}})\r\n                            <br>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <ng-container *ngFor="let lastStatus of item.qtr_detail; let ind = index;let last=last">\r\n                            <span *ngIf="last" [title]="lastStatus?.showStatus"\r\n                                (mouseenter)="getLastStatusDates(lastStatus)"\r\n                                [ngClass]="[lastStatus.qtr_status === \'SUBMITTED\' ? \'submittedClassForQPR\' : \'\', lastStatus.qtr_status === \'INACTIVE\' ? \'inactiveClassForQPR\' : \'\', lastStatus.qtr_status === \'ACTIVE\' ? \'activeClassForQPR\' : \'\' , lastStatus.qtr_status === \'EXEMPT\' ? \'text-org\' : \'\' , lastStatus.qtr_status === \'DEFAULT\' ? \'defaultClassForQPR\' : \'\']">\r\n                                {{lastStatus.qtr_name}}\r\n                                ({{quarterStatusShort[lastStatus.qtr_status]}})</span>\r\n                        </ng-container>\r\n                    </td>\r\n                    <td>{{item.approved_date | date : \'dd-MM-yyyy\'}}</td>\r\n                    <td>{{item.end_date | date : \'dd-MM-yyyy\'}}</td>\r\n                    <td>\r\n                        <span *ngIf="item.land_doc_uid">\r\n                            <app-multi-file-view [Uid]="item.land_doc_uid"></app-multi-file-view>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <span *ngIf="item.encumbrance_doc_uid">\r\n                            <app-multi-file-view [Uid]="item.encumbrance_doc_uid"></app-multi-file-view>\r\n                        </span>\r\n                    </td>\r\n                    <td>{{item.project_cost}}</td>\r\n                    <td>{{item.no_of_unit}}</td>\r\n                    <td>{{item.land_area}}</td>\r\n                    <td>{{item.ack_no}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="col-md-12 text-right" *ngIf="projectListData?.length > 0">\r\n            <pagination-controls id="foo1" (pageChange)="getPageNo($event)"></pagination-controls>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n</div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>'}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"6Y1g":function(t,e,a){"use strict";a.r(e),e.default='\r\n<form [formGroup]="searchFilter" class="row mb-3" *ngIf="hideFilter">\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Project Type</strong></label>\r\n      <select class="form-control" #prj formControlName="projectType">\r\n          <option value="null">--Select Project Type--</option>\r\n          <option value="Residential/Group Housing">Residential</option>\r\n          <option value="Commercial">Commercial</option>\r\n          <option value="Mixed Development">Mixed</option>\r\n          <option value="Plotted Development">Plotted</option>\r\n      </select>\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>District</strong></label>\r\n      <select class="form-control"  formControlName="districtCode">\r\n          <option value="null">--Select District--</option>\r\n          <option *ngFor="let d of gjDistrict" value="{{d?.districtCode}}">{{d?.districtName}}</option>\r\n      </select>\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Pin Code</strong></label>\r\n      <input type="number" formControlName="pinCode"  onKeyPress="if(this.value.length==6) return false;" class="form-control">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Min Area</strong></label>\r\n      <input type="number"  formControlName="minArea" class="form-control">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Max Area</strong></label>\r\n      <input type="number"  formControlName="maxArea" class="form-control">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Min Cost</strong></label>\r\n      <input type="number" class="form-control"  formControlName="minCost">\r\n  </div>\r\n  <div class="col-md-4 mb-3">\r\n      <label><strong>Max Cost</strong></label>\r\n      <input type="number" class="form-control"   formControlName="maxCost">\r\n  </div>\r\n  <div class="col-md-12 text-center">\r\n      <input type="button" class="btn btn-primary mt20" value="Filter" (click)="filterMap()">\r\n      <input type="button" class="btn btn-primary mt20" value="Reset" (click)="resetMap()">\r\n  </div>\r\n</form>\r\n\r\n<div class="text-right mb-4" *ngIf="viewProject"><input type="button" class="btn btn-primary" value="View Project" (click)="openProject()"></div>\r\n<div id="map"></div>\r\n<app-loader *ngIf="loadingSpinner"></app-loader>\r\n<app-validation-message [message]="inputJson"></app-validation-message>'},CKLL:function(t,e,a){"use strict";a.r(e);var r=a("mrSG"),n=a("8Y7J"),l=a("SVse"),o=a("iInd"),s=a("s7LF"),i=a("2Vo4"),p=a("ywUv"),c=a("+EOf");let d=class{constructor(t,e){this._router=t,this._mapSerice=e,this.mapJson={},this.inputJson=new i.a({}),this.getMapCord=new Array,this.allprjdata={projectType:""},this.prjDtl=new Array,this.gMapLatLng=new Array,this.gjDistrict=[],this._dlatlng=new Array,this.loadingSpinner=!1,this.hideFilter=!0}ngOnInit(){this._dlatlng[0]={zoom:9,center:{lat:22.730248792401763,lng:72.502915578125},mapTypeId:"terrain"},this._dlatlng.AHME={zoom:11,center:{lat:23.0313804,lng:72.6054446},mapTypeId:"terrain"},this._dlatlng.ANAN={zoom:14,center:{lat:22.5516034,lng:72.932202},mapTypeId:"terrain"},this._dlatlng.AMRE={zoom:12,center:{lat:21.6020661,lng:71.2031971},mapTypeId:"terrain"},this._dlatlng.ARAV={zoom:11,center:{lat:23.5862756,lng:73.2633217},mapTypeId:"terrain"},this._dlatlng.BANA={zoom:11,center:{lat:24.3417121,lng:71.6783641},mapTypeId:"terrain"},this._dlatlng.BHAR={zoom:14,center:{lat:21.7352931,lng:72.9898103},mapTypeId:"terrain"},this._dlatlng.BHAV={zoom:13,center:{lat:21.7639097,lng:72.1198864},mapTypeId:"terrain"},this._dlatlng.BOT={zoom:15,center:{lat:22.1738298,lng:71.6552954},mapTypeId:"terrain"},this._dlatlng.CUDE={zoom:15,center:{lat:22.3072606,lng:74.0053544},mapTypeId:"terrain"},this._dlatlng.DAHO={zoom:14,center:{lat:22.8493569,lng:74.2326651},mapTypeId:"terrain"},this._dlatlng.DANG={zoom:11,center:{lat:20.8206175,lng:73.5912704},mapTypeId:"terrain"},this._dlatlng.DEDW={zoom:11,center:{lat:22.1250525,lng:69.3233773},mapTypeId:"terrain"},this._dlatlng.GANDHI={zoom:13,center:{lat:23.2191955,lng:72.6146458},mapTypeId:"terrain"},this._dlatlng.GISO={zoom:11,center:{lat:20.9907994,lng:70.5868247},mapTypeId:"terrain"},this._dlatlng.JAMN={zoom:13,center:{lat:22.4745533,lng:70.0185848},mapTypeId:"terrain"},this._dlatlng.JUNA={zoom:14,center:{lat:21.5250025,lng:70.4418982},mapTypeId:"terrain"},this._dlatlng.KHED={zoom:16,center:{lat:22.7501971,lng:72.6823239},mapTypeId:"terrain"},this._dlatlng.KUTC={zoom:9,center:{lat:23.591376,lng:69.9961433},mapTypeId:"terrain"},this._dlatlng.MAHI={zoom:11,center:{lat:23.1940685,lng:73.6654984},mapTypeId:"terrain"},this._dlatlng.MEHS={zoom:11,center:{lat:23.6007618,lng:72.3854672},mapTypeId:"terrain"},this._dlatlng.MORB={zoom:11,center:{lat:23.1854542,lng:73.6430741},mapTypeId:"terrain"},this._dlatlng.NARM={zoom:11,center:{lat:21.7806528,lng:73.6665998},mapTypeId:"terrain"},this._dlatlng.NAVS={zoom:14,center:{lat:20.9432782,lng:72.9436175},mapTypeId:"terrain"},this._dlatlng.PANC={zoom:10,center:{lat:22.6994321,lng:73.6615487},mapTypeId:"terrain"},this._dlatlng.PATA={zoom:14,center:{lat:23.847591,lng:72.1282474},mapTypeId:"terrain"},this._dlatlng.PORB={zoom:14,center:{lat:21.6396455,lng:69.6356923},mapTypeId:"terrain"},this._dlatlng.RAJK={zoom:12,center:{lat:22.2710891,lng:70.8109934},mapTypeId:"terrain"},this._dlatlng.SABK={zoom:10,center:{lat:23.8012317,lng:73.1185678},mapTypeId:"terrain"},this._dlatlng.SURA={zoom:12,center:{lat:21.1650657,lng:72.8473456},mapTypeId:"terrain"},this._dlatlng.SURN={zoom:14,center:{lat:22.7226677,lng:71.6481115},mapTypeId:"terrain"},this._dlatlng.TAPI={zoom:10,center:{lat:21.1847708,lng:73.7717281},mapTypeId:"terrain"},this._dlatlng.VADO={zoom:12,center:{lat:22.3212485,lng:73.1830295},mapTypeId:"terrain"},this._dlatlng.VALS={zoom:14,center:{lat:20.6063387,lng:72.929391},mapTypeId:"terrain"},this.searchFilter=new s.d({projectType:new s.c("null"),districtCode:new s.c("null"),pinCode:new s.c(null),minArea:new s.c(null),maxArea:new s.c(null),minCost:new s.c(null),maxCost:new s.c(null)}),sessionStorage.removeItem("openMapProject"),null!=this.mapJson.subscribe?this.mapJson.subscribe(t=>{console.log(t),this.allprjdata=t,this.filterData=t,this.hideFilter=!1,p.a.load().then(()=>{this.showProjectOnMap(this._dlatlng[0])})}):(this.getDistrictMaster(),this.getMapCordinates())}getMapCordinates(){this.loadingSpinner=!0,this._mapSerice.getMapCordinatesService().subscribe(t=>{console.log(t),this.loadingSpinner=!1,this.allprjdata=t.data,this.filterData=t.data,p.a.load().then(()=>{this.showProjectOnMap(this._dlatlng[0])})},t=>{console.log(t)})}testfunction(t){console.log("Test function "+t)}callingFun(t){this.testfunction(t)}showProjectOnMap(t){this.loadMap(t),this.allprjdata.forEach(t=>{let e=new Array;t.coordinates.forEach(t=>{e.push({lat:parseFloat(t.lat),lng:parseFloat(t.lang)})});let a="<b> ";a+="<br>Project Name: "+t.projectName,a+="<br>Project Type:"+t.projectType,a+="<br>Promoter Name:"+t.promotorName+" ",a+="<br>Project Cost:"+t.projectCost+" </b>",this.showPolygon(e,a,t.projectName,t.projectId,this.callingFun)})}loadMap(t){console.log(t.center.lat),console.log(t.center.lng),console.log(t.zoom),this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:t.center.lat,lng:t.center.lng},zoom:t.zoom})}showPolygon(t,e,a,r,n){var l=new google.maps.Polygon({paths:t,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:3,fillColor:"#FF0000",fillOpacity:.35,contents:r,callbk:n,_ths:this});l.setMap(this.map);new google.maps.Marker({position:t[0],map:this.map,title:a});l.addListener("click",this.showProjTagOnMap)}callbk(t,e){console.log("  bbb   "+t.contents),this._mapSerice.getProjectService(t.contents).subscribe(a=>{console.log(a);let r="<div><strong>Project Name:</strong> "+a.data.projectname+"<br><strong>Reg No.:</strong> "+a.data.regno+"<br><strong>Promoter Name:</strong> "+a.data.promoter+"<br><strong>Project Address:</strong> "+a.data.siteaddr+"<br><strong>Project Type:</strong> "+a.data.details+"<br><strong>Project Blocks:</strong> "+a.data.blocks+"<br><strong>Project Cost:</strong> "+a.data.cost+"<br><strong>Project Date:</strong> "+a.data.dates+"<br><strong>Units:</strong> "+a.data.units;sessionStorage.setItem("publicProjectRegId",t.contents),this.viewProject=!0;var n=new google.maps.InfoWindow;n.setContent(r),n.setPosition(e),n.open(t.map)},t=>{console.log(t)})}showProjTagOnMap(t){console.log(this.latLngs,Object.keys(this.latLngs)[0]);let e=Object.keys(this.latLngs)[0],a=this.latLngs[e][0][e][0];console.log(a),this._ths.callbk(this,a)}getDistrictMaster(){this._mapSerice.getDistrictMasterService("GJ").subscribe(t=>{console.log(t),this.gjDistrict=t},t=>{console.log(t)})}filterMap(){let t=this.searchFilter.controls.projectType.value,e=this.searchFilter.controls.districtCode.value,a=this.searchFilter.controls.pinCode.value,r=this.searchFilter.controls.minArea.value,n=this.searchFilter.controls.maxArea.value,l=this.searchFilter.controls.minCost.value,o=this.searchFilter.controls.maxCost.value;console.log(this.filterData),console.log(this.allprjdata);let s={};for(var i in s={projectType:t,districtCode:e,pinCode:a},console.log(s),s)null!=s[i]&&""!=s[i]&&"null"!=s[i]&&null!=s[i]||delete s[i];console.log(s),this.allprjdata=this.filterData.filter(t=>{for(let e in s)if(t[e]!=s[e])return!1;return!0}),console.log(this.filterData),"null"!=e&&null!=e||(e=0),r>0&&n>0?this.allprjdata=this.allprjdata.filter(t=>parseInt(t.minArea)>=r&&parseInt(t.maxArea)<=n):r>0?this.allprjdata=this.allprjdata.filter(t=>parseInt(t.minArea)>=r):n>0&&(this.allprjdata=this.allprjdata.filter(t=>parseInt(t.maxArea)<=n)),l>0&&o>0?this.allprjdata=this.allprjdata.filter(t=>parseInt(t.minCost)>=l&&parseInt(t.maxCost)<=o):l>0?this.allprjdata=this.allprjdata.filter(t=>parseInt(t.minCost)>=l):o>0&&(this.allprjdata=this.allprjdata.filter(t=>parseInt(t.maxCost)<=o)),console.log(this.allprjdata),this.allprjdata.length<1&&this.inputJson.next({popShow:!0,popMsg:"No result found",popClass:"alert alert-danger",popRoute:""}),p.a.load().then(()=>{this.showProjectOnMap(this._dlatlng[e])})}resetMap(){this.searchFilter.reset(),this.allprjdata=this.filterData,p.a.load().then(()=>{this.showProjectOnMap(this._dlatlng[0])})}openProject(){this._router.navigate(["project-preview"])}};d.ctorParameters=()=>[{type:o.e},{type:c.a}],r.b([Object(n.E)()],d.prototype,"mapJson",void 0),d=r.b([Object(n.n)({selector:"app-public-page-map",template:r.c(a("6Y1g")).default,styles:[r.c(a("Rvku")).default]})],d);const m=[{path:"public-page-map",component:d}];let g=class{};g=r.b([Object(n.J)({imports:[o.f.forChild(m)],exports:[o.f]})],g);var h=a("UPf0"),u=a("4nBV");a.d(e,"PublicPageMapModule",(function(){return b}));let b=class{};b=r.b([Object(n.J)({declarations:[d],imports:[l.b,g,h.a,s.g,u.a]})],b)},Rvku:function(t,e,a){"use strict";a.r(e),e.default=""}}]);